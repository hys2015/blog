{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/avatar.png","path":"images/avatar.png","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/LICENSE","path":"vendors/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/README.md","path":"vendors/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/bower.json","path":"vendors/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","path":"vendors/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/bower.json","path":"vendors/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","path":"vendors/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","path":"vendors/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","path":"vendors/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","path":"vendors/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","path":"vendors/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/bower.json","path":"vendors/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","path":"vendors/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","path":"vendors/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","path":"vendors/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery/index.js","path":"vendors/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","path":"vendors/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","path":"vendors/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","path":"vendors/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","path":"vendors/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","path":"vendors/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","path":"vendors/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","path":"vendors/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","path":"vendors/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","path":"vendors/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","path":"vendors/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","path":"vendors/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","path":"vendors/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","path":"vendors/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","path":"vendors/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","path":"vendors/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","path":"vendors/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","path":"vendors/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","path":"vendors/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.js","path":"vendors/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","path":"vendors/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","path":"vendors/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","path":"vendors/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/404.html","hash":"45d81081e5f39eb82f88f566544e2635a74064a8","modified":1457417748276},{"_id":"themes/next/.bowerrc","hash":"80e096fdc1cf912ee85dd9f7e6e77fd40cf60f10","modified":1457415889221},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1457415889222},{"_id":"themes/next/.gitignore","hash":"efec790f5b7a0256763e1cc08f12c4f0aff509f6","modified":1457415889223},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1457415889224},{"_id":"themes/next/.javascript_ignore","hash":"d619ee13031908cd72666e4ff652d2ea3483b1c3","modified":1457415889224},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1457415889226},{"_id":"themes/next/README.en.md","hash":"565ba52b3825b85a9f05b41183caca7f18b741d4","modified":1457415889226},{"_id":"themes/next/README.md","hash":"500b5606eb6a09c979d16128f8b00f4bf9bc95ac","modified":1457415889227},{"_id":"themes/next/_config.yml","hash":"55f9fb38090af8298c30d52df3aac867d35fab62","modified":1457597336723},{"_id":"themes/next/bower.json","hash":"d7f8d4eb7c6ac1bb8d642112601005f93e3da49b","modified":1457415889229},{"_id":"themes/next/gulpfile.coffee","hash":"b3d53f36460119c741a98c0dc494b1c65d3ec943","modified":1457415889229},{"_id":"themes/next/package.json","hash":"bd016b54983b7e06a649ee915b2e13a60d47553e","modified":1457415889272},{"_id":"source/_posts/GitHub-Pages-Hexo-搭建博客记录.md","hash":"ae28039832d1c60ffecbacfdb94c99716fd38710","modified":1457513188910},{"_id":"source/categories/index.md","hash":"c983f513c2e67040b1b8f23a981fe4ce4e7257d9","modified":1457417321927},{"_id":"source/css/markcss.css","hash":"da42d3c431b4aac10388c745612f784913e24fdd","modified":1457514761443},{"_id":"source/tags/index.md","hash":"1f437c6ff2a50b3cbf7ebb99879dff2101eb26da","modified":1457417236438},{"_id":"themes/next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1457415889199},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1457415856000},{"_id":"themes/next/.git/config","hash":"2e8d4ea34f7ac5fbf3a7e3cb6d3bd3691e2e3009","modified":1457415889208},{"_id":"themes/next/.git/index","hash":"384327c8782d612e1e14386f1932acca9109a35a","modified":1457600706164},{"_id":"themes/next/.git/packed-refs","hash":"ee57fad105008851d796f3da856ccffceaf21b4a","modified":1457415889192},{"_id":"themes/next/languages/de.yml","hash":"786afba25cfc98845a20d9901823ebeebcd1cbbf","modified":1457415889230},{"_id":"themes/next/languages/default.yml","hash":"9db835c0543ade5a89bc80ec5a898203227cf3d8","modified":1457415889231},{"_id":"themes/next/languages/en.yml","hash":"f03799cbdb5a33064ead080bcac4baca1f6bc5f9","modified":1457415889231},{"_id":"themes/next/languages/fr-FR.yml","hash":"1a084623c39de74301f3e92f9388a3a815a542ca","modified":1457415889233},{"_id":"themes/next/languages/ja.yml","hash":"a2c7b6301b5474aab798946fb700289df237c3cf","modified":1457415889233},{"_id":"themes/next/languages/pt.yml","hash":"ca239b39bf65c9462e59d51b12f0fe566d453197","modified":1457415889234},{"_id":"themes/next/languages/ru.yml","hash":"cc7b964a46587aea0e57b0a5269d8fd25570858e","modified":1457415889234},{"_id":"themes/next/languages/zh-Hans.yml","hash":"c30c842fd270ea5349ec77270c99326cadc3fc0f","modified":1457423769887},{"_id":"themes/next/languages/zh-hk.yml","hash":"519ab3d817ec3bc5bfc91159c494b6b3c170bea7","modified":1457415889235},{"_id":"themes/next/languages/zh-tw.yml","hash":"6b1f345aaefc13e6723dc8a6741b59ac05c20dfd","modified":1457415889235},{"_id":"themes/next/layout/_layout.swig","hash":"aa2e47d2b6eb91b4be247ead4d2efb56f2c8a470","modified":1457594073253},{"_id":"themes/next/layout/archive.swig","hash":"b5b59d70fc1563f482fa07afd435752774ad5981","modified":1457415889269},{"_id":"themes/next/layout/category.swig","hash":"6422d196ceaff4220d54b8af770e7e957f3364ad","modified":1457415889269},{"_id":"themes/next/layout/index.swig","hash":"90c94a86cf550d94d35b93fb57d79ab22d3d8082","modified":1457596810775},{"_id":"themes/next/layout/page.swig","hash":"8019d02232a6dd1a665b6a4d2daef8e5dd2f0049","modified":1457415889271},{"_id":"themes/next/layout/post.swig","hash":"e2e512142961ddfe77eba29eaa88f4a2ee43ae18","modified":1457415889271},{"_id":"themes/next/layout/tag.swig","hash":"07cf49c49c39a14dfbe9ce8e7d7eea3d4d0a4911","modified":1457415889272},{"_id":"themes/next/scripts/merge-configs.js","hash":"0c56be2e85c694247cfa327ea6d627b99ca265e8","modified":1457415889273},{"_id":"themes/next/test/.jshintrc","hash":"096ed6df627373edd820f24d46b8baf528dee61d","modified":1457415889417},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1457415889418},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1457415889418},{"_id":"source/images/avatar.png","hash":"417f4cf1f6c861091a51a5bc0ef66622e778d46e","modified":1457513634289},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889349},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1457415856003},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1457415856004},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1457415856005},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1457415856007},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1457415856006},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1457415856008},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1457415856009},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1457415856009},{"_id":"themes/next/.git/hooks/update.sample","hash":"39355a075977d05708ef74e1b66d09a36e486df1","modified":1457415856010},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1457415856011},{"_id":"themes/next/.git/logs/HEAD","hash":"615df30d164caca63593391dc8e30e816f08d8a5","modified":1457415889204},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"43c3433155ccd9abcbe7dce2e6bfa1f3a66af18b","modified":1457415889237},{"_id":"themes/next/layout/_macro/post.swig","hash":"e10994fa9f58fd91e945a689e19e971d4e2e84b8","modified":1457598184633},{"_id":"themes/next/layout/_macro/reward.swig","hash":"e8e9c986ce1a0b370afd36703d49f1818492cb64","modified":1457415889239},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"949195708f387192673d0501366080d61efbce37","modified":1457435056447},{"_id":"themes/next/layout/_partials/comments.swig","hash":"82a9bc2ba60ce68419128ff60624bd74b15dfb78","modified":1457415889241},{"_id":"themes/next/layout/_partials/footer.swig","hash":"f1d38e900339df5c2469dec705fd2dad220c961d","modified":1457599178239},{"_id":"themes/next/layout/_partials/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1457415889241},{"_id":"themes/next/layout/_partials/head.swig","hash":"2fad3f5aa08c055483ca7672598d865a3383c6b8","modified":1457600685455},{"_id":"themes/next/layout/_partials/header.swig","hash":"d6d38d819407459fd96af5b96779309d8c2f886a","modified":1457426722958},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1457415889245},{"_id":"themes/next/layout/_partials/search.swig","hash":"011b9d6c9f0a2f4654908ea20b9391f9b7981271","modified":1457415889246},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1457415889253},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1457415889253},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"21b055278a74f190571af67cfae03ae6c3fb295c","modified":1457415889268},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1457415889274},{"_id":"themes/next/scripts/tags/full-image.js","hash":"3acce36db0feb11a982c6c799aa6b6b47df2827c","modified":1457415889275},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1457415889275},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1457415889348},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1457415889350},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1457415889351},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1457415889351},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1457415889352},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1457415889353},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1457415889353},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1457415889354},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1457415889354},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1457415889355},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1457415889355},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1457415889356},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1457415889356},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889255},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889255},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889323},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889324},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889327},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889343},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1457415889346},{"_id":"themes/next/.git/refs/heads/master","hash":"016ea05f90411759708a96ec92ddfd3c14383cb4","modified":1457415889201},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1457415889248},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"363482dc4cc5002e8ae2164d86939486f13ec8b6","modified":1457415889247},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1457415889249},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"c07f7b2f264e5215b8ed42d67e8cef2477558364","modified":1457415889250},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"b2347144b353166a8c488ccd4cc0907919689af8","modified":1457597423908},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1457596882874},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"63315fcf210799f894208c9f512737096df84962","modified":1457415889252},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"acdea5e939e148b807216ca44a6843e433ccdb52","modified":1457415889254},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1457415889256},{"_id":"themes/next/layout/_scripts/third-party/analytics.swig","hash":"d79bd946f07b83b47926dd67bb9d40e652b94769","modified":1457415889257},{"_id":"themes/next/layout/_scripts/third-party/comments.swig","hash":"907b931d775d32405d02a25b3b0a3ac03bf804d0","modified":1457415889261},{"_id":"themes/next/layout/_scripts/third-party/lean-analytics.swig","hash":"2fc4a0d2c825a512f39c0eadd78452e90615465a","modified":1457415889263},{"_id":"themes/next/layout/_scripts/third-party/localsearch.swig","hash":"6c666819b3178a6f661c2152ff95026aea750f69","modified":1457415889264},{"_id":"themes/next/layout/_scripts/third-party/mathjax.swig","hash":"df03220eb8526e17dc9c9f17780c2d6699367181","modified":1457415889266},{"_id":"themes/next/layout/_scripts/third-party/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1457415889267},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1457415889323},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1457415889325},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"4e49707c99c8bbcfa0a607dfdaff0fbb7dffd2a3","modified":1457415889327},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"c8d35a6b9e3bff6d8fdb66de853065af9d37562d","modified":1457415889343},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"bcf8238cf842bbfc8f3ea733889bc4dacf59d3c4","modified":1457415889344},{"_id":"themes/next/source/css/_variables/base.styl","hash":"23df0070bef4952cc0e669f20fc78a8abba9676e","modified":1457415889346},{"_id":"themes/next/source/css/_variables/default.styl","hash":"8ec3307fe42d738b1bbda4b6419d0995f5560222","modified":1457415889347},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1457415889358},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1457415889359},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1457415889358},{"_id":"themes/next/source/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1457415889359},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1457415889361},{"_id":"themes/next/source/js/src/utils.js","hash":"cf24307d8aeb18e9bad093647c7fb50dc3d9fbe8","modified":1457415889362},{"_id":"themes/next/source/vendors/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1457415889363},{"_id":"themes/next/source/vendors/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1457415889364},{"_id":"themes/next/source/vendors/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1457415889377},{"_id":"themes/next/source/vendors/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1457415889378},{"_id":"themes/next/source/vendors/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1457415889379},{"_id":"themes/next/source/vendors/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1457415889379},{"_id":"themes/next/source/vendors/font-awesome/.bower.json","hash":"7da985a99674e54f514d4fd9fcd3bcea6e7e41d5","modified":1457415889382},{"_id":"themes/next/source/vendors/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1457415889383},{"_id":"themes/next/source/vendors/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1457415889383},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","hash":"69a4c537d167b68a0ccf1c6febd138aeffca60d6","modified":1457415889384},{"_id":"themes/next/source/vendors/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1457415889386},{"_id":"themes/next/source/vendors/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1457415889400},{"_id":"themes/next/source/vendors/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1457415889402},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1457415889403},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1457415889404},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1457415889405},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1457415889406},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1457415889407},{"_id":"themes/next/source/vendors/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1457415889411},{"_id":"themes/next/source/vendors/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1457415889412},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1457415889415},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1457415889415},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1457415889416},{"_id":"themes/next/source/vendors/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1457415889401},{"_id":"themes/next/.git/logs/refs/heads/master","hash":"615df30d164caca63593391dc8e30e816f08d8a5","modified":1457415889203},{"_id":"themes/next/.git/objects/pack/pack-63d9f4cc84289f191d6fb2cb2941326e9a8e62e2.idx","hash":"58d59151934b3b41d63ec884c2c1b4c8821ba234","modified":1457415888808},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1457415889194},{"_id":"themes/next/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"7c43d66da93cde65b473a7d6db2a86f9a42647d6","modified":1457415889258},{"_id":"themes/next/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"334176d838ee528e58468d8bc74ff3a6d3f25b2b","modified":1457415889259},{"_id":"themes/next/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"30a23fa7e816496fdec0e932aa42e2d13098a9c2","modified":1457415889260},{"_id":"themes/next/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1457415889260},{"_id":"themes/next/layout/_scripts/third-party/comments/disqus.swig","hash":"3491d3cebabc8a28857200db28a1be65aad6adc2","modified":1457415889262},{"_id":"themes/next/layout/_scripts/third-party/comments/duoshuo.swig","hash":"fa2b7a0006b6c447fa025474f8e0af4e4e569a36","modified":1457415889263},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1457415889318},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"b49efc66bd055a2d0be7deabfcb02ee72a9a28c8","modified":1457415889278},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"0dfb4b3ba3180d7285e66f270e1d3fa0f132c3d2","modified":1457415889278},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1457415889279},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"10994990d6e0b4d965a728a22cf7f6ee29cae9f6","modified":1457415889280},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1457415889291},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1457415889306},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5304f99581da3a31de3ecec959b7adf9002fde83","modified":1457415889319},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"6dc928ddfc4c93ad2ffef2556aaaae155033abec","modified":1457415889319},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1457415889320},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"013619c472c7e4b08311c464fcbe9fcf5edde603","modified":1457415889321},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"5f766cf26f966dbf9dcfe681f40ab9032e3e8a08","modified":1457415889322},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"6ed60cc621bac096c0ed7534fa25b1a52dc571d4","modified":1457415889335},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1457415889336},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"870a3efaebac2733a32283f3e30b19a127d7d92b","modified":1457415889336},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1457415889337},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"8aca5d9f1df157ab27e699c1b3ba9438b9e039ad","modified":1457415889338},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1457415889329},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1457415889329},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1457415889330},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1457415889331},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1457415889333},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"4303776991ef28f5742ca51c7dffe6f12f0acf34","modified":1457415889332},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"8ba6f37b6405aa176e3579622e09760dad60dc17","modified":1457415889333},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"9658d09de4fcc809a29d4b706a9621adfb3090ad","modified":1457415889338},{"_id":"themes/next/source/css/_schemes/Pisces/_full-image.styl","hash":"938d39eedc6e3d33918c1145a5bf1e79991d3fcf","modified":1457415889339},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"58a036397de73d868fee16f34d246a3d863f30c2","modified":1457415889340},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"dcbfef1c76288620f7f405a7aeba893d458d5b6a","modified":1457415889340},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1457415889341},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"b28187c610bf5f05e27732f72c3486494689bbfe","modified":1457415889341},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"1b10ba2d3ad0c063c418dc94a0b7e0db4b342c53","modified":1457415889342},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"94f935331995bfeadf1084fb8f0665ab39fd1c8d","modified":1457415889361},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1457415889366},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1457415889367},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1457415889367},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1457415889368},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1457415889369},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1457415889370},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1457415889375},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1457415889376},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1457415889376},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1457415889381},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1457415889381},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","hash":"3b87c2560832748cd06f9bfd2fd6ea8edbdae8c7","modified":1457415889387},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1457415889388},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","hash":"05ea25bc9b3ac48993e1fee322d3bc94b49a6e22","modified":1457415889389},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1457415889399},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1457415889410},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1457415889409},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1457415889391},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1457415889392},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1457415889398},{"_id":"themes/next/source/vendors/velocity/velocity.js","hash":"e63dc7cea055ca60a95d286f32349d88b10c5a4d","modified":1457415889413},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"615df30d164caca63593391dc8e30e816f08d8a5","modified":1457415889198},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1457415889280},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1457415889282},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1457415889282},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"455d55cc693a1dcbf729b3d041edd0171093bdd3","modified":1457415889283},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"61763d236029d2a4414be499d0e65d7dfb34605b","modified":1457415889284},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1457415889284},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"6242be4307a3b3dafc14e556f51c8875c41a1ddd","modified":1457415889286},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"ae19721ceee5ba460e131cb2427dae3c1ff39d6f","modified":1457415889287},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"23dd966324937deeccc8f5fa16a6d32e4e46243b","modified":1457415889289},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4f696a2eaeee2f214adcf273eab25c62a398077a","modified":1457415889289},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"3c46efd6601e268093ce6d7b1471d18501878f0d","modified":1457415889290},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"fe71e9be08cb418cf68352fd6212ddd0d7150579","modified":1457415889293},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1457415889291},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1457415889293},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"b25132fe6a7ad67059a2c3afc60feabb479bdd75","modified":1457415889294},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1457415889295},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"330a2ce52c5a5fefc1e85c473113a3bc58210c76","modified":1457415889295},{"_id":"themes/next/source/css/_common/components/post/post-more-link.styl","hash":"5c415dc8efab7c1bdeffacafa3100d1da6628b03","modified":1457415889296},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"cbca4842a54950e2934b3b8f3cd940f122111aef","modified":1457415889296},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1457415889297},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"99d994bd19895a4aaa2fa8d12801ec72dd3cf118","modified":1457415889297},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1457415889298},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"01db9373cd13c1aec840205c622064dd6ae03361","modified":1457415889299},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2e7ec9aaa3293941106b1bdd09055246aa3c3dc6","modified":1457415889300},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"89fef1caf94caf76ca09c643b83b0b4d4e417e08","modified":1457415889301},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1457415889301},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1457415889302},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"6533563b34241e5c73da68156aba89e880b93f53","modified":1457415889302},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"2d3abbc85b979a648e0e579e45f16a6eba49d1e7","modified":1457415889303},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"1099b5d07a60d93dad6221677c60cba60a82266b","modified":1457415889304},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"58fb7604b44e3f56d880bbbd95d0baface38c4ee","modified":1457415889305},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1457415889309},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"618f73450cf541f88a4fddc3d22898aee49d105d","modified":1457415889309},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1457415889311},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"8e66c2635d48e11de616bb29c4b1323698eebc0a","modified":1457415889312},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1457415889313},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1457415889314},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1457415889316},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"053241588554355d836ba7767baf810768edce4b","modified":1457415889317},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"f7ebd428f3058ec3ecc7648788712617bea520ba","modified":1457415889317},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1457415889334},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1457415889370},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1457415889372},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1457415889371},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1457415889373},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1457415889373},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1457415889374},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1457415889397},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"2b3c8ba7008cc014d8fb37abc6f9f49aeda83824","modified":1457415889395},{"_id":"themes/next/.git/objects/pack/pack-63d9f4cc84289f191d6fb2cb2941326e9a8e62e2.pack","hash":"3f46b9cec720ad044c3f6a09af8ca92b9def788d","modified":1457415888934},{"_id":"public/css/markcss.css","hash":"8602b4d89377b3f6ff063505349e803fb520ed8e","modified":1457539775793},{"_id":"public/404.html","hash":"a141897b8a964ed497a15063de09ae1db4ffae31","modified":1457600763295},{"_id":"public/categories/index.html","hash":"252971035d04668fa1c60b3c99a5d863c78bc0a6","modified":1457600763295},{"_id":"public/tags/index.html","hash":"38ea2d88587e767d35a54947aad0bc1e2cc0b439","modified":1457600763295},{"_id":"public/archives/index.html","hash":"5ebf0c774704ad5a5c48be6b3bd1ed544c34a030","modified":1457600763296},{"_id":"public/archives/2016/index.html","hash":"d35557efc5f2879bc23fc77d3db2903f3fc763ef","modified":1457600763296},{"_id":"public/archives/2016/03/index.html","hash":"e1fce8f91607fc1a4a3dcb270b1d7ec55b1261a6","modified":1457600763296},{"_id":"public/categories/随笔/index.html","hash":"f31d7ffb7c8262c63ff8574856f0faff5432d091","modified":1457600763296},{"_id":"public/index.html","hash":"bd561b814513e96c384cb41351b921d4c6842bd6","modified":1457600763296},{"_id":"public/tags/Hexo/index.html","hash":"c0db8980cf08d37d0d0e0c86707bd525ba8ddb94","modified":1457600763296},{"_id":"public/tags/GitHub-Pages/index.html","hash":"6526903391942933ea9d60acbd2fa85bd55d8914","modified":1457600763296},{"_id":"public/2016/03/09/GitHub-Pages-Hexo-搭建博客记录/index.html","hash":"c957e732613a99335b40fa49746c9d18af14301e","modified":1457600763296},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1457539775819},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1457539775820},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1457539775820},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1457539775820},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1457539775820},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1457539775820},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1457539775820},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1457539775820},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1457539775820},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1457539775820},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1457539775820},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1457539775820},{"_id":"public/vendors/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1457539775820},{"_id":"public/vendors/font-awesome/HELP-US-OUT.txt","hash":"69a4c537d167b68a0ccf1c6febd138aeffca60d6","modified":1457539775821},{"_id":"public/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1457539775821},{"_id":"public/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1457539775821},{"_id":"public/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1457539775821},{"_id":"public/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1457539775822},{"_id":"public/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1457539775822},{"_id":"public/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1457539775822},{"_id":"public/vendors/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1457539775822},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1457539775822},{"_id":"public/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1457539775822},{"_id":"public/images/avatar.png","hash":"417f4cf1f6c861091a51a5bc0ef66622e778d46e","modified":1457539776679},{"_id":"public/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1457539776681},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1457539776692},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1457539776692},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1457539776701},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1457539776701},{"_id":"public/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1457539776701},{"_id":"public/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1457539776701},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1457539776701},{"_id":"public/js/src/utils.js","hash":"cf24307d8aeb18e9bad093647c7fb50dc3d9fbe8","modified":1457539776701},{"_id":"public/vendors/fastclick/README.html","hash":"da3c74d484c73cc7df565e8abbfa4d6a5a18d4da","modified":1457539776701},{"_id":"public/vendors/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1457539776701},{"_id":"public/vendors/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1457539776701},{"_id":"public/vendors/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1457539776701},{"_id":"public/vendors/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1457539776702},{"_id":"public/vendors/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1457539776702},{"_id":"public/vendors/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1457539776702},{"_id":"public/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1457539776702},{"_id":"public/vendors/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1457539776702},{"_id":"public/vendors/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1457539776702},{"_id":"public/js/src/schemes/pisces.js","hash":"94f935331995bfeadf1084fb8f0665ab39fd1c8d","modified":1457539776702},{"_id":"public/vendors/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1457539776707},{"_id":"public/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1457539776707},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1457539776708},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1457539776708},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1457539776708},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1457539776708},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1457539776708},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1457539776709},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1457539776709},{"_id":"public/css/main.css","hash":"ea0909dfb66a739891f08fb9cdb521cad2efe5cb","modified":1457539776709},{"_id":"public/vendors/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1457539776709},{"_id":"public/vendors/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1457539776709},{"_id":"public/vendors/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1457539776709},{"_id":"public/vendors/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1457539776709},{"_id":"public/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1457539776710},{"_id":"public/vendors/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1457539776710},{"_id":"public/vendors/font-awesome/css/font-awesome.css","hash":"3b87c2560832748cd06f9bfd2fd6ea8edbdae8c7","modified":1457539776710},{"_id":"public/vendors/font-awesome/css/font-awesome.min.css","hash":"05ea25bc9b3ac48993e1fee322d3bc94b49a6e22","modified":1457539776710},{"_id":"public/vendors/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1457539776710},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1457539776710},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"2b3c8ba7008cc014d8fb37abc6f9f49aeda83824","modified":1457539776724},{"_id":"source/js/duoshuo.js","hash":"0f5fa1380a457e6c30888a2138750ac63eb77988","modified":1457600340669},{"_id":"public/js/duoshuo.js","hash":"a16f69f5026fd8b4aead10eb249b619c71b32e5c","modified":1457600438675}],"Category":[{"name":"随笔","_id":"cill1jrw00005gssc8x6yll1m"}],"Data":[],"Page":[{"_content":"<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homePageUrl=\"/blog/ \" homePageName=\"返回博客\"></script>\n\n</body>\n</html>","source":"404.html","raw":"<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homePageUrl=\"/blog/ \" homePageName=\"返回博客\"></script>\n\n</body>\n</html>","date":"2016-03-08T06:15:48.276Z","updated":"2016-03-08T06:15:48.276Z","path":"404.html","title":"","comments":1,"layout":"page","_id":"cill1jrse0000gssc7tzj36nw","content":"<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <meta name=\"robots\" content=\"all\">\n  <meta name=\"robots\" content=\"index,follow\">\n</head>\n<body>\n\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homepageurl=\"/blog/ \" homepagename=\"返回博客\"></script>\n\n</body>\n</html>","excerpt":"","more":"<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homePageUrl=\"/blog/ \" homePageName=\"返回博客\"></script>\n\n</body>\n</html>"},{"_content":".links-of-author a:before {\n  background: #FFA500;\n}","source":"css/markcss.css","raw":".links-of-author a:before {\n  background: #FFA500;\n}","date":"2016-03-09T09:12:41.443Z","updated":"2016-03-09T09:12:41.443Z","path":"css/markcss.css","layout":"false","title":"","comments":1,"_id":"cill1jrvr0002gssc6gv2pgzv","content":".links-of-author a:before {\n  background: #FFA500;\n}","excerpt":"","more":".links-of-author a:before {\n  background: #FFA500;\n}"},{"title":"分类","date":"2016-03-08T06:07:53.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2016-03-08 14:07:53\ntype: \"categories\"\ncomments: false\n---\n","updated":"2016-03-08T06:08:41.927Z","path":"categories/index.html","layout":"page","_id":"cill1jrvv0003gssc6d5myoja","content":"","excerpt":"","more":""},{"title":"TagCloud","date":"2016-03-08T06:05:46.000Z","type":"tags","comments":1,"_content":"","source":"tags/index.md","raw":"---\ntitle: TagCloud\ndate: 2016-03-08 14:05:46\ntype: \"tags\"\ncomments: false;\n---\n","updated":"2016-03-08T06:07:16.438Z","path":"tags/index.html","layout":"page","_id":"cill1jrw10006gssc770rmtix","content":"","excerpt":"","more":""},{"_content":"//管理员判断开始\nfunction sskadmin(e) {\n    var ssk = '';\n    if (e.user_id == 6260328050223743746) {\n        if (checkMobile()) {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span><br><br>';\n        } else {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span>';\n        }\n    } else {\n        if (checkMobile()) {\n            ssk = '<br><br>';\n        }\n    }\n    return ssk;\n}\n//管理员判断结束\n//移动客户端判断开始\nfunction checkMobile() {\n    var isiPad = navigator.userAgent.match(/iPad/i) != null;\n    if (isiPad) {\n        return false;\n    }\n    var isMobile = navigator.userAgent.match(/iphone|android|phone|mobile|wap|netfront|x11|java|opera mobi|opera mini|ucweb|windows ce|symbian|symbianos|series|webos|sony|blackberry|dopod|nokia|samsung|palmsource|xda|pieplus|meizu|midp|cldc|motorola|foma|docomo|up.browser|up.link|blazer|helio|hosin|huawei|novarra|coolpad|webos|techfaith|palmsource|alcatel|amoi|ktouch|nexian|ericsson|philips|sagem|wellcom|bunjalloo|maui|smartphone|iemobile|spice|bird|zte-|longcos|pantech|gionee|portalmmm|jig browser|hiptop|benq|haier|^lct|320x320|240x320|176x220/i) != null;\n    if (isMobile) {\n        return true;\n    }\n    return false;\n}\n//移动客户端判断结束\n//显UA开始\nfunction ua(e) {\n    var r = new Array;\n    var outputer = '';\n    if (r = e.match(/FireFox\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_firefox\"><i class=\"fa fa-firefox\"></i> FireFox'\n    } else if (r = e.match(/Maxthon([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_maxthon\"><i class=\"fa fa-globe\"></i> Maxthon'\n    } else if (r = e.match(/BIDUBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> 百度浏览器'\n    } else if (r = e.match(/UBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/UCBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/MetaSr/ig)) {\n        outputer = '<span class=\"ua_sogou\"><i class=\"fa fa-globe\"></i> 搜狗浏览器'\n    } else if (r = e.match(/2345Explorer/ig)) {\n        outputer = '<span class=\"ua_2345explorer\"><i class=\"fa fa-globe\"></i> 2345王牌浏览器'\n    } else if (r = e.match(/2345chrome/ig)) {\n        outputer = '<span class=\"ua_2345chrome\"><i class=\"fa fa-globe\"></i> 2345加速浏览器'\n    } else if (r = e.match(/LBBROWSER/ig)) {\n        outputer = '<span class=\"ua_lbbrowser\"><i class=\"fa fa-globe\"></i> 猎豹安全浏览器'\n    } else if (r = e.match(/MicroMessenger\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-weixin\"></i> 微信'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQ\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/MiuiBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_mi\"><i class=\"fa fa-globe\"></i> Miui浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/Chrome([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_chrome\"><i class=\"fa fa-chrome\"></i> Chrome'\n        /*.split('.')[0]*/\n    } else if (r = e.match(/safari\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_apple\"><i class=\"fa fa-safari\"></i> Safari'\n    } else if (r = e.match(/Opera[\\s|\\/]([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_opera\"><i class=\"fa fa-opera\"></i> Opera'\n    } else if (r = e.match(/Trident\\/7.0/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE 11'\n    } else if (r = e.match(/MSIE\\s([^\\s|;]+)/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE' + ' ' + r[0]\n        /*.replace('MSIE', '').split('.')[0]*/\n    } else {\n        outputer = '<span class=\"ua_other\"><i class=\"fa fa-globe\"></i> 其它浏览器'\n    }\n    if (checkMobile()) {\n        Mobile = '<br><br>';\n    } else {\n        Mobile = '';\n    }\n    return outputer + \"</span>\" + Mobile;\n}\nfunction os(e) {\n    var os = '';\n    if (e.match(/win/ig)) {\n        if (e.match(/nt 5.1/ig)) {\n            os = '<span class=\"os_xp\"><i class=\"fa fa-windows\"></i> Windows XP'\n        } else if (e.match(/nt 6.1/ig)) {\n            os = '<span class=\"os_7\"><i class=\"fa fa-windows\"></i> Windows 7'\n        } else if (e.match(/nt 6.2/ig)) {\n            os = '<span class=\"os_8\"><i class=\"fa fa-windows\"></i> Windows 8'\n        } else if (e.match(/nt 6.3/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 8.1'\n        } else if (e.match(/nt 10.0/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 10'\n        } else if (e.match(/nt 6.0/ig)) {\n            os = '<span class=\"os_vista\"><i class=\"fa fa-windows\"></i> Windows Vista'\n        } else if (e.match(/nt 5/ig)) {\n            os = '<span class=\"os_2000\"><i class=\"fa fa-windows\"></i> Windows 2000'\n        } else {\n            os = '<span class=\"os_windows\"><i class=\"fa fa-windows\"></i> Windows'\n        }\n    } else if (e.match(/android/ig)) {\n        os = '<span class=\"os_android\"><i class=\"fa fa-android\"></i> Android'\n    } else if (e.match(/ubuntu/ig)) {\n        os = '<span class=\"os_ubuntu\"><i class=\"fa fa-desktop\"></i> Ubuntu'\n    } else if (e.match(/linux/ig)) {\n        os = '<span class=\"os_linux\"><i class=\"fa fa-linux\"></i> Linux'\n    } else if (e.match(/mac/ig)) {\n        os = '<span class=\"os_mac\"><i class=\"fa fa-apple\"></i> Mac OS X'\n    } else if (e.match(/unix/ig)) {\n        os = '<span class=\"os_unix\"><i class=\"fa fa-desktop\"></i> Unix'\n    } else if (e.match(/symbian/ig)) {\n        os = '<span class=\"os_nokia\"><i class=\"fa fa-mobile\"></i> Nokia SymbianOS'\n    } else {\n        os = '<span class=\"os_other\"><i class=\"fa fa-desktop\"></i> 其它操作系统'\n    }\n    return os + \"</span>\";\n}\n//显UA结束\n!\nfunction(e, t, s) {\n    function a() {\n        return c.short_name ? g + \"//\" + c.short_name + \".\" + S.DOMAIN: S.REMOTE\n    }\n    function i() {\n        function t() {\n            for (var t; t = y.shift();) {\n                var a = t.url,\n                i = new s(t.title, {\n                    dir: \"auto\",\n                    icon: t.iconUrl,\n                    body: t.body\n                });\n                try {\n                    i.onclick = function() {\n                        e.focus(),\n                        h.href = a,\n                        i.close()\n                    }\n                } catch(r) {}\n                setTimeout(function() {\n                    i.close && i.close()\n                },\n                8e3)\n            }\n        }\n        var s = e.Notification;\n        \"Notification\" in e && \"denied\" !== s.permission && (\"granted\" === s.permission && t(), s.requestPermission(function(e) {\n            \"granted\" === e && t()\n        }))\n    }\n    function r() {\n        return 0 == nt.data.user_id\n    }\n    function n(e) {\n        S.theme = e,\n        \"none\" != e && o.injectStylesheet(S.STATIC_URL + \"/styles/embed\" + (e ? \".\" + e + \".css?\" + U[e] : \".\" + short_name) + \".css\")\n    }\n    var o = {},\n    d = t.getElementsByTagName(\"head\")[0] || t.getElementsByTagName(\"body\")[0];\n    if (o.extend = function(e, t) {\n        for (var s in t) e[s] = t[s];\n        return e\n    },\n    o.injectScript = function(a, i) {\n        var r = t.createElement(\"script\"),\n        n = t.head || t.getElementsByTagName(\"head\")[0] || t.documentElement;\n        r.type = \"text/javascript\",\n        r.src = a,\n        r.async = \"async\",\n        r.charset = \"utf-8\",\n        i && (r.onload = r.onreadystatechange = function(t, a) {\n            var o = a || !r.readyState || /loaded|complete/.test(r.readyState);\n            o && (r.onload = r.onreadystatechange = null, n && r.parentNode && n.removeChild(r), r = s, a || i.call(e))\n        }),\n        n.insertBefore(r, n.firstChild)\n    },\n    o.injectStylesheet = function(e) {\n        var s = t.createElement(\"link\");\n        s.type = \"text/css\",\n        s.rel = \"stylesheet\",\n        s.href = e,\n        d.appendChild(s)\n    },\n    o.injectStyle = function(e) {\n        var s = t.createElement(\"style\");\n        return s.type = \"text/css\",\n        d.appendChild(s),\n        e = e.replace(/\\}/g, \"}\\n\"),\n        s.styleSheet ? s.styleSheet.cssText = e: s.appendChild(t.createTextNode(e)),\n        s\n    },\n    o.getCookie = function(e) {\n        for (var a, i, r, n = \" \" + e + \"=\",\n        o = t.cookie.split(\";\"), d = 0; d < o.length; d++) if (a = \" \" + o[d], i = a.indexOf(n), i >= 0 && i + n.length == (r = a.indexOf(\"=\") + 1)) return decodeURIComponent(a.substring(r, a.length).replace(/\\+/g, \"\"));\n        return s\n    },\n    o.param = function(e) {\n        var t = [];\n        for (var a in e) e[a] != s && t.push(a + \"=\" + encodeURIComponent(e[a]));\n        return t.join(\"&\")\n    },\n    o.cssProperty = function(e, s) {\n        var a = (t.body || t.documentElement).style;\n        if (\"undefined\" == typeof a) return ! 1;\n        if (\"string\" == typeof a[e]) return s ? e: !0;\n        for (var i = [\"Moz\", \"Webkit\", \"ms\"], e = e.charAt(0).toUpperCase() + e.substr(1), r = 0; r < i.length; r++) if (\"string\" == typeof a[i[r] + e]) return s ? i[r] + e: !0\n    },\n    !e.DUOSHUO) {\n        for (var l in Object.prototype) return alert(\"Object.prototype 不为空，请不要给 Object.prototype 设置方法\");\n        var c, u, p = e.JSON,\n        h = e.location,\n        f = e.XMLHttpRequest,\n        m = p && p.stringify && e.localStorage,\n        v = e.navigator.userAgent,\n        g = \"https:\" == t.location.protocol ? \"https:\": \"http:\",\n        b = 0,\n        y = [],\n        _ = u = function() {\n            function e(e) {\n                return t[e] || \"&amp;\"\n            }\n            var t = {\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\",\n                '\"': \"&quot;\",\n                \"'\": \"&#x27;\",\n                \"`\": \"&#x60;\"\n            },\n            s = /&(?!\\w+;)|[<>\"'`]/g,\n            a = /[&<>\"'`]/;\n            return function(t) {\n                return null == t || t === !1 ? \"\": a.test(t) ? t.replace(s, e) : t\n            }\n        } (),\n        k = function(e) {\n            if (e.match(/^(http|https):/)) return e;\n            var s = t.createElement(\"a\");\n            return s.href = e,\n            P.hrefNormalized ? s.href: s.getAttribute(\"href\", 4)\n        },\n        w = function(e) {\n            return function() {\n                return e\n            }\n        },\n        x = function() {\n            for (var e = {},\n            t = 0; t < arguments.length; t++) arguments[t] && o.extend(e, arguments[t]);\n            var s = o.param(e);\n            return s ? \"?\" + s: \"\"\n        },\n        T = function() {\n            var e = o.getCookie(\"duoshuo_token\");\n            return e ? {\n                jwt: e\n            }: c.remote_auth ? {\n                short_name: c.short_name,\n                remote_auth: c.remote_auth\n            }: s\n        },\n        q = function() {\n            if (!c && (c = e.duoshuoQuery)) {\n                if (!c.short_name || \"your_duoshuo_short_name\" === c.short_name) return c = s,\n                void alert(\"你还没有设置多说域名(duoshuoQuery.short_name)，填入已有域名或创建新站点：http://duoshuo.com/create-site/\");\n                it.trigger(\"queryDefined\")\n            }\n            return c\n        },\n        C = function(e) {\n            return e && e.error && e.warn ? e: {\n                error: function() {},\n                log: function() {},\n                warn: function() {}\n            }\n        } (e.console),\n        S = e.DUOSHUO = {\n            sourceName: {\n                weibo: \"新浪微博\",\n                qq: \"QQ\",\n                qzone: \"QQ空间\",\n                qqt: \"腾讯微博\",\n                renren: \"人人网\",\n                douban: \"豆瓣网\",\n                kaixin: \"开心网\",\n                sohu: \"搜狐微博\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            serviceNames: {\n                weibo: \"微博\",\n                qq: \"QQ\",\n                douban: \"豆瓣\",\n                renren: \"人人\",\n                kaixin: \"开心\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            parseDate: function(e) {\n                return e.parse(\"2011-10-28T00:00:00+08:00\") &&\n                function(t) {\n                    return new e(t)\n                } || e.parse(\"2011/10/28T00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\"))\n                } || e.parse(\"2011/10/28 00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\").replace(\"T\", \" \"))\n                } ||\n                function(t) {\n                    return new e(t)\n                }\n            } (Date),\n            fullTime: function(e) {\n                var t = S.parseDate(e);\n                return t.getFullYear() + \"年\" + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日 \" + t.toLocaleTimeString()\n            },\n            elapsedTime: function(e) {\n                var t = S.parseDate(e),\n                s = new Date,\n                a = (s - b - t) / 1e3;\n                return 10 > a ? \"刚刚\": 60 > a ? Math.round(a) + \"秒前\": 3600 > a ? Math.round(a / 60) + \"分钟前\": 86400 > a ? Math.round(a / 3600) + \"小时前\": (s.getFullYear() == t.getFullYear() ? \"\": t.getFullYear() + \"年\") + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日\"\n            },\n            compileStyle: function(e) {\n                var t = \"\",\n                s = {};\n                if (s.textbox = \"#ds-thread #ds-reset .ds-replybox .ds-textarea-wrapper\", !e) return t;\n                for (var a in e) t += s[a] + \"{\" + e[a] + \"}\\n\";\n                return t\n            },\n            init: function(e, t) {\n                e && !O[e] && (O[e] = t || {\n                    type: \"EmbedThread\"\n                }),\n                S.initView && S.initView()\n            }\n        },\n        j = t.all,\n        P = S.support = function() {\n            var s = t.createElement(\"div\");\n            s.innerHTML = '<a href=\"/a\" style=\"opacity:.55;\">a</a><input type=\"checkbox\"/>';\n            var a = s.getElementsByTagName(\"a\")[0],\n            i = s.getElementsByTagName(\"input\")[0],\n            r = {\n                placeholder: \"placeholder\" in i,\n                touch: \"ontouchstart\" in e || \"onmsgesturechange\" in e,\n                opacity: /^0.55$/.test(a.style.opacity),\n                hrefNormalized: \"/a\" === a.getAttribute(\"href\"),\n                iOS: v.match(/ \\((iPad|iPhone|iPod);( U;)? CPU( iPhone)? OS /),\n                android: v.match(/ \\(Linux; U; Android /)\n            };\n            return r.ie6 = !f && \"undefined\" == typeof s.style.maxHeight,\n            r.authInWin = e.postMessage && e.screen.width > 800 && !r.iOS && !r.android && h.origin,\n            r\n        } (),\n        O = S.selectors = {\n            \".ds-thread\": {\n                type: \"EmbedThread\"\n            },\n            \".ds-recent-comments\": {\n                type: \"RecentComments\"\n            },\n            \".ds-recent-visitors\": {\n                type: \"RecentVisitors\"\n            },\n            \".ds-top-users\": {\n                type: \"TopUsers\"\n            },\n            \".ds-top-threads\": {\n                type: \"TopThreads\"\n            },\n            \".ds-login\": {\n                type: \"LoginWidget\"\n            },\n            \".ds-thread-count\": {\n                type: \"ThreadCount\"\n            },\n            \".ds-share\": {\n                type: \"ShareWidget\"\n            }\n        },\n        E = S.openDialog = function(e) {\n            return S.dialog !== s && S.dialog.el.remove(),\n            S.dialog = new st.Dialog(et.dialog(e)).open()\n        },\n        L = S.smilies = {};\n        S.require = function() {\n            function t(e) {\n                var t = R[e] ? \"?\" + R[e] + \".js\": \"\";\n                return S.STATIC_URL + \"/libs/\" + e + \".js\" + t\n            }\n            var s = {\n                mzadxN: \"undefined\" != typeof mzadxN\n            };\n            return \"undefined\" != typeof jQuery && jQuery.fn.jquery >= \"1.5\" && (s[\"embed.compat\"] = !0, S.jQuery = e.jQuery),\n            function(e, a) {\n                if (\"string\" == typeof e) s[e] ? a() : o.injectScript(t(e),\n                function() {\n                    s[e] = !0,\n                    a()\n                });\n                else if (\"object\" == typeof e) {\n                    var i, r = !0;\n                    for (i = 0; i < e.length; i++)(function(n) {\n                        s[e[i]] || (r = !1, o.injectScript(t(n),\n                        function() {\n                            s[n] = !0;\n                            for (var t = 0; t < e.length; t++) if (!s[e[t]]) return;\n                            a()\n                        }))\n                    })(e[i]);\n                    r && a()\n                }\n            }\n        } ();\n        for (var N = 0,\n        I = [\"EmbedThread\", \"RecentComments\", \"RecentVisitors\", \"TopUsers\", \"TopThreads\", \"LoginWidget\", \"ThreadCount\"]; N < I.length; N++) S[I[N]] = function(e) {\n            return function(t, s) {\n                s = s || {},\n                s.type = e,\n                t && !O[t] && (O[t] = s),\n                S.initSelector && S.initSelector(t, s)\n            }\n        } (I[N]),\n        S[\"create\" + I[N]] = function(e) {\n            return function(s, a) {\n                var i = t.createElement(s);\n                for (var r in a) i.setAttribute(\"data-\" + r, a[r]);\n                return S[e](i),\n                i\n            }\n        } (I[N]);\n        S.RecentCommentsWidget = S.RecentComments;\n        var A = S.API = {\n            ajax: function(e, t, i, r, n) {\n                function d(e) {\n                    var t = e.getResponseHeader(\"Date\");\n                    t && (b = new Date - new Date(t))\n                }\n                function l(e, t, s) {\n                    var a, i, o, l = t;\n                    if (e >= 200 && 300 > e || 304 === e) if (304 === e) l = \"notmodified\",\n                    o = !0;\n                    else try {\n                        a = p.parse(s),\n                        l = \"success\",\n                        o = !0\n                    } catch(c) {\n                        l = \"parsererror\",\n                        i = c\n                    } else {\n                        i = l,\n                        (!l || e) && (l = \"error\", 0 > e && (e = 0));\n                        try {\n                            a = p.parse(s)\n                        } catch(c) {\n                            l = \"parsererror\",\n                            i = c\n                        }\n                    }\n                    o ? r && r(a) : \"parseerror\" === l ? C.error(\"解析错误: \" + s) : (C.error(\"出错啦(\" + a.code + \"): \" + a.errorMessage), n && n(a), a.errorTrace && C.error(a.errorTrace)),\n                    d(m)\n                }\n                var u = o.getCookie(\"duoshuo_token\");\n                i = i || {},\n                i.v = S.version,\n                u ? i.jwt = u: c.remote_auth && (i.remote_auth = c.remote_auth);\n                var h = f && p && p.parse;\n                if (h) {\n                    var m = new f,\n                    v = !!m && \"withCredentials\" in m;\n                    if (v) {\n                        var g;\n                        return m.open(e, a() + \"/api/\" + t + \".json\" + (\"GET\" == e ? \"?\" + o.param(i) : \"\"), !0),\n                        m.withCredentials = !0,\n                        m.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\"),\n                        m.send(\"GET\" == e ? null: o.param(i)),\n                        g = function(e, t) {\n                            var a, i, r, n;\n                            try {\n                                if (g && (t || 4 === m.readyState)) if (g = s, t) 4 !== m.readyState && m.abort();\n                                else {\n                                    a = m.status,\n                                    r = m.getAllResponseHeaders();\n                                    try {\n                                        n = m.responseText\n                                    } catch(e) {}\n                                    try {\n                                        i = m.statusText\n                                    } catch(o) {\n                                        i = \"\"\n                                    }\n                                }\n                            } catch(d) {\n                                t || l( - 1, d)\n                            }\n                            n && l(a, i, n, r)\n                        },\n                        void(4 === m.readyState ? g() : m.onreadystatechange = g)\n                    }\n                }\n                \"GET\" != e && (i._method = \"POST\");\n                var y = \"cb_\" + Math.round(1e6 * Math.random());\n                A[y] = function(e) {\n                    switch (e.code) {\n                    case 0:\n                        r && r(e);\n                        break;\n                    default:\n                        n && n(e),\n                        C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                        e.errorTrace && C.error(e.errorTrace)\n                    }\n                },\n                i.callback = \"DUOSHUO.API['\" + y + \"']\",\n                o.injectScript(a() + \"/api/\" + t + \".jsonp?\" + o.param(i))\n            },\n            get: function(e, t, s, a) {\n                return this.ajax(\"GET\", e, t, s, a)\n            },\n            post: function(e, t, s, a) {\n                return this.ajax(\"POST\", e, t, s, a)\n            }\n        },\n        M = S.ws = {\n            messages: [],\n            send: function(s) {\n                if (! (\"WebSocket\" in e && p)) return ! 1;\n                var a = this;\n                if (a.messages.push(p.stringify(s)), !a.webSocket) {\n                    var r = \"https:\" === t.location.protocol ? \"wss://ws.duoshuo.com:8202/\": \"ws://ws.duoshuo.com:8201/\",\n                    n = a.webSocket = new WebSocket(r);\n                    n.onopen = function() {\n                        var e, t = 1 === n.readyState;\n                        if (t) for (; e = a.messages.shift();) n.send(e)\n                    },\n                    n.onmessage = function(e) {\n                        try {\n                            var t = p.parse(e.data)\n                        } catch(s) {\n                            return\n                        }\n                        switch (t.type) {\n                        case \"post\":\n                            for (var a, r = 0; r < S.pagelets.length; r++) a = S.pagelets[r],\n                            a.threadId == t.thread_id && a.onMessage(t);\n                            break;\n                        case \"notification\":\n                            y.push(t),\n                            i()\n                        }\n                    },\n                    e.addEventListener(\"beforeunload\",\n                    function() {\n                        n.close()\n                    })\n                }\n                a.webSocket.onopen()\n            }\n        };\n        S.DOMAIN = \"duoshuo.com\",\n        S.STATIC_URL = g + \"//static.duoshuo.com\",\n        S.REMOTE = g + \"//duoshuo.com\",\n        S.version = \"15.11.15\";\n        var U = {\n            \"default\": \"79dc948b\",\n            dark: \"ddc346d8\",\n            bluebox: \"0f0f035c\",\n            newhua: \"dc453ca2\"\n        },\n        R = {\n            \"embed.compat\": \"24f8ca3f\",\n            smilies: \"921e8eda\"\n        },\n        z = {\n            post: \"发布\",\n            posting: \"正在发布\",\n            settings: \"设置\",\n            reply: \"回复\",\n            like: \"顶\",\n            repost: \"转发\",\n            report: \"举报\",\n            \"delete\": \"删除\",\n            reply_to: \"回复 \",\n            reposts: \"转发\",\n            comments: \"评论\",\n            floor: \"楼\",\n            latest: \"最新\",\n            earliest: \"最早\",\n            hottest: \"最热\",\n            share_to: \"分享到:\",\n            leave_a_message: \"说点什么吧…\",\n            no_comments_yet: \"还没有评论，沙发等你来抢\",\n            repost_reason: \"请输入转发理由\",\n            hot_posts_title: \"被顶起来的评论\",\n            comments_zero: \"暂无评论\",\n            comments_one: \"1条评论\",\n            comments_multiple: \"{num}条评论\",\n            reposts_zero: \"暂无转发\",\n            reposts_one: \"1条转发\",\n            reposts_multiple: \"{num}条转发\",\n            weibo_reposts_zero: \"暂无新浪微博\",\n            weibo_reposts_one: \"1条新浪微博\",\n            weibo_reposts_multiple: \"{num}条新浪微博\",\n            qqt_reposts_zero: \"暂无腾讯微博\",\n            qqt_reposts_one: \"1条腾讯微博\",\n            qqt_reposts_multiple: \"{num}条腾讯微博\"\n        },\n        D = {\n            get: function(e) {\n                return m ? m[e] : void 0\n            },\n            save: function(e, t) {\n                if (m) try {\n                    m.removeItem(e),\n                    m[e] = p.stringify(t),\n                    m.removeItem(e + \":timestamp\"),\n                    m[e + \":timestamp\"] = Math.floor((new Date - b) / 1e3)\n                } catch(s) {}\n            }\n        },\n        W = S.loadRequire = function(t) {\n            if (t.visitor && (!nt.data && t.visitor.user_id && e.Notification && M.send({\n                logged_user_id: t.visitor.user_id\n            }), nt.reset(t.visitor)), t.site && (rt.reset(t.site), D.save(\"ds_site_\" + c.short_name, t.site)), !S.theme && rt.data.theme && n(rt.data.theme), t.lang && (o.extend(z, t.lang), D.save(\"ds_lang_\" + c.short_name, t.lang)), t.stylesheets) for (var s = 0; s < t.stylesheets.length; s++) o.injectStylesheet(t.stylesheets[s]);\n            if (t.nonce && (S.nonce = t.nonce), t.style && o.injectStyle((t.style || \"\") + S.compileStyle(c.component_style)), t.unread && ot.reset(t.unread), t.warnings) for (var s = 0; s < t.warnings.length; s++) C.warn(t.warnings[s])\n        },\n        H = 0,\n        B = S.Class = function() {};\n        B.extend = function(e) {\n            function t() { ! H && this.init && this.init.apply(this, arguments)\n            }\n            H = 1;\n            var s = new this;\n            H = 0;\n            for (var a in e) s[a] = e[a];\n            return t.prototype = s,\n            t.prototype.constructor = t,\n            t.extend = arguments.callee,\n            t\n        };\n        var J = S.Event = B.extend({\n            on: function(e, t) {\n                var a = this.handlers || (this.handlers = {});\n                return a[e] === s && (a[e] = []),\n                a[e].push(t),\n                this\n            },\n            trigger: function(e, t) {\n                var s = (this.handlers || (this.handlers = {}))[e];\n                if (s) for (var a = 0; a < s.length && s[a].call(this, t) !== !1; a++);\n                return this\n            }\n        }),\n        Q = S.Widget = J.extend({\n            init: function(e, t) {\n                this.el = e,\n                this.options = t || {},\n                this.render()\n            },\n            render: function() {},\n            reset: function() {},\n            load: function(e) {\n                switch (e.code) {\n                case 0:\n                    W(e);\n                    var t = this.prepare(e);\n                    t.options = o.extend(this.options, e.options),\n                    this.onload(t);\n                    break;\n                default:\n                    this.onError(e)\n                }\n            },\n            onload: function(e) {\n                this.el.html(et[this.tmpl](e))\n            },\n            prepare: function(e) {\n                return e\n            },\n            onMessage: function() {},\n            onError: function(e) {\n                C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                e.errorTrace && C.error(e.errorTrace)\n            }\n        }),\n        V = S.Model = J.extend({\n            init: function(e) {\n                this.data = e\n            },\n            reset: function(e) {\n                this.data = e,\n                this.trigger(\"reset\")\n            },\n            remove: function(e) {\n                this.data.splice(e, 1),\n                this.trigger(\"reset\")\n            },\n            set: function(e, t) {\n                if (t === s) for (var a in e) this.data[a] = e[a];\n                else this.data[e] = t;\n                return this.trigger(\"reset\"),\n                this\n            },\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        $ = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        F = V.extend({\n            toJSON: function() {\n                var e = o.extend({},\n                this.data);\n                return e.theAuthor = ct[this.data.author_id] && ct[this.data.author_id].data || this.data.author,\n                e.parents = this.data.parents || [],\n                e\n            }\n        }),\n        G = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        Y = function(e) {\n            this.model = e\n        };\n        Y.prototype.set = function(e) {\n            for (var t in e) e[t] && (this[t] ? this[t].set(e[t]) : this[t] = new this.model(e[t]))\n        },\n        Y.prototype.get = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) s[t] = this[e[t]];\n            return s\n        },\n        Y.prototype.getJSON = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) this[e[t]] && s.push(this[e[t]].toJSON());\n            return s\n        };\n        var Z = {\n            userUrl: function(e) {\n                return e.url\n            },\n            avatarUrl: function(e) {\n                return e.avatar_url || rt.data.default_avatar_url\n            },\n            loginUrl: function(e, t) {\n                return t || (t = {}),\n                c.sso && c.sso.login && (t.sso = 1, t.redirect_uri = c.sso.login),\n                a() + \"/login/\" + e + \"/\" + x(t)\n            },\n            bindUrl: function(e) {\n                return a() + \"/bind/\" + e + \"/\" + x(c.sso && c.sso.login ? {\n                    sso: 1,\n                    redirect_uri: c.sso.login\n                }: null, T())\n            },\n            logoutUrl: function() {\n                return a() + \"/logout/\" + x(c.sso && c.sso.logout ? {\n                    sso: 1,\n                    redirect_uri: c.sso.logout\n                }: null)\n            }\n        },\n        X = [\"weixin\", \"weibo\", \"qq\", \"renren\"],\n        K = [\"douban\", \"kaixin\", \"baidu\", \"google\"],\n        et = S.templates = {\n            userAnchor: function(e) {\n                return e.url ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(e.url) + '\">' + _(e.name) + \"</a>\": _(e.name)\n            },\n            avatarImg: function(e, t) {\n                return '<img src=\"' + _(Z.avatarUrl(e, t)) + '\" alt=\"' + _(e.name) + '\"' + (t ? ' style=\"width:' + t + \"px;height:\" + t + 'px\"': \"\") + \"/>\"\n            },\n            avatar: function(e, t) {\n                var s = et.avatarImg(e, t),\n                i = Z.userUrl(e);\n                return i ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(i) + '\" ' + (e.user_id ? \" onclick=\\\"this.href='\" + a() + \"/user-url/?user_id=\" + e.user_id + \"';\\\"\": \"\") + ' title=\"' + _(e.name) + '\">' + s + \"</a>\": s\n            },\n            timeText: function(e) {\n                return e ? '<span class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</span>\": \"\"\n            },\n            timeAnchor: function(e, t) {\n                return e ? '<a href=\"' + t + '\" target=\"_blank\" rel=\"nofollow\" class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</a>\": \"\"\n            },\n            serviceIcon: function(e, t) {\n                return '<a href=\"javascript:void(0)\" class=\"ds-service-icon' + (t ? \"-grey\": \"\") + \" ds-\" + e + '\" data-service=\"' + e + '\" title=\"' + S.sourceName[e] + '\"></a>'\n            },\n            poweredBy: function(e) {\n                return '<p class=\"ds-powered-by\"><a href=\"http://duoshuo.com\" target=\"_blank\" rel=\"nofollow\">' + _(e) + \"</a></p>\"\n            },\n            indicator: w('<div id=\"ds-indicator\"></div>'),\n            waitingImg: w('<div id=\"ds-waiting\"></div>'),\n            loginItem: function(e, t) {\n                var s = Z[t ? \"bindUrl\": \"loginUrl\"](e);\n                return '<li>    <a href=\"' + s + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + e + '\">' + S.serviceNames[e] + (nt.data.social_uid[e] ? ' <span class=\"ds-icon ds-icon-ok\"></span>': \"\") + \"</a></li>\"\n            }\n        },\n        tt = function(e) {\n            var t = [];\n            for (var s in e) t.push('<input type=\"hidden\" name=\"' + s + '\" value=\"' + _(e[s]) + '\" />');\n            return t.join(\"\\n\")\n        };\n        et.commentList = function(e) {\n            var t = \"\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li class=\"ds-comment',\n            e.options.show_avatars && (t += \" ds-show-avatars\"),\n            t += '\" data-post-id=\"' + a.post_id + '\">',\n            e.options.show_avatars && (t += '<div class=\"ds-avatar\">' + et.avatar(a.theAuthor, e.options.avatar_size) + \"</div>\"),\n            t += '<div class=\"ds-meta\">' + et.userAnchor(a.theAuthor),\n            e.options.show_time && (t += et.timeText(a.created_at)),\n            t += \"</div>\",\n            t += e.options.show_title ? '<div class=\"ds-thread-title\">在 <a href=\"' + u(a.thread.url) + '#comments\">' + u(a.thread.title) + '</a> 中评论</div><div class=\"ds-excerpt\">' + a.message + \"</div>\": '<a class=\"ds-excerpt\" title=\"' + a.thread.title + ' 中的评论\" href=\"' + u(a.thread.url) + '#comments\">' + a.message + \"</a>\",\n            t += \"</li>\";\n            return t\n        },\n        et.ctxPost = function(e) {\n            var t = \"\";\n            return e.post && (t += '<li class=\"ds-ctx-entry\"', e.hidden && (t += ' style=\"display:none\"'), t += ' data-post-id=\"' + e.post.post_id + '\"><div class=\"ds-avatar\">' + et.avatar(e.post.theAuthor || e.post.author) + '</div><div class=\"ds-ctx-body\"><div class=\"ds-ctx-head\">' + et.userAnchor(e.post.theAuthor || e.post.author) + et.timeAnchor(e.post.created_at, e.post.url), e.index >= 0 && (t += '<div class=\"ds-ctx-nth\" title=\"' + S.fullTime(e.post.created_at) + '\">' + (e.index + 1) + z.floor + \"</div>\"), t += '</div><div class=\"ds-ctx-content\">' + e.post.message, e.index >= 0 && (t += '　　　　　　　<div class=\"ds-comment-actions', e.post.vote > 0 && (t += \" ds-post-liked\"), t += '\">' + et.likePost(e.post) + '<a class=\"ds-post-repost\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '</a><a class=\"ds-post-reply\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-reply\"></span>' + z.reply + \"</a></div>\"), t += \"</div></div></li>\"),\n            t\n        },\n        et[\"dialog-anonymous\"] = function(e) {\n            var t = '<h2>社交帐号登录</h2><div class=\"ds-icons-32\">',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\",\n            e.options.deny_anonymous || (t += '<h2>作为游客留言</h2><form><div class=\"ds-control-group\"><input type=\"text\" name=\"author_name\" id=\"ds-dialog-name\" value=\"' + u(nt.data.name) + '\" required /><label for=\"ds-dialog-name\">名字(必填)</label></div>', e.options.require_guest_email && (t += '<div class=\"ds-control-group\"><input type=\"email\" name=\"author_email\" id=\"ds-dialog-email\" value=\"' + u(nt.data.email) + '\" required /><label for=\"ds-dialog-email\">邮箱(必填)</label></div>'), e.options.require_guest_url && (t += '<div class=\"ds-control-group\"><input type=\"url\" name=\"author_url\" id=\"ds-dialog-url\" placeholder=\"http://\" value=\"' + u(nt.data.url) + '\" /><label for=\"ds-dialog-url\">网址(可选)</label></div>'), t += '<button type=\"submit\">发布</button></form>'),\n            t\n        },\n        et[\"dialog-ask-for-auth\"] = function() {\n            var e = '<h2>社交帐号登录</h2><ul class=\"ds-service-list\">' + et.serviceList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul>\";\n            return e\n        },\n        et[\"dialog-bind-more\"] = function() {\n            var e = '<h2>绑定更多帐号</h2><ul class=\"ds-service-list\">' + et.serviceBindList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceBindList(K) + '</ul><div style=\"clear:both\"></div>';\n            return e\n        },\n        et[\"dialog-qrcode\"] = function(e) {\n            var t = '<h2>微信扫一扫，分享到朋友圈</h2><div class=\"ds-share-qrcode\" style=\"text-align:center;\"><img src=\"' + e.qrcode_url + '\" alt=\"' + e.url + '\"></div>';\n            return t\n        },\n        et[\"dialog-reposts\"] = function(e) {\n            var t = '<h2>转发到微博</h2><div class=\"ds-quote\"><strong>@' + u(e.post.theAuthor.name) + \"</strong>: \" + e.post.message + \"</div><form>\" + tt({\n                post_id: e.post.post_id\n            }) + '<div class=\"ds-textarea-wrapper\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.repost_reason) + '\">' + u(e.repostMessage) + '</textarea><pre class=\"ds-hidden-text\"></pre>';\n            return t += '</div><div class=\"ds-actions\">',\n            e.service ? t += tt({\n                \"service[]\": e.service\n            }) : (t += '<label><input type=\"checkbox\" name=\"service[]\" value=\"weibo\"', nt.data.social_uid.weibo && (t += ' checked=\"checked\"'), t += ' /><span class=\"ds-service-icon ds-weibo\"></span>新浪微博</label><label><input type=\"checkbox\" name=\"service[]\" value=\"qqt\"', nt.data.social_uid.qq && (t += ' checked=\"checked\"'), t += ' /><span class=\"ds-service-icon ds-qqt\"></span>腾讯微博</label>'),\n            t += '<button type=\"submit\">' + z.repost + \"</button></div></form>\"\n        },\n        et.dialog = function(e) {\n            var t = '<div class=\"ds-dialog\"><div class=\"ds-dialog-inner ds-rounded\"><div class=\"ds-dialog-body\">' + e + '</div><div class=\"ds-dialog-footer\"><a href=\"http://duoshuo.com/\" target=\"_blank\" class=\"ds-logo\"></a><span>社会化评论框</span></div><a class=\"ds-dialog-close\" href=\"javascript:void(0)\" title=\"关闭\"></a></div></div>';\n            return t\n        },\n        et.hotPosts = function(e) {\n            var t = '<div class=\"ds-header ds-gradient-bg\">' + u(z.hot_posts_title) + \"</div><ul>\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += et.post({\n                post: a,\n                options: e.options\n            });\n            return t += \"</ul>\"\n        },\n        et.likePost = function(e) {\n            var t = '<a class=\"ds-post-likes\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-like\"></span>' + z.like;\n            return e.likes > 0 && (t += \"(\" + e.likes + \")\"),\n            t += \"</a>\"\n        },\n        et.likeTooltip = function(e) {\n            var t = '<div class=\"ds-like-tooltip ds-rounded\"><p>很高兴你能喜欢，分享一下吧：</p><ul>';\n            for (var s in e.services) t += '<li><a class=\"ds-share-to-' + s + \" ds-service-link ds-\" + s + '\" href=\"' + a() + \"/share-proxy/?\" + o.param({\n                service: s,\n                thread_id: e.thread_id\n            }) + '\">' + e.services[s] + \"</a></li>\";\n            return t += '</ul><p class=\"ds-like-tooltip-footer\"><a class=\"ds-like-tooltip-close\">算了</a></p></div>'\n        },\n        et.loginButtons = function() {\n            var e = '<div class=\"ds-login-buttons\"><p>社交帐号登录:</p><div class=\"ds-social-links\"><ul class=\"ds-service-list\">' + et.serviceList(X) + '<li><a class=\"ds-more-services\" href=\"javascript:void(0)\">更多»</a></li></ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul></div></div>\";\n            return e\n        },\n        et.loginWidget = function(e) {\n            var t = '<div class=\"ds-icons-32\">',\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\"\n        },\n        et.meta = function(e) {\n            var t = '<div class=\"ds-meta\"><a href=\"javascript:void(0)\" class=\"ds-like-thread-button ds-rounded';\n            return e.user_vote > 0 && (t += \" ds-thread-liked\"),\n            t += '\"><span class=\"ds-icon ds-icon-heart\"></span> <span class=\"ds-thread-like-text\">',\n            t += e.user_vote > 0 ? \"已喜欢\": \"喜欢\",\n            t += '</span><span class=\"ds-thread-cancel-like\">取消喜欢</span></a><span class=\"ds-like-panel\"></span></div>'\n        },\n        et.notify = function(e) {\n            var t = '<div id=\"ds-reset\"><a class=\"ds-logo\" href=\"http://duoshuo.com/\" target=\"_blank\" title=\"多说\"></a><ul class=\"ds-notify-unread\"><li';\n            return e.comments || (t += ' style=\"display:none;\"'),\n            t += '><a data-type=\"unread-comments\" href=\"javascript:void(0);\">你有' + e.comments + \"条新回复</a></li><li\",\n            e.notifications || (t += ' style=\"display:none;\"'),\n            t += '><a data-type=\"unread-notifications\" href=\"javascript:void(0);\">你有' + e.notifications + \"条系统消息</a></li></ul></div>\"\n        },\n        et.post = function(e) {\n            var t = \"\",\n            s = e.post,\n            i = e.options,\n            r = s.author;\n            if (t += '<li class=\"ds-post\" data-post-id=\"' + s.post_id + '\"><div class=\"ds-post-self\" data-post-id=\"' + s.post_id + '\" data-thread-id=\"' + s.thread_id + '\" data-root-id=\"' + s.root_id + '\" data-source=\"' + s.source + '\"><div class=\"ds-avatar\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += \">\" + et.avatar(r), S.sourceName[s.source] && (t += et.serviceIcon(s.source)), t += '</div><div class=\"ds-comment-body\"><div class=\"ds-comment-header\">', r.url ? (t += '<a class=\"ds-user-name ds-highlight\" data-qqt-account=\"' + (r.qqt_account || \"\") + '\" href=\"' + u(r.url) + '\" ', r.user_id && (t += \" onclick=\\\"this.href='\" + a() + \"/user-url/?user_id=\" + r.user_id + \"';\\\"\"), t += ' rel=\"nofollow\" target=\"_blank\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += \">\" + u(r.name) + \"</a>\") : (t += '<span class=\"ds-user-name\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += ' data-qqt-account=\"' + (r.qqt_account || \"\") + '\">' + u(r.name) + \"</span>\"), t += sskadmin(s.author) + \"<span class=\\\"ua\\\">\" + ua(s.agent) + \"</span><span class=\\\"ua\\\">\" + os(s.agent) + \"</span>\", t += \"</div>\", 1 == i.max_depth && i.show_context && s.parents.length) {\n                t += '<ol id=\"ds-ctx\">';\n                var n = lt.getJSON(s.parents);\n                if (n) for (var o, d = -1,\n                l = n.length - 1; l > d;) o = n[d += 1],\n                1 == d && s.parents.length > 2 && (t += '<li class=\"ds-ctx-entry\"><a href=\"javascript:void(0);\" class=\"ds-expand\">还有' + (s.parents.length - 2) + \"条评论</a></li>\"),\n                t += et.ctxPost({\n                    post: o,\n                    index: d,\n                    hidden: d && d < s.parents.length - 1\n                });\n                t += \"</ol>\"\n            }\n            if (t += \"<p>\", s.parents.length >= i.max_depth && (!i.show_context || i.max_depth > 1) && s.parent_id && lt[s.parent_id] && (t += '<a class=\"ds-comment-context\" data-post-id=\"' + s.post_id + '\" data-parent-id=\"' + s.parent_id + '\">' + z.reply_to + u(lt[s.parent_id].toJSON().author.name) + \": </a>\"), t += s.message + '</p><div class=\"ds-comment-footer ds-comment-actions', s.vote > 0 && (t += \" ds-post-liked\"), t += '\">', t += s.url ? et.timeAnchor(s.created_at, s.url) : et.timeText(s.created_at), \"duoshuo\" == s.source ? (t += '<a class=\"ds-post-reply\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-reply\"></span>' + z.reply + \"</a>\" + et.likePost(s) + '<a class=\"ds-post-repost\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '</a><a class=\"ds-post-report\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-report\"></span>' + z.report + \"</a>\", s.privileges[\"delete\"] && (t += '<a class=\"ds-post-delete\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-delete\"></span>' + z[\"delete\"] + \"</a>\")) : (\"qqt\" == s.source || \"weibo\" == s.source) && (t += '<a class=\"ds-weibo-comments\" href=\"javascript:void(0);\">' + z.comments, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.comments + \"</span>)\"), t += '</a><a class=\"ds-weibo-reposts\" href=\"javascript:void(0);\">' + z.reposts, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.reposts + \"</span>)\"), t += \"</a>\"), t += \"</div></div></div>\", i.max_depth > 1 && (s.childrenArray || s.children) && \"weibo\" != s.source && \"qqt\" != s.source) {\n                t += '<ul class=\"ds-children\">';\n                var c = lt.getJSON(s.childrenArray || s.children);\n                if (c) for (var s, d = -1,\n                p = c.length - 1; p > d;) s = c[d += 1],\n                t += et.post({\n                    post: s,\n                    options: i\n                });\n                t += \"</ul>\"\n            }\n            return t += \"</li>\"\n        },\n        et.postListHead = function(e) {\n            var t = '<div class=\"ds-comments-info\"><div class=\"ds-sort\"><a class=\"ds-order-desc\">' + z.latest + '</a><a class=\"ds-order-asc\">' + z.earliest + '</a><a class=\"ds-order-hot\">' + z.hottest + '</a></div><ul class=\"ds-comments-tabs\"><li class=\"ds-tab\"><a class=\"ds-comments-tab-duoshuo ds-current\" href=\"javascript:void(0);\"></a></li>';\n            return e.options.show_reposts && e.thread.reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-repost\" href=\"javascript:void(0);\"></a></li>'),\n            t += \" \",\n            e.options.show_weibo && e.thread.weibo_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-weibo\" href=\"javascript:void(0);\"></a></li>'),\n            t += \" \",\n            e.options.show_qqt && e.thread.qqt_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-qqt\" href=\"javascript:void(0);\"></a></li>'),\n            t += \"</ul></div>\"\n        },\n        et.recentVisitors = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"</div>\";\n            return t\n        },\n        et.replybox = function(e) {\n            var t = '<div class=\"ds-replybox\"><a class=\"ds-avatar\"';\n            if (t += r() ? ' href=\"javascript:void(0);\" onclick=\"return false\"': ' href=\"' + S.REMOTE + \"/settings/avatar/\" + x(T()) + '\" target=\"_blank\" title=\"设置头像\"', t += \">\" + et.avatarImg(nt.data) + '</a><form method=\"post\">' + tt(e.params) + '<div class=\"ds-textarea-wrapper ds-rounded-top\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.leave_a_message) + '\"></textarea><pre class=\"ds-hidden-text\"></pre>', t += \"</div>\", t += '<div class=\"ds-post-toolbar\"><div class=\"ds-post-options ds-gradient-bg\"><span class=\"ds-sync\">', !r() && nt.data.repostOptions) {\n                t += '<input id=\"ds-sync-checkbox',\n                e.inline && (t += \"-inline\"),\n                t += '\" type=\"checkbox\" name=\"repost\" ',\n                e.checked && (t += 'checked=\"checked\" '),\n                t += 'value=\"' + e.repostArray.join(\",\") + '\"> <label for=\"ds-sync-checkbox',\n                e.inline && (t += \"-inline\"),\n                t += '\">' + z.share_to + \"</label>\";\n                for (var s in nt.data.repostOptions) t += et.serviceIcon(s, !nt.data.repostOptions[s])\n            }\n            return t += \"</span>\",\n            t += \"</div>\",\n            t += '<button class=\"ds-post-button\" type=\"submit\">' + u(z.post) + '</button><div class=\"ds-toolbar-buttons\">',\n            e.options.use_smilies && (t += '<a class=\"ds-toolbar-button ds-add-emote\" title=\"插入表情\"></a>'),\n            e.options.use_images && e.options.parse_html_enabled && (t += '<a class=\"ds-toolbar-button ds-add-image\" title=\"插入图片\"></a>'),\n            t += \"</div></div>\",\n            t += \"</form></div>\"\n        },\n        et.serviceBindList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.bindUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a],\n            nt.data.social_uid[a] && (t += ' <span class=\"ds-icon ds-icon-ok\"></span>'),\n            t += \"</a></li>\";\n            return t\n        },\n        et.serviceList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.loginUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a] + \"</a></li>\";\n            return t\n        },\n        et.shareWidget = function(e) {\n            var t = '<div class=\"ds-share-icons\"> <div class=\"ds-share-icons-inner\"> <ul class=\"ds-share-icons-16\"> ',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += ' <li> <a class=\"ds-' + a + '\" href=\"javascript:void(0);\" data-service=\"' + a + '\">' + S.sourceName[a] + \"</a> </li> \";\n            return t += ' </ul> </div> <div class=\"ds-share-icons-footer\">' + e.copyright + \"</div></div>\"\n        },\n        et.smiliesTooltip = function(e) {\n            var t = '<div id=\"ds-smilies-tooltip\"><ul class=\"ds-smilies-tabs\">';\n            for (var s in e) t += \"<li><a>\" + s + \"</a></li>\";\n            return t += '</ul><div class=\"ds-smilies-container\"></div></div>'\n        },\n        et.toolbar = function() {\n            var e = '<div class=\"ds-toolbar\"><div class=\"ds-account-control\"><span class=\"ds-icon ds-icon-settings\"></span> <span>帐号管理</span><ul><li><a class=\"ds-bind-more\" href=\"javascript:void(0);\" style=\"border-top: none\">绑定更多</a></li><li><a target=\"_blank\" href=\"' + S.REMOTE + \"/settings/\" + x(T()) + '\">' + u(z.settings) + '</a></li><li><a rel=\"nofollow\" href=\"' + Z.logoutUrl() + '\" style=\"border-bottom: none\">登出</a></li></ul></div><div class=\"ds-visitor\">';\n            return e += nt.data.url ? '<a class=\"ds-visitor-name\" href=\"' + u(nt.data.url) + '\" target=\"_blank\">' + u(nt.data.name) + \"</a>\": '<span class=\"ds-visitor-name\">' + u(nt.data.name) + \"</span>\",\n            e += '<a class=\"ds-unread-comments-count\" href=\"javascript:void(0);\" title=\"新回复\"></a></div></div>'\n        },\n        et.topThreads = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a target=\"_blank\" href=\"' + u(a.url) + '\" title=\"' + u(a.title) + '\">' + u(a.title) + \"</a></li>\";\n            return t\n        },\n        et.topUsers = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"<h4>\" + u(a.name) + \"</h4></div>\";\n            return t\n        },\n        et.userInfo = function(e) {\n            var t = '<a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \"/user-url/?user_id=\" + e.user_id + '\\';\" class=\"ds-avatar\" target=\"_blank\">' + et.avatarImg(e) + '</a><a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \"/user-url/?user_id=\" + e.user_id + '\\';\" class=\"ds-user-name ds-highlight\" target=\"_blank\">' + u(e.name) + \"</a>\";\n            for (var s in e.social_uid) t += '<a href=\"' + S.REMOTE + \"/user-proxy/\" + s + \"/\" + e.social_uid[s] + '/\" target=\"_blank\" class=\"ds-service-icon ds-' + s + '\" title=\"' + S.sourceName[s] + '\"></a>';\n            return t += '<p class=\"ds-user-card-meta\"><a href=\"' + S.REMOTE + \"/profile/\" + e.user_id + '/\" target=\"_blank\"><span class=\"ds-highlight\">' + e.comments + \"</span>条评论</a></p>\",\n            e.description && (t += '<p class=\"ds-user-description\">' + u(e.description) + \"</p>\"),\n            t\n        };\n        var st = S.Views = {},\n        at = (S.Callbacks = {},\n        S.pagelets = []),\n        it = S.events = new J,\n        rt = S.site = new V,\n        nt = S.visitor = new $,\n        ot = S.unread = new V,\n        dt = S.threadPool = new Y(G),\n        lt = S.postPool = new Y(F),\n        ct = S.userPool = new Y($);\n        it.on(\"queryDefined\",\n        function() {\n            var e = c.short_name;\n            if (c.theme && n(c.theme), m) {\n                var t = m[\"ds_site_\" + e],\n                s = m[\"ds_lang_\" + e];\n                t && rt.reset(p.parse(t)),\n                s && o.extend(z, p.parse(s))\n            }\n        }),\n        q(),\n        S.require(\"embed.compat\",\n        function() {\n            function i(e) {\n                e.stopPropagation()\n            }\n            function n(e) { (e.ctrlKey && 13 == e.which || 10 == e.which) && B(this.form).trigger(\"submit\")\n            }\n            function d() {\n                var e = B(this);\n                e.height(Math.max(54, e.next(\".ds-hidden-text\").text(this.value).height() + 27))\n            }\n            function l() {\n                if (P.authInWin) {\n                    var e = this.href.match(/\\/(login|bind)\\/(\\w+)\\//i);\n                    if (e && S.serviceNames[e[2]]) return ! b(e[2], this.href)\n                }\n            }\n            function u() {\n                var e, s, a, i, r, n = this,\n                o = 0,\n                d = 0;\n                t.selection && (s = t.selection.createRange(), s && s.parentElement() == n && (i = n.value.length, e = n.value.replace(/\\r\\n/g, \"\\n\"), a = n.createTextRange(), a.moveToBookmark(s.getBookmark()), r = n.createTextRange(), r.collapse(!1), a.compareEndPoints(\"StartToEnd\", r) > -1 ? o = d = i: (o = -a.moveStart(\"character\", -i), o += e.slice(0, o).split(\"\\n\").length - 1, a.compareEndPoints(\"EndToEnd\", r) > -1 ? d = i: (d = -a.moveEnd(\"character\", -i), d += e.slice(0, d).split(\"\\n\").length - 1)))),\n                B(n).data(\"ds-range-start\", o).data(\"ds-range-end\", d)\n            }\n            function p(e) {\n                return P.touch && e.addClass(\"ds-touch\"),\n                o.cssProperty(\"transition\") || e.addClass(\"ds-no-transition\"),\n                P.ie6 && e.addClass(\"ds-ie6\"),\n                P.opacity || e.addClass(\"ds-no-opacity\"),\n                e\n            }\n            function f(e) {\n                if (!P.placeholder) {\n                    var t = e.attr(\"placeholder\");\n                    e.val(t).focus(function() {\n                        this.value === t && (this.value = \"\")\n                    }).blur(function() {\n                        \"\" === this.value && (this.value = t)\n                    })\n                }\n                return e\n            }\n            function g(e) {\n                if (\"http://duoshuo.com\" === e.origin) switch (e.data.type) {\n                case \"login\":\n                    h.href = e.data.redirectUrl\n                }\n            }\n            function b(t, s) {\n                var a = {\n                    weibo: [760, 600],\n                    renren: [420, 322],\n                    qq: [504, 445],\n                    weixin: [450, 550],\n                    google: [600, 440]\n                } [t] || [550, 400];\n                return e.open(s + ( - 1 == s.indexOf(\"?\") ? \"?\": \"&\") + o.param({\n                    origin: h.origin || \"http://\" + h.host\n                }), \"_blank\", \"width=\" + a[0] + \",height=\" + a[1] + \",toolbar=no,menubar=no,location=yes\")\n            }\n            function y(e) {\n                var t = Z[r() ? \"loginUrl\": \"bindUrl\"](e);\n                P.authInWin && b(e, t) || (h.href = t)\n            }\n            function w() {\n                var e = E(et[\"dialog-ask-for-auth\"]({})).el.find(\".ds-dialog\").css(\"width\", \"300px\");\n                e.find(\"a.ds-service-link\").click(l)\n            }\n            function x(e, t, s, a) {\n                function i() {\n                    function e(e) {\n                        if (s && a) {\n                            var t = s.options,\n                            i = U(s.postList.el, e.response[a], t);\n                            \"asc\" == t.order == (\"top\" == t.formPosition) && S.scrollTo(i);\n                            var r = s.el.find(\".ds-comments-tab-\" + a + \" span.ds-highlight\");\n                            r.html(parseInt(r.html()) + 1)\n                        }\n                    }\n                    return a || l.find(\"[type=checkbox]:checked\")[0] ? (A.post(\"posts/repost\", S.toJSON(l), e), o.close(), !1) : (alert(\"还没有选发布到哪儿呢\"), !1)\n                }\n                function r() {\n                    var e = this.value;\n                    return this.checked && !nt.data.social_uid[\"qqt\" == e ? \"qq\": e] ? void y(e) : void 0\n                }\n                var o = E(et[\"dialog-reposts\"]({\n                    post: e.toJSON(),\n                    repostMessage: t,\n                    service: a\n                })),\n                l = o.el.find(\"form\");\n                return l.submit(i),\n                l.find(\".ds-actions [type=checkbox]\").change(r),\n                f(l.find(\"textarea\")).keyup(n).keyup(d).focus(),\n                !1\n            }\n            function T(e) {\n                var t = {\n                    \"unread-comments\": {\n                        title: \"新留言及回复\",\n                        apiUrl: \"users/unreadComments\",\n                        tmpl: function(e) {\n                            return e.thread ? '<li data-thread-id=\"' + e.thread.thread_id + '\">' + B.map(e.authors, et.userAnchor).join(\"、\") + ' 在 <a class=\"ds-read\" href=\"' + e.thread.url + '#comments\" target=\"_blank\">' + _(e.thread.title || \"无标题\") + '</a> 中回复了你 <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\">知道了</a></li>': \"\"\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-thread-id\");\n                            A.post(\"threads/read\", {\n                                thread_id: t\n                            }),\n                            ot.data.comments--\n                        }\n                    },\n                    \"unread-notifications\": {\n                        title: \"系统消息\",\n                        apiUrl: \"users/unreadNotifications\",\n                        tmpl: function(e) {\n                            return '<li data-notification-id=\"' + e.notification_id + '\" data-notification-type=\"' + e.type + '\">' + e.content + ' <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\">知道了</a></li>'\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-notification-id\");\n                            A.post(\"notifications/read\", {\n                                notification_id: t\n                            }),\n                            ot.data.notifications--\n                        }\n                    }\n                } [e],\n                s = E(\"<h2>\" + t.title + '</h2><ul class=\"ds-unread-list\"></ul>');\n                s.on(\"close\", S.resetNotify);\n                var a = s.el.find(\".ds-unread-list\").delegate(\".ds-delete\", \"click\",\n                function() {\n                    return B(this).parent().remove(),\n                    0 === a.children().length && s.close(),\n                    !1\n                }).delegate(\".ds-read\", \"click\",\n                function() {\n                    t.read(B(this).parent())\n                });\n                B(\"#ds-notify\").hide(),\n                A.get(t.apiUrl, {},\n                function(e) {\n                    s.el.find(\".ds-unread-list\").html(B.map(e.response, t.tmpl).join(\"\\n\"))\n                })\n            }\n            function N() {\n                bubbleOutTimer && (clearTimeout(bubbleOutTimer), bubbleOutTimer = 0)\n            }\n            function I() {\n                bubbleOutTimer = setTimeout(function() {\n                    bubbleOutTimer = 0,\n                    X.detach()\n                },\n                400)\n            }\n            function U(e, t, s) {\n                return e.find(\".ds-post[data-post-id=\" + t.data.post_id + \"]\")[0] ? void 0 : (e.find(\".ds-post-placeholder\").remove(), B(et.post({\n                    post: t.toJSON(),\n                    options: s\n                })).hide()[\"asc\" == s.order ? \"appendTo\": \"prependTo\"](e).slideDown(function() {}))\n            }\n            function R(e, t) {\n                function s() {\n                    if (r()) return w(),\n                    !1;\n                    var e = B(this).parent(),\n                    t = e.hasClass(\"ds-post-liked\"),\n                    s = B(this).html().match(/\\((\\d+)\\)/),\n                    a = (s ? parseInt(s[1]) : 0) + (t ? -1 : 1);\n                    return A.post(\"posts/vote\", {\n                        post_id: e.closest(\".ds-ctx-entry, .ds-post-self\").attr(\"data-post-id\"),\n                        vote: t ? 0 : 1\n                    }),\n                    B(this).html(B(this).html().replace(/\\(\\d+\\)/, \"\") + (a ? \"(\" + a + \")\": \"\")),\n                    e[t ? \"removeClass\": \"addClass\"](\"ds-post-liked\"),\n                    !1\n                }\n                function a() {\n                    var e = B(this).closest(\".ds-post-self\"),\n                    t = lt[e.attr(\"data-post-id\")];\n                    return x(t, \"\"),\n                    !1\n                }\n                function i() {\n                    if (!confirm(\"确定要删除这条评论吗？\")) return ! 1;\n                    var t = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/remove\", {\n                        post_id: t.attr(\"data-post-id\")\n                    }),\n                    t.parent().fadeOut(200,\n                    function() {\n                        e.data.comments--,\n                        e.updateCounter(\"duoshuo\"),\n                        B(this).remove()\n                    }),\n                    !1\n                }\n                function n() {\n                    if (!confirm(\"确定要举报这条评论吗？\")) return ! 1;\n                    var e = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/report\", {\n                        post_id: e.attr(\"data-post-id\")\n                    }),\n                    alert(\"感谢您的反馈！\"),\n                    !1\n                }\n                function o() {\n                    var s = B(this),\n                    a = s.closest(\".ds-comment-actions\");\n                    if (a.hasClass(\"ds-reply-active\")) h.el.fadeOut(200,\n                    function() {\n                        B(this).detach()\n                    }),\n                    a.removeClass(\"ds-reply-active\");\n                    else {\n                        var i = s.closest(\".ds-ctx-entry, .ds-post-self\");\n                        h ? h.actionsBar.removeClass(\"ds-reply-active\") : (h = new st.Replybox(e), h.render(!0).el.addClass(\"ds-inline-replybox\").detach()),\n                        h.el.find(\"[name=parent_id]\").val(i.attr(\"data-post-id\")),\n                        h.el.show().appendTo(s.closest(\".ds-ctx-body, .ds-comment-body\")).find(\"textarea\").focus(),\n                        h.actionsBar = a.addClass(\"ds-reply-active\"),\n                        t.max_depth <= 1 ? h.postList = e.postList.el: (h.postList = i.siblings(\".ds-children\"), h.postList[0] || (h.postList = B('<ul class=\"ds-children\"></ul>').insertAfter(i)))\n                    }\n                    return ! 1\n                }\n                function d() {\n                    function e(e) {\n                        W(e),\n                        i.append(B.map(e.response,\n                        function(e) {\n                            return et.post({\n                                post: e,\n                                options: t\n                            })\n                        }).join(\"\"))\n                    } {\n                        var s = B(this).closest(\".ds-post-self\"),\n                        a = s.attr(\"data-post-id\");\n                        s.data(\"source\")\n                    }\n                    if (0 != s.attr(\"data-root-id\")) return ! 1;\n                    var i = s.siblings(\".ds-children\");\n                    return i[0] ? (i.remove(), !1) : (i = B('<ul class=\"ds-children\"></ul>').insertAfter(s), A.get(\"posts/listComments\", H({\n                        post_id: a\n                    }), e), !1)\n                }\n                function l() {\n                    var t = B(this).closest(\".ds-post-self\"),\n                    s = lt[t.attr(\"data-post-id\")],\n                    a = s.data.source;\n                    if (!nt.data.social_uid[\"qqt\" == a ? \"qq\": a]) return void y(a);\n                    var i = s.data.root_id,\n                    r = \"0\" != i ? lt[i] : s,\n                    n = \"\";\n                    if (\"0\" != i) {\n                        var o = prepatePost(s.data).theAuthor;\n                        n = (\"weibo\" == a ? \"//@\" + o.name: \"|| @\" + o.qqt_account) + \":\" + s.data.message\n                    }\n                    return x(r, n, e, a),\n                    !1\n                }\n                function c() {\n                    var e = B(this).parent();\n                    return e.siblings().show(),\n                    e.remove(),\n                    !1\n                }\n                function u() {\n                    function t() {\n                        function t(e) {\n                            var t = e.response;\n                            ct[c] ? ct[c].set(t) : ct[c] = new $(t),\n                            X.owner == s && K.html(et.userInfo(t))\n                        }\n                        tt = 0,\n                        X.owner = s,\n                        N();\n                        var i = a.offset(),\n                        r = e.el.offset(),\n                        n = a.innerWidth() / 2,\n                        o = e.el.innerHeight() - (i.top - r.top) + 6,\n                        d = i.left - r.left - 35 + (n > 35 ? 35 : n);\n                        try {\n                            if (a.hasClass(\"ds-comment-context\")) K.attr(\"id\", \"ds-ctx-bubble\").attr(\"data-post-id\", a.attr(\"data-post-id\")).html('<ul id=\"ds-ctx\">' + et.ctxPost({\n                                post: lt[a.attr(\"data-parent-id\")].toJSON()\n                            }) + '</ul><div class=\"ds-bubble-footer\"><a class=\"ds-ctx-open\" href=\"javascript:void(0);\">查看对话</a></div>');\n                            else if (a.hasClass(\"ds-avatar\") || a.hasClass(\"ds-user-name\")) {\n                                var l = {},\n                                c = l.user_id = a.attr(\"data-user-id\");\n                                if (!c) throw \"no info\";\n                                K.attr(\"id\", \"ds-user-card\").attr(\"data-user-id\", c).empty(),\n                                ct[c] ? K.html(et.userInfo(ct[c].data)) : A.get(\"users/profile\", H(l), t)\n                            }\n                            X.css({\n                                bottom: o,\n                                left: d\n                            }).appendTo(e.innerEl)\n                        } catch(u) {\n                            X.detach()\n                        }\n                    }\n                    var s = this;\n                    if (bubbleOutTimer && X.owner == s) return clearTimeout(bubbleOutTimer),\n                    void(bubbleOutTimer = 0);\n                    var a = B(s);\n                    tt = setTimeout(t, 200)\n                }\n                function p() {\n                    tt ? (clearTimeout(tt), tt = 0) : bubbleOutTimer || I()\n                }\n                var h;\n                this.delegate(\"a.ds-post-likes\", \"click\", s).delegate(\"a.ds-post-repost\", \"click\", a).delegate(\"a.ds-post-delete\", \"click\", i).delegate(\"a.ds-post-report\", \"click\", n).delegate(\"a.ds-post-reply\", \"click\", o).delegate(\"a.ds-weibo-comments\", \"click\", d).delegate(\"a.ds-weibo-reposts\", \"click\", l).delegate(\"a.ds-expand\", \"click\", c),\n                P.touch || this.delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseenter\", u).delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseleave\", p)\n            }\n            function H(e) {\n                var s = {\n                    require: \"site,visitor,nonce,lang\" + (it++?\"\": \",unread,log,extraCss\"),\n                    site_ims: D.get(\"ds_site_\" + c.short_name + \":timestamp\"),\n                    lang_ims: D.get(\"ds_lang_\" + c.short_name + \":timestamp\"),\n                    referer: t.referrer\n                };\n                c.stylePatch && (s.style_patch = c.stylePatch);\n                for (var a in s) s[a] && (!P.ie6 || encodeURIComponent(s[a]).length < 200) && (e[a] = s[a]);\n                return e\n            }\n            var B = S.jQuery,\n            V = B(e),\n            Y = B(t);\n            e.postMessage && (e.addEventListener ? e.addEventListener(\"message\", g, !1) : e.attachEvent && e.attachEvent(\"onmessage\", g)),\n            S.scrollTo = function(e) {\n                var t = e.offset().top; (t < V.scrollTop() || t > V.scrollTop() + V.height()) && B(\"html, body\").animate({\n                    scrollTop: t - 40\n                },\n                200, \"swing\")\n            },\n            S.toJSON = function(e) {\n                var t = /\\r?\\n/g,\n                s = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,\n                a = /^(?:select|textarea)/i,\n                i = e.map(function() {\n                    return this.elements ? B.makeArray(this.elements) : this\n                }).filter(function() {\n                    return this.name && !this.disabled && (this.checked || a.test(this.nodeName) || s.test(this.type))\n                }).map(function(e, s) {\n                    var a = B(this).val();\n                    return null == a ? null: B.isArray(a) ? B.map(a,\n                    function(e) {\n                        return {\n                            name: s.name,\n                            value: e.replace(t, \"\\r\\n\")\n                        }\n                    }) : {\n                        name: s.name,\n                        value: a.replace(t, \"\\r\\n\")\n                    }\n                }).toArray(),\n                r = {};\n                return B.each(i,\n                function() {\n                    r[this.name] = this.value\n                }),\n                r\n            },\n            S.resetNotify = function() {\n                var e = B(\"#ds-notify\"),\n                s = ot.data;\n                e[0] || (e = B('<div id=\"ds-notify\"></div>').css({\n                    hidden: {\n                        display: \"none\"\n                    },\n                    \"top-right\": {\n                        top: \"24px\",\n                        right: \"24px\"\n                    },\n                    \"bottom-right\": {\n                        bottom: \"24px\",\n                        right: \"24px\"\n                    }\n                } [rt.data.notify_position]).delegate(\".ds-notify-unread a\", \"click\",\n                function() {\n                    return T(B(this).data(\"type\")),\n                    !1\n                }).appendTo(t.body)),\n                e.html(et.notify(s))[!s.comments && !s.notifications || \"hidden\" === rt.data.notify_position || B(\".ds-dialog\")[0] ? \"hide\": \"show\"]()\n            },\n            ot.on(\"reset\", S.resetNotify),\n            st.Replybox = function(e) {\n                this.embedThread = e\n            },\n            st.Replybox.prototype = {\n                render: function(e) {\n                    function s(e) {\n                        e.data(\"submitting\", !0),\n                        e.find(\".ds-post-button\").addClass(\"ds-waiting\").html(z.posting)[0].disabled = !0\n                    }\n                    function a(e) {\n                        e.data(\"submitting\", !1),\n                        e.find(\".ds-post-button\").removeClass(\"ds-waiting\").html(z.post)[0].disabled = !1\n                    }\n                    var i = this,\n                    o = i.embedThread,\n                    c = o.options,\n                    p = function() {\n                        S.require(\"smilies\",\n                        function() {})\n                    },\n                    h = {\n                        thread: o,\n                        options: c,\n                        inline: e,\n                        params: {\n                            thread_id: o.threadId,\n                            parent_id: \"\",\n                            nonce: S.nonce\n                        },\n                        repostArray: [],\n                        checked: 0\n                    };\n                    for (var v in nt.data.repostOptions) nt.data.repostOptions[v] && (h.repostArray.push(v), h.checked = 1);\n                    var g = i.el = B(et.replybox(h)).click(p),\n                    b = g.find(\"form\"),\n                    y = b.find(\"input[type=checkbox]\")[0],\n                    _ = b.find(\"a.ds-service-icon, a.ds-service-icon-grey\"),\n                    k = f(b.find(\"textarea\")).focus(p).keyup(n).keyup(d).bind(\"focus mousedown mouseup keyup\", u),\n                    w = g.find(\".ds-add-emote\").click(function(e) {\n                        var s = S.smiliesTooltip;\n                        return w.toggleClass(\"ds-expanded\").hasClass(\"ds-expanded\") ? (s || (s = S.smiliesTooltip = new st.SmiliesTooltip, s.render(), S.require(\"smilies\",\n                        function() {\n                            s.reset(\"微博-默认\")\n                        })), s.replybox = i, s.el.appendTo(t.body).css({\n                            top: i.el.offset().top + i.el.outerHeight() + 4 + \"px\",\n                            left: i.el.find(\".ds-textarea-wrapper\").offset().left + \"px\"\n                        }), B(t.body).click(x)) : x(e),\n                        !1\n                    }),\n                    x = (g.find(\".ds-add-image\").click(function(e) {\n                        var s = k[0],\n                        a = s.value,\n                        i = \"请输入图片地址\",\n                        r = '<img src=\"' + i + '\" />';\n                        if (t.selection) {\n                            s.value = a.substring(0, k.data(\"ds-range-start\")) + r + a.substring(k.data(\"ds-range-end\"), a.length),\n                            s.value = s.value.replace(\"说点什么吧 ...\", \"\"),\n                            s.focus();\n                            var n = t.selection.createRange();\n                            n.collapse(),\n                            n.findText(i),\n                            n.select()\n                        } else {\n                            s.value = a.substring(0, s.selectionStart) + r + a.substring(s.selectionEnd);\n                            var o = s.value.search(i);\n                            s.setSelectionRange(o, o + i.length),\n                            s.focus()\n                        }\n                        e.preventDefault()\n                    }), i.hideSmilies = function() {\n                        w.removeClass(\"ds-expanded\"),\n                        S.smiliesTooltip.el.detach(),\n                        B(t.body).unbind(\"click\", x)\n                    }),\n                    T = function(e, t) {\n                        var s = E(et[\"dialog-anonymous\"]({\n                            services: [\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"],\n                            options: c\n                        })),\n                        a = s.el.find(\".ds-dialog\").css(\"width\", \"320px\");\n                        if (a.find(\".ds-icons-32 a\").click(l), !c.deny_anonymous) {\n                            var i = s.el.find(\"form\");\n                            i.submit(function() {\n                                var e = i.find(\"input[name=author_email]\").val();\n                                return ! e && !c.require_guest_email || e.match(/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) ? (t(S.toJSON(i)), s.close(), !1) : (alert(\"请输入一个有效的email地址.\"), !1)\n                            }),\n                            i.find(\"input[name=author_name]\")[0].focus()\n                        }\n                    };\n                    c.deny_anonymous && k.focus(function() {\n                        if (r()) {\n                            T(b, q);\n                            var e = function(t) {\n                                t.stopPropagation(),\n                                k.unbind(\"click\", e)\n                            };\n                            k.click(e)\n                        }\n                        return ! 1\n                    });\n                    var q = function(e) {\n                        s(b),\n                        A.post(\"posts/create\", B.extend(S.toJSON(b), e),\n                        function(e) {\n                            var t = lt[e.response.post_id] = new F(e.response),\n                            s = U(i.postList, t, c);\n                            if (\"asc\" == c.order == (\"top\" == c.formPosition) && S.scrollTo(s), o.data.comments++, o.updateCounter(\"duoshuo\"), k.val(\"\").trigger(\"keyup\"), a(b), g.hasClass(\"ds-inline-replybox\") && (g.detach(), i.actionsBar.removeClass(\"ds-reply-active\")), m) try {\n                                m.removeItem(\"ds_draft_\" + o.threadId)\n                            } catch(r) {}\n                        },\n                        function(e) {\n                            a(b),\n                            alert(e.errorMessage)\n                        })\n                    };\n                    b.submit(function() {\n                        if (b.data(\"submitting\")) return ! 1;\n                        var e = B.trim(b[0].message.value);\n                        return \"\" == e || !P.placeholder && e == k.attr(\"placeholder\") ? (alert(\"您还没写内容呢\"), !1) : (r() ? T(b, q) : q(), !1)\n                    });\n                    var C = function(e) {\n                        return B(e).hasClass(\"ds-service-icon-grey\") ? null: B(e).attr(\"data-service\")\n                    };\n                    if (_.click(function() {\n                        return B(this).toggleClass(\"ds-service-icon-grey\").toggleClass(\"ds-service-icon\"),\n                        y.value = B.map(_, C).join(\",\"),\n                        y.checked = \"\" != y.value,\n                        !1\n                    }), B(y).change(function() {\n                        var e = this.checked;\n                        _[e ? \"removeClass\": \"addClass\"](\"ds-service-icon-grey\")[e ? \"addClass\": \"removeClass\"](\"ds-service-icon\"),\n                        this.value = B.map(_, C).join(\",\")\n                    }), !e && m) {\n                        var j = \"ds_draft_\" + o.threadId;\n                        k.bind(\"focus blur keyup\",\n                        function(e) {\n                            var t = B(e.currentTarget).val();\n                            try {\n                                m[j] = t\n                            } catch(e) {}\n                        }),\n                        m[j] && k.val(m[j])\n                    }\n                    return this\n                }\n            },\n            st.Dialog = J.extend({\n                init: function(e, t) { (this.el = B(\"#ds-wrapper\"))[0] || (this.el = p(B('<div id=\"ds-wrapper\"></div>'))),\n                    this.options = B.extend({\n                        width: 600\n                    },\n                    t),\n                    e !== s && B(e).attr(\"id\", \"ds-reset\").appendTo(this.el)\n                },\n                open: function() {\n                    function e(e) {\n                        return 27 == e.which ? (a.close(), !1) : void 0\n                    }\n                    function s() {\n                        return a.close(),\n                        !1\n                    }\n                    var a = this;\n                    return a.el.hide().appendTo(t.body).fadeIn(200),\n                    P.ie6 && a.el.css(\"top\", V.scrollTop() + 100),\n                    a.el.show().find(\".ds-dialog\").delegate(\"a.ds-dialog-close\", \"click\",\n                    function() {\n                        return a.close(),\n                        !1\n                    }).click(i),\n                    Y.keydown(e),\n                    B(t.body).click(s),\n                    a.close = function() {\n                        Y.unbind(\"keydown\", e),\n                        B(t.body).unbind(\"click\", s),\n                        a.el.fadeOut(200,\n                        function() {\n                            B(this).remove()\n                        }),\n                        a.trigger(\"close\")\n                    },\n                    a\n                }\n            }),\n            et.likePanel = function(e) {\n                return e.likes ? '<span class=\"ds-highlight\">' + e.likes + \"</span> 人喜欢\": \"\"\n            },\n            st.Meta = function(e) {\n                this.embedThread = e\n            },\n            st.Meta.prototype = {\n                render: function() {\n                    function a(a) {\n                        function r(e) {\n                            o.set(e),\n                            n.resetLikePanel()\n                        }\n                        function c() {\n                            n.tooltip.detach(),\n                            B(t.body).unbind(\"click\", c)\n                        }\n                        function u(t) {\n                            switch (this.className) {\n                            case \"ds-like-tooltip-close\":\n                                c(t);\n                                break;\n                            default:\n                                if (!e.open(this.href, \"_blank\", \"height=500,width=600,top=0,left=0,toolbar=no,menubar=no,resizable=yes,location=yes,status=no\")) return\n                            }\n                            return ! 1\n                        }\n                        var p = l.hasClass(\"ds-thread-liked\");\n                        if (A.post(\"threads/vote\", {\n                            thread_id: n.embedThread.threadId,\n                            vote: p ? 0 : 1\n                        },\n                        r), l.toggleClass(\"ds-thread-liked\"), l.find(\".ds-thread-like-text\").text(p ? \"喜欢\": \"已喜欢\"), p) return n.tooltip && c(a),\n                        !1;\n                        if (n.tooltip === s) {\n                            var h = et.likeTooltip({\n                                services: {\n                                    qzone: \"QQ空间\",\n                                    weibo: \"新浪微博\",\n                                    qqt: \"腾讯微博\",\n                                    renren: \"人人网\",\n                                    kaixin: \"开心网\",\n                                    douban: \"豆瓣网\",\n                                    baidu: \"百度搜藏\"\n                                },\n                                thread_id: o.data.thread_id\n                            });\n                            n.tooltip = B(h).click(i).delegate(\"a\", \"click\", u)\n                        }\n                        var f = {};\n                        return f.left = 0,\n                        f.top = d.position().top + d.outerHeight() - 4 + \"px\",\n                        n.tooltip.appendTo(n.embedThread.innerEl).css(f),\n                        B(t.body).click(c),\n                        !1\n                    }\n                    var n = this,\n                    o = n.embedThread.model,\n                    d = n.el = B(et.meta(o.toJSON())),\n                    l = d.find(\".ds-like-thread-button\");\n                    return l.click(a),\n                    n.resetLikePanel(),\n                    r() && d.hide(),\n                    n\n                },\n                resetLikePanel: function() {\n                    this.el.find(\".ds-like-panel\").html(et.likePanel(this.embedThread.model.toJSON()))\n                }\n            },\n            st.PostListHead = function(e) {\n                this.embedThread = e\n            },\n            st.PostListHead.prototype = {\n                render: function() {\n                    function e(e) {\n                        r.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.page = 1;\n                        var t = e.currentTarget;\n                        switch (t.className) {\n                        case \"ds-comments-tab-duoshuo\":\n                            a.params.source = \"duoshuo\",\n                            s.replybox.el.show();\n                            break;\n                        case \"ds-comments-tab-repost\":\n                            a.params.source = \"repost\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-weibo\":\n                            a.params.source = \"weibo\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-qqt\":\n                            a.params.source = \"qqt\",\n                            s.replybox.el.hide()\n                        }\n                        return B(t).addClass(\"ds-current\"),\n                        a.refetch(),\n                        !1\n                    }\n                    function t() {\n                        return n.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.order = s.options.order = this.className.replace(\"ds-order-\", \"\"),\n                        a.params.page = 1,\n                        a.refetch(),\n                        B(this).addClass(\"ds-current\"),\n                        !1\n                    }\n                    var s = this.embedThread,\n                    a = s.postList,\n                    i = this.el = B(et.postListHead({\n                        thread: s.model.toJSON(),\n                        options: s.options\n                    })),\n                    r = i.find(\"ul.ds-comments-tabs\");\n                    r.delegate(\".ds-tab a\", \"click\", e);\n                    var n = i.find(\".ds-sort\");\n                    return n.delegate(\"a\", \"click\", t),\n                    n.find(\".ds-order-\" + a.params.order).addClass(\"ds-current\"),\n                    this\n                }\n            },\n            st.Paginator = function(e) {\n                function t() {\n                    return i.params.page = parseInt(this.innerHTML),\n                    i.refetch(),\n                    a.find(\".ds-current\").removeClass(\"ds-current\"),\n                    B(this).addClass(\"ds-current\"),\n                    !1\n                }\n                e = e || {};\n                var s = this,\n                a = s.el = e.el || B('<div class=\"ds-paginator\"></div>'),\n                i = s.collection = e.collection;\n                a.delegate(\"a\", \"click\", t)\n            },\n            st.Paginator.prototype = {\n                reset: function(e) {\n                    function t(e) {\n                        i.push('<a data-page=\"' + e + '\" href=\"javascript:void(0);\">' + e + \"</a>\")\n                    }\n                    var s, a = this.collection.params.page || 1,\n                    i = [];\n                    if (a > 1) for (t(1), s = a > 4 ? a - 2 : 2, s > 2 && i.push('<span class=\"page-break\">...</span>'); a > s; s++) t(s);\n                    if (i.push('<a data-page=\"' + a + '\" href=\"javascript:void(0);\" class=\"ds-current\">' + a + \"</a>\"), a < e.pages) {\n                        for (s = a + 1; a + 4 >= s && s < e.pages; s++) t(s);\n                        s < e.pages && i.push('<span class=\"page-break\">...</span>'),\n                        t(e.pages)\n                    }\n                    this.el.html('<div class=\"ds-border\"></div>' + i.join(\" \"))[e.pages > 1 ? \"show\": \"hide\"]()\n                }\n            },\n            S.addSmilies = function(e, t) {\n                var s = S.smiliesTooltip;\n                s && s.el.find(\"ul.ds-smilies-tabs\").append(\"<li><a>\" + e + \"</a></li>\"),\n                S.smilies[e] = t\n            },\n            st.SmiliesTooltip = function() {},\n            st.SmiliesTooltip.prototype = {\n                render: function() {\n                    function e() {\n                        var e = s.replybox,\n                        a = e.el.find(\"textarea\"),\n                        i = a[0],\n                        r = i.value;\n                        if (t.selection) {\n                            i.value = r.substring(0, a.data(\"ds-range-start\")) + this.title + r.substring(a.data(\"ds-range-end\"), r.length),\n                            i.value = i.value.replace(z.leave_a_message, \"\"),\n                            i.focus();\n                            var n = t.selection.createRange();\n                            n.moveStart(\"character\", a.data(\"ds-range-start\") + this.title.length),\n                            n.collapse(),\n                            n.select()\n                        } else {\n                            var o = i.selectionStart + this.title.length;\n                            i.value = r.substring(0, i.selectionStart) + this.title + r.substring(i.selectionEnd),\n                            i.setSelectionRange(o, o)\n                        }\n                        e.hideSmilies(),\n                        i.focus()\n                    }\n                    var s = this,\n                    a = s.el = B(et.smiliesTooltip(L));\n                    return a.click(i).find(\"ul.ds-smilies-tabs\").delegate(\"a\", \"click\",\n                    function() {\n                        s.reset(this.innerHTML)\n                    }),\n                    a.find(\".ds-smilies-container\").delegate(\"img\", \"click\", e),\n                    this\n                },\n                reset: function(e) {\n                    function t(t, s) {\n                        var i = 0 === e.indexOf(\"微博\") ? \"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/\" + s.replace(\"_org\", \"_thumb\") : S.STATIC_URL + \"/images/smilies/\" + s;\n                        \"WordPress\" === e && (t = \" \" + t + \" \"),\n                        a += '<li><img src=\"' + i + '\" title=\"' + _(t) + '\" /></li>'\n                    }\n                    var s = this.el.find(\"ul.ds-smilies-tabs\");\n                    s.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                    s.find(\"a\").filter(function() {\n                        return this.innerHTML == e\n                    }).addClass(\"ds-current\");\n                    var a = \"<ul>\";\n                    return B.each(L[e], t),\n                    a += \"</ul>\",\n                    this.el.find(\".ds-smilies-container\").html(a),\n                    this\n                }\n            },\n            et.postPlaceholder = function() {\n                return ['<li class=\"ds-post ds-post-placeholder\">', z.no_comments_yet, \"</li>\"].join(\"\")\n            };\n            var X = B('<div id=\"ds-bubble\"><div class=\"ds-bubble-content\"></div><div class=\"ds-arrow ds-arrow-down ds-arrow-border\"></div><div class=\"ds-arrow ds-arrow-down\"></div></div>'),\n            K = X.find(\".ds-bubble-content\").delegate(\"a.ds-ctx-open\", \"click\",\n            function() {\n                function e(e) {\n                    function t(e, t) {\n                        return et.ctxPost({\n                            post: e,\n                            index: t\n                        })\n                    }\n                    C.log(B.map(e.response, t).join(\"\\n\"));\n                    s.el.find(\"ol\");\n                    s.el.find(\"ol\").html(B.map(e.response, t).join(\"\\n\"))\n                }\n                var t = {};\n                t.post_id = K.attr(\"data-post-id\"),\n                A.get(\"posts/conversation\", t, e);\n                var s = E('<h2>查看对话</h2><ol id=\"ds-ctx\"></ol>');\n                return s.el.find(\".ds-dialog\").css(\"width\", \"600px\"),\n                s.el.find(\".ds-dialog-body\").css({\n                    \"max-height\": \"350px\",\n                    _height: \"350px\",\n                    \"overflow-y\": \"auto\",\n                    \"padding-top\": \"10px\"\n                }),\n                !1\n            }),\n            tt = bubbleOutTimer = 0;\n            X.mouseenter(N).mouseleave(I),\n            st.PostList = function(e) {\n                e && (e.params && (this.params = e.params), e.embedThread && (this.embedThread = e.embedThread)),\n                this.el = B('<ul class=\"ds-comments\"></ul>')\n            },\n            st.PostList.prototype = {\n                url: \"threads/listPosts\",\n                render: function() {\n                    return R.call(this.el, this.embedThread, this.embedThread.options),\n                    this\n                },\n                reset: function(e) {\n                    var t = this.embedThread.options;\n                    this.el.html(e[0] ? B.map(lt.getJSON(e),\n                    function(e) {\n                        return et.post({\n                            post: e,\n                            options: t\n                        })\n                    }).join(\"\") : et.postPlaceholder())\n                },\n                refetch: function() {\n                    function e(e) {\n                        lt.set(e.parentPosts || e.relatedPosts),\n                        ct.set(e.users),\n                        s.reset(e.response),\n                        s.embedThread.paginator.reset(e.cursor),\n                        s.el.fadeTo(200, 1),\n                        S.scrollTo(s.el),\n                        a.remove()\n                    }\n                    var s = this,\n                    a = B(et.indicator()).appendTo(t.body).fadeIn(200);\n                    s.el.fadeTo(200, .5),\n                    A.get(s.url, s.params, e)\n                }\n            },\n            st.EmbedThread = Q.extend({\n                uri: \"threads/listPosts\",\n                params: \"thread-id local-thread-id source-thread-id thread-key category channel-key author-key author-id url limit order max-depth form-position container-url\" + (v.match(/MSIE 6\\.0/) ? \"\": \" title image thumbnail\"),\n                render: function() {\n                    var e = this.el;\n                    if (\"请将此处替换成文章在你的站点中的ID\" === e.data(\"thread-key\")) return alert(\"请设置正确的 data-thread-key 属性\"),\n                    !1;\n                    e.attr(\"id\", \"ds-thread\").append(et.waitingImg());\n                    var t = e.width(),\n                    s = e.data(\"url\") || !e.attr(\"data-thread-id\") && B(\"link[rel=canonical]\").attr(\"href\");\n                    s ? e.data(\"url\", k(s)) : e.data(\"container-url\", h.href),\n                    t && 400 >= t && e.addClass(\"ds-narrow\").data(\"max-depth\", 1)\n                },\n                updateCounter: function(e) {\n                    function t(e) {\n                        return e.substr(e.indexOf(\"}\") + 1)\n                    }\n                    var s = {\n                        duoshuo: [\"comments\", t(z.comments_multiple) || \"评论\"],\n                        repost: [\"reposts\", t(z.reposts_multiple) || \"转载\"],\n                        weibo: [\"weibo_reposts\", t(z.weibo_reposts_multiple) || \"新浪微博\"],\n                        qqt: [\"qqt_reposts\", t(z.qqt_reposts_multiple) || \"腾讯微博\"]\n                    };\n                    for (var a in s) if (!e || e == a) {\n                        var i = this.data[s[a][0]];\n                        this.el.find(\".ds-comments-tab-\" + a).html(this.el.hasClass(\"ds-narrow\") ? '<span class=\"ds-service-icon ds-' + a + '\"></span>' + i: (i ? '<span class=\"ds-highlight\">' + i + \"</span>\": \"0\") + s[a][1])\n                    }\n                },\n                onError: function(e) {\n                    this.el.html(\"评论框出错啦(\" + e.code + \"): \" + e.errorMessage)\n                },\n                onload: function(t) {\n                    var a = this,\n                    i = a.threadId = t.thread.thread_id,\n                    n = t.cursor,\n                    o = a.options = t.options,\n                    d = a.innerEl = p(B('<div id=\"ds-reset\"></div>').appendTo(a.el));\n                    a.model = new G(a.data = t.thread),\n                    lt.set(t.parentPosts || t.relatedPosts),\n                    ct.set(t.users),\n                    a.el.find(\"#ds-waiting\").remove(),\n                    o.like_thread_enabled && (a.meta = new st.Meta(a), d.append(a.meta.render().el)),\n                    o.hot_posts && t.hotPosts && t.hotPosts.length && (a.hotPosts = new st.HotPosts(B('<div class=\"ds-rounded\"></div>'), {\n                        max_depth: 1,\n                        show_context: o.show_context\n                    }), a.hotPosts.thread = a, d.append(a.hotPosts.el), a.hotPosts.onload({\n                        list: lt.getJSON(t.hotPosts)\n                    })),\n                    a.postListHead = new st.PostListHead(a),\n                    a.postList = new st.PostList({\n                        embedThread: a,\n                        params: {\n                            source: \"duoshuo\",\n                            thread_id: i,\n                            max_depth: o.max_depth,\n                            order: o.order,\n                            limit: o.limit\n                        }\n                    }),\n                    a.postList.render().reset(t.response),\n                    a.paginator = new st.Paginator({\n                        collection: a.postList\n                    }),\n                    a.paginator.reset(n);\n                    var c = a.replybox = new st.Replybox(a);\n                    c.postList = a.postList.el,\n                    r() ? a.loginButtons = B(et.loginButtons()).delegate(\"a.ds-more-services\", \"click\",\n                    function() {\n                        return a.loginButtons.find(\".ds-additional-services\").toggle(),\n                        !1\n                    }).delegate(\"a.ds-service-link\", \"click\", l) : a.toolbar = B(et.toolbar()).delegate(\".ds-account-control\", \"mouseenter\",\n                    function() {\n                        B(this).addClass(\"ds-active\")\n                    }).delegate(\".ds-account-control\", \"mouseleave\",\n                    function() {\n                        B(this).removeClass(\"ds-active\")\n                    }).delegate(\"a.ds-bind-more\", \"click\",\n                    function() {\n                        var e = E(et[\"dialog-bind-more\"]()).el.find(\".ds-dialog\").addClass(\"ds-dialog-bind-more\").css(\"width\", \"300px\");\n                        return e.find(\"a.ds-service-link\").click(l),\n                        !1\n                    }).delegate(\"a.ds-unread-comments-count\", \"click\",\n                    function() {\n                        return T(\"unread-comments\"),\n                        !1\n                    });\n                    var u = ['<a name=\"respond\"></a>', a.toolbar || a.loginButtons, c.render().el];\n                    \"top\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(a.postListHead.render().el, a.postList.el, a.paginator.el),\n                    \"bottom\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(et.poweredBy(o.poweredby_text)),\n                    a.updateCounter(),\n                    t.alerts && B.each(t.alerts,\n                    function(e, t) {\n                        B('<div class=\"ds-alert\">' + t + \"</div>\").insertBefore(a.toolbar || loginButtons)\n                    }),\n                    o.message && c.el.find(\"textarea\").val(o.message).focus(),\n                    ot.on(\"reset\",\n                    function() {\n                        var e = ot.data.comments || 0;\n                        d.find(\"a.ds-unread-comments-count\").html(e).attr(\"title\", e ? \"你有\" + e + \"条新回复\": \"你没有新回复\").css(\"display\", e ? \"inline\": \"none\")\n                    }),\n                    o.mzadx_id && (S.require(\"mzadxN\",\n                    function() {}), B('<div id=\"MZADX_' + o.mzadx_id + '\" style=\"margin:0 auto;\"></div>').appendTo(d), __mz_rpq = e.__mz_rpq || [], __mz_rpq.push({\n                        l: [o.mzadx_id],\n                        r: \"1\",\n                        _srv: \"MZADX\",\n                        _callback: function() {}\n                    })),\n                    S.thread = a,\n                    ot.data !== s && ot.trigger(\"reset\"),\n                    r() || M.send({\n                        visit_thread_id: a.threadId\n                    })\n                },\n                onMessage: function(e) {\n                    U(this.postList.el, new F(e), this.options)\n                }\n            }),\n            st.HotPosts = Q.extend({\n                tmpl: \"hotPosts\",\n                params: \"show-quote\",\n                render: function() {\n                    return this.el.attr(\"id\", \"ds-hot-posts\"),\n                    this\n                },\n                onload: function(e) {\n                    e.options = B.extend(this.options, e.options),\n                    Q.prototype.onload.call(this, e),\n                    R.call(this.el.find(\"ul\"), this.thread, this.options)\n                }\n            }),\n            st.RecentComments = Q.extend({\n                tmpl: \"commentList\",\n                uri: \"sites/listRecentPosts\",\n                params: \"show-avatars show-time show-title avatar-size show-admin excerpt-length num-items channel-key\",\n                render: function() {\n                    this.el.attr(\"id\", \"ds-recent-comments\")\n                },\n                prepare: function(e) {\n                    return {\n                        list: B.map(e.response,\n                        function(e) {\n                            return new F(e).toJSON()\n                        })\n                    }\n                }\n            }),\n            st.RecentVisitors = Q.extend({\n                tmpl: \"recentVisitors\",\n                uri: \"sites/listVisitors\",\n                params: \"show-time avatar-size num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-recent-visitors\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.TopThreads = Q.extend({\n                tmpl: \"topThreads\",\n                uri: \"sites/listTopThreads\",\n                params: \"range num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-top-threads\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.LoginWidget = Q.extend({\n                tmpl: \"loginWidget\",\n                render: function() {\n                    var e = this.el;\n                    e.attr(\"id\", \"ds-login\").html(et.loginWidget([\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"])),\n                    e.find(\"a\").click(l),\n                    e.find(\"a.ds-logout\").attr(\"href\", Z.logoutUrl())\n                }\n            }),\n            st.ThreadCount = Q.extend({\n                onload: function(e) {\n                    var t = this.el,\n                    s = t.data(\"count-type\") || \"comments\",\n                    a = e.data[s];\n                    t[t.data(\"replace\") ? \"replaceWith\": \"html\"](z[s + \"_\" + (a ? a > 1 ? \"multiple\": \"one\": \"zero\")].replace(\"{num}\", a))\n                }\n            }),\n            st.ShareWidget = Q.extend({\n                tmpl: \"shareWidget\",\n                render: function() {\n                    var e = {\n                        copyright: \"多说分享插件\",\n                        services: [\"weibo\", \"qzone\", \"sohu\", \"renren\", \"netease\", \"qqt\", \"kaixin\", \"douban\", \"qq\", \"meilishuo\", \"mogujie\", \"baidu\", \"taobao\", \"google\", \"wechat\", \"diandian\", \"huaban\", \"duitang\", \"youdao\", \"pengyou\", \"facebook\", \"twitter\", \"linkedin\", \"msn\"]\n                    };\n                    this.el.attr(\"id\", \"ds-share\"),\n                    this.el.children().attr(\"id\", \"ds-reset\"),\n                    this.el.find(\".ds-share-aside-inner\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").hide(),\n                    this.el.hasClass(\"flat\") && this.el.find(\"a\").each(function() {\n                        B(this).addClass(\"flat\")\n                    }),\n                    p(this.el),\n                    this.delegateEvents()\n                },\n                delegateEvents: function() {\n                    var s = this,\n                    i = s.el;\n                    if (i.children().hasClass(\"ds-share-inline\")) {\n                        var r = \".ds-share-icons-more\",\n                        n = i.find(r),\n                        d = \"[data-toggle=ds-share-icons-more]\";\n                        i.delegate(d, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(d, \"mouseout\",\n                        function() {\n                            n.hide()\n                        }),\n                        i.delegate(r, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(r, \"mouseout\",\n                        function() {\n                            n.hide()\n                        })\n                    } else {\n                        var l = i.children().hasClass(\"ds-share-aside-left\") ? \"slide-to-right\": \"slide-to-left\",\n                        c = i.children();\n                        if (!o.cssProperty(\"transition\")) {\n                            var u = i.children().hasClass(\"ds-share-aside-left\") ? \"left\": \"right\";\n                            i.delegate(\".ds-share-aside-toggle\", \"mouseover\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) - 195 : e[u] = 0,\n                                c.animate(e, 200)\n                            }),\n                            i.delegate(\".ds-share-aside-inner\", \"mouseleave\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) + 230 : e[u] = -229,\n                                c.animate(e, 200)\n                            })\n                        }\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseover\",\n                        function() {\n                            c.addClass(l)\n                        }),\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseleave\",\n                        function() {\n                            c.removeClass(l)\n                        })\n                    }\n                    i.delegate(\"a\", \"click\",\n                    function(t) {\n                        var s = B(this).data(\"service\");\n                        if (!i.data(\"url\")) return void alert(\"请设置data-url\");\n                        if (\"wechat\" === s) {\n                            var r = a() + \"/api/qrcode/getImage.png\",\n                            n = \"?size=240&text=\" + i.data(\"url\"),\n                            d = E(et[\"dialog-qrcode\"]({\n                                qrcode_url: r + n,\n                                url: i.data(\"url\")\n                            }));\n                            d.el.find(\".ds-dialog\").css(\"width\", \"320px\")\n                        } else {\n                            var l = a() + \"/share-proxy/?\" + o.param({\n                                service: B(this).data(\"service\"),\n                                thread_key: i.data(\"threadKey\"),\n                                title: i.data(\"title\"),\n                                images: i.data(\"images\"),\n                                content: i.data(\"content\"),\n                                url: i.data(\"url\")\n                            });\n                            e.open(l, \"_blank\")\n                        }\n                        t.preventDefault(),\n                        t.stopPropagation()\n                    })\n                }\n            });\n            var it = 0;\n            S.initSelector = function(e, t) {\n                function s(e) {\n                    W(e),\n                    o.extend(z, e.options),\n                    dt.set(e.response)\n                }\n                var a = []; ! q() || !B.isReady && j || B(e).each(function(e, s) {\n                    var i = B(s);\n                    if (!i.data(\"initialized\")) {\n                        i.data(\"initialized\", !0);\n                        var r = new st[t.type](i, t);\n                        if (at.push(r), \"ThreadCount\" === t.type) {\n                            var n = i.attr(\"data-thread-key\");\n                            i.attr(\"data-channel-key\") && (n = i.attr(\"data-channel-key\") + \":\" + n),\n                            a.push(n),\n                            dt[n] || (dt[n] = new G({})),\n                            dt[n].on(\"reset\",\n                            function() {\n                                r.onload(this)\n                            })\n                        } else if (r.uri) {\n                            var o = {};\n                            B.each(r.params.split(\" \"),\n                            function(e, t) {\n                                o[t.replace(/-/g, \"_\")] = i.attr(\"data-\" + t) || i.data(t)\n                            }),\n                            A.get(r.uri, H(o),\n                            function(e) {\n                                r.load(e)\n                            })\n                        }\n                    }\n                }),\n                a.length && A.get(\"threads/counts\", H({\n                    threads: a.join(\",\")\n                }), s)\n            },\n            (S.initView = function() {\n                B.each(O, S.initSelector)\n            })(),\n            B(function() {\n                if (!c) {\n                    if (!q()) return C.error(\"缺少 duoshuoQuery 的定义\");\n                    C.warn(\"请在加载多说 embed.js 之前定义 duoshuoQuery\")\n                }\n                setInterval(function() {\n                    B(\".ds-time\").each(function() {\n                        var e = B(this).attr(\"datetime\");\n                        e && (this.innerHTML = S.elapsedTime(e))\n                    })\n                },\n                2e4),\n                c.ondomready && c.ondomready(),\n                S.initView(),\n                !it && c.short_name && A.get(\"analytics/ping\", H({}), W)\n            })\n        })\n    }\n} (window, document);\n","source":"js/duoshuo.js","raw":"//管理员判断开始\nfunction sskadmin(e) {\n    var ssk = '';\n    if (e.user_id == 6260328050223743746) {\n        if (checkMobile()) {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span><br><br>';\n        } else {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span>';\n        }\n    } else {\n        if (checkMobile()) {\n            ssk = '<br><br>';\n        }\n    }\n    return ssk;\n}\n//管理员判断结束\n//移动客户端判断开始\nfunction checkMobile() {\n    var isiPad = navigator.userAgent.match(/iPad/i) != null;\n    if (isiPad) {\n        return false;\n    }\n    var isMobile = navigator.userAgent.match(/iphone|android|phone|mobile|wap|netfront|x11|java|opera mobi|opera mini|ucweb|windows ce|symbian|symbianos|series|webos|sony|blackberry|dopod|nokia|samsung|palmsource|xda|pieplus|meizu|midp|cldc|motorola|foma|docomo|up.browser|up.link|blazer|helio|hosin|huawei|novarra|coolpad|webos|techfaith|palmsource|alcatel|amoi|ktouch|nexian|ericsson|philips|sagem|wellcom|bunjalloo|maui|smartphone|iemobile|spice|bird|zte-|longcos|pantech|gionee|portalmmm|jig browser|hiptop|benq|haier|^lct|320x320|240x320|176x220/i) != null;\n    if (isMobile) {\n        return true;\n    }\n    return false;\n}\n//移动客户端判断结束\n//显UA开始\nfunction ua(e) {\n    var r = new Array;\n    var outputer = '';\n    if (r = e.match(/FireFox\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_firefox\"><i class=\"fa fa-firefox\"></i> FireFox'\n    } else if (r = e.match(/Maxthon([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_maxthon\"><i class=\"fa fa-globe\"></i> Maxthon'\n    } else if (r = e.match(/BIDUBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> 百度浏览器'\n    } else if (r = e.match(/UBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/UCBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/MetaSr/ig)) {\n        outputer = '<span class=\"ua_sogou\"><i class=\"fa fa-globe\"></i> 搜狗浏览器'\n    } else if (r = e.match(/2345Explorer/ig)) {\n        outputer = '<span class=\"ua_2345explorer\"><i class=\"fa fa-globe\"></i> 2345王牌浏览器'\n    } else if (r = e.match(/2345chrome/ig)) {\n        outputer = '<span class=\"ua_2345chrome\"><i class=\"fa fa-globe\"></i> 2345加速浏览器'\n    } else if (r = e.match(/LBBROWSER/ig)) {\n        outputer = '<span class=\"ua_lbbrowser\"><i class=\"fa fa-globe\"></i> 猎豹安全浏览器'\n    } else if (r = e.match(/MicroMessenger\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-weixin\"></i> 微信'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQ\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/MiuiBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_mi\"><i class=\"fa fa-globe\"></i> Miui浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/Chrome([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_chrome\"><i class=\"fa fa-chrome\"></i> Chrome'\n        /*.split('.')[0]*/\n    } else if (r = e.match(/safari\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_apple\"><i class=\"fa fa-safari\"></i> Safari'\n    } else if (r = e.match(/Opera[\\s|\\/]([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_opera\"><i class=\"fa fa-opera\"></i> Opera'\n    } else if (r = e.match(/Trident\\/7.0/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE 11'\n    } else if (r = e.match(/MSIE\\s([^\\s|;]+)/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE' + ' ' + r[0]\n        /*.replace('MSIE', '').split('.')[0]*/\n    } else {\n        outputer = '<span class=\"ua_other\"><i class=\"fa fa-globe\"></i> 其它浏览器'\n    }\n    if (checkMobile()) {\n        Mobile = '<br><br>';\n    } else {\n        Mobile = '';\n    }\n    return outputer + \"</span>\" + Mobile;\n}\nfunction os(e) {\n    var os = '';\n    if (e.match(/win/ig)) {\n        if (e.match(/nt 5.1/ig)) {\n            os = '<span class=\"os_xp\"><i class=\"fa fa-windows\"></i> Windows XP'\n        } else if (e.match(/nt 6.1/ig)) {\n            os = '<span class=\"os_7\"><i class=\"fa fa-windows\"></i> Windows 7'\n        } else if (e.match(/nt 6.2/ig)) {\n            os = '<span class=\"os_8\"><i class=\"fa fa-windows\"></i> Windows 8'\n        } else if (e.match(/nt 6.3/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 8.1'\n        } else if (e.match(/nt 10.0/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 10'\n        } else if (e.match(/nt 6.0/ig)) {\n            os = '<span class=\"os_vista\"><i class=\"fa fa-windows\"></i> Windows Vista'\n        } else if (e.match(/nt 5/ig)) {\n            os = '<span class=\"os_2000\"><i class=\"fa fa-windows\"></i> Windows 2000'\n        } else {\n            os = '<span class=\"os_windows\"><i class=\"fa fa-windows\"></i> Windows'\n        }\n    } else if (e.match(/android/ig)) {\n        os = '<span class=\"os_android\"><i class=\"fa fa-android\"></i> Android'\n    } else if (e.match(/ubuntu/ig)) {\n        os = '<span class=\"os_ubuntu\"><i class=\"fa fa-desktop\"></i> Ubuntu'\n    } else if (e.match(/linux/ig)) {\n        os = '<span class=\"os_linux\"><i class=\"fa fa-linux\"></i> Linux'\n    } else if (e.match(/mac/ig)) {\n        os = '<span class=\"os_mac\"><i class=\"fa fa-apple\"></i> Mac OS X'\n    } else if (e.match(/unix/ig)) {\n        os = '<span class=\"os_unix\"><i class=\"fa fa-desktop\"></i> Unix'\n    } else if (e.match(/symbian/ig)) {\n        os = '<span class=\"os_nokia\"><i class=\"fa fa-mobile\"></i> Nokia SymbianOS'\n    } else {\n        os = '<span class=\"os_other\"><i class=\"fa fa-desktop\"></i> 其它操作系统'\n    }\n    return os + \"</span>\";\n}\n//显UA结束\n!\nfunction(e, t, s) {\n    function a() {\n        return c.short_name ? g + \"//\" + c.short_name + \".\" + S.DOMAIN: S.REMOTE\n    }\n    function i() {\n        function t() {\n            for (var t; t = y.shift();) {\n                var a = t.url,\n                i = new s(t.title, {\n                    dir: \"auto\",\n                    icon: t.iconUrl,\n                    body: t.body\n                });\n                try {\n                    i.onclick = function() {\n                        e.focus(),\n                        h.href = a,\n                        i.close()\n                    }\n                } catch(r) {}\n                setTimeout(function() {\n                    i.close && i.close()\n                },\n                8e3)\n            }\n        }\n        var s = e.Notification;\n        \"Notification\" in e && \"denied\" !== s.permission && (\"granted\" === s.permission && t(), s.requestPermission(function(e) {\n            \"granted\" === e && t()\n        }))\n    }\n    function r() {\n        return 0 == nt.data.user_id\n    }\n    function n(e) {\n        S.theme = e,\n        \"none\" != e && o.injectStylesheet(S.STATIC_URL + \"/styles/embed\" + (e ? \".\" + e + \".css?\" + U[e] : \".\" + short_name) + \".css\")\n    }\n    var o = {},\n    d = t.getElementsByTagName(\"head\")[0] || t.getElementsByTagName(\"body\")[0];\n    if (o.extend = function(e, t) {\n        for (var s in t) e[s] = t[s];\n        return e\n    },\n    o.injectScript = function(a, i) {\n        var r = t.createElement(\"script\"),\n        n = t.head || t.getElementsByTagName(\"head\")[0] || t.documentElement;\n        r.type = \"text/javascript\",\n        r.src = a,\n        r.async = \"async\",\n        r.charset = \"utf-8\",\n        i && (r.onload = r.onreadystatechange = function(t, a) {\n            var o = a || !r.readyState || /loaded|complete/.test(r.readyState);\n            o && (r.onload = r.onreadystatechange = null, n && r.parentNode && n.removeChild(r), r = s, a || i.call(e))\n        }),\n        n.insertBefore(r, n.firstChild)\n    },\n    o.injectStylesheet = function(e) {\n        var s = t.createElement(\"link\");\n        s.type = \"text/css\",\n        s.rel = \"stylesheet\",\n        s.href = e,\n        d.appendChild(s)\n    },\n    o.injectStyle = function(e) {\n        var s = t.createElement(\"style\");\n        return s.type = \"text/css\",\n        d.appendChild(s),\n        e = e.replace(/\\}/g, \"}\\n\"),\n        s.styleSheet ? s.styleSheet.cssText = e: s.appendChild(t.createTextNode(e)),\n        s\n    },\n    o.getCookie = function(e) {\n        for (var a, i, r, n = \" \" + e + \"=\",\n        o = t.cookie.split(\";\"), d = 0; d < o.length; d++) if (a = \" \" + o[d], i = a.indexOf(n), i >= 0 && i + n.length == (r = a.indexOf(\"=\") + 1)) return decodeURIComponent(a.substring(r, a.length).replace(/\\+/g, \"\"));\n        return s\n    },\n    o.param = function(e) {\n        var t = [];\n        for (var a in e) e[a] != s && t.push(a + \"=\" + encodeURIComponent(e[a]));\n        return t.join(\"&\")\n    },\n    o.cssProperty = function(e, s) {\n        var a = (t.body || t.documentElement).style;\n        if (\"undefined\" == typeof a) return ! 1;\n        if (\"string\" == typeof a[e]) return s ? e: !0;\n        for (var i = [\"Moz\", \"Webkit\", \"ms\"], e = e.charAt(0).toUpperCase() + e.substr(1), r = 0; r < i.length; r++) if (\"string\" == typeof a[i[r] + e]) return s ? i[r] + e: !0\n    },\n    !e.DUOSHUO) {\n        for (var l in Object.prototype) return alert(\"Object.prototype 不为空，请不要给 Object.prototype 设置方法\");\n        var c, u, p = e.JSON,\n        h = e.location,\n        f = e.XMLHttpRequest,\n        m = p && p.stringify && e.localStorage,\n        v = e.navigator.userAgent,\n        g = \"https:\" == t.location.protocol ? \"https:\": \"http:\",\n        b = 0,\n        y = [],\n        _ = u = function() {\n            function e(e) {\n                return t[e] || \"&amp;\"\n            }\n            var t = {\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\",\n                '\"': \"&quot;\",\n                \"'\": \"&#x27;\",\n                \"`\": \"&#x60;\"\n            },\n            s = /&(?!\\w+;)|[<>\"'`]/g,\n            a = /[&<>\"'`]/;\n            return function(t) {\n                return null == t || t === !1 ? \"\": a.test(t) ? t.replace(s, e) : t\n            }\n        } (),\n        k = function(e) {\n            if (e.match(/^(http|https):/)) return e;\n            var s = t.createElement(\"a\");\n            return s.href = e,\n            P.hrefNormalized ? s.href: s.getAttribute(\"href\", 4)\n        },\n        w = function(e) {\n            return function() {\n                return e\n            }\n        },\n        x = function() {\n            for (var e = {},\n            t = 0; t < arguments.length; t++) arguments[t] && o.extend(e, arguments[t]);\n            var s = o.param(e);\n            return s ? \"?\" + s: \"\"\n        },\n        T = function() {\n            var e = o.getCookie(\"duoshuo_token\");\n            return e ? {\n                jwt: e\n            }: c.remote_auth ? {\n                short_name: c.short_name,\n                remote_auth: c.remote_auth\n            }: s\n        },\n        q = function() {\n            if (!c && (c = e.duoshuoQuery)) {\n                if (!c.short_name || \"your_duoshuo_short_name\" === c.short_name) return c = s,\n                void alert(\"你还没有设置多说域名(duoshuoQuery.short_name)，填入已有域名或创建新站点：http://duoshuo.com/create-site/\");\n                it.trigger(\"queryDefined\")\n            }\n            return c\n        },\n        C = function(e) {\n            return e && e.error && e.warn ? e: {\n                error: function() {},\n                log: function() {},\n                warn: function() {}\n            }\n        } (e.console),\n        S = e.DUOSHUO = {\n            sourceName: {\n                weibo: \"新浪微博\",\n                qq: \"QQ\",\n                qzone: \"QQ空间\",\n                qqt: \"腾讯微博\",\n                renren: \"人人网\",\n                douban: \"豆瓣网\",\n                kaixin: \"开心网\",\n                sohu: \"搜狐微博\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            serviceNames: {\n                weibo: \"微博\",\n                qq: \"QQ\",\n                douban: \"豆瓣\",\n                renren: \"人人\",\n                kaixin: \"开心\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            parseDate: function(e) {\n                return e.parse(\"2011-10-28T00:00:00+08:00\") &&\n                function(t) {\n                    return new e(t)\n                } || e.parse(\"2011/10/28T00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\"))\n                } || e.parse(\"2011/10/28 00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\").replace(\"T\", \" \"))\n                } ||\n                function(t) {\n                    return new e(t)\n                }\n            } (Date),\n            fullTime: function(e) {\n                var t = S.parseDate(e);\n                return t.getFullYear() + \"年\" + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日 \" + t.toLocaleTimeString()\n            },\n            elapsedTime: function(e) {\n                var t = S.parseDate(e),\n                s = new Date,\n                a = (s - b - t) / 1e3;\n                return 10 > a ? \"刚刚\": 60 > a ? Math.round(a) + \"秒前\": 3600 > a ? Math.round(a / 60) + \"分钟前\": 86400 > a ? Math.round(a / 3600) + \"小时前\": (s.getFullYear() == t.getFullYear() ? \"\": t.getFullYear() + \"年\") + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日\"\n            },\n            compileStyle: function(e) {\n                var t = \"\",\n                s = {};\n                if (s.textbox = \"#ds-thread #ds-reset .ds-replybox .ds-textarea-wrapper\", !e) return t;\n                for (var a in e) t += s[a] + \"{\" + e[a] + \"}\\n\";\n                return t\n            },\n            init: function(e, t) {\n                e && !O[e] && (O[e] = t || {\n                    type: \"EmbedThread\"\n                }),\n                S.initView && S.initView()\n            }\n        },\n        j = t.all,\n        P = S.support = function() {\n            var s = t.createElement(\"div\");\n            s.innerHTML = '<a href=\"/a\" style=\"opacity:.55;\">a</a><input type=\"checkbox\"/>';\n            var a = s.getElementsByTagName(\"a\")[0],\n            i = s.getElementsByTagName(\"input\")[0],\n            r = {\n                placeholder: \"placeholder\" in i,\n                touch: \"ontouchstart\" in e || \"onmsgesturechange\" in e,\n                opacity: /^0.55$/.test(a.style.opacity),\n                hrefNormalized: \"/a\" === a.getAttribute(\"href\"),\n                iOS: v.match(/ \\((iPad|iPhone|iPod);( U;)? CPU( iPhone)? OS /),\n                android: v.match(/ \\(Linux; U; Android /)\n            };\n            return r.ie6 = !f && \"undefined\" == typeof s.style.maxHeight,\n            r.authInWin = e.postMessage && e.screen.width > 800 && !r.iOS && !r.android && h.origin,\n            r\n        } (),\n        O = S.selectors = {\n            \".ds-thread\": {\n                type: \"EmbedThread\"\n            },\n            \".ds-recent-comments\": {\n                type: \"RecentComments\"\n            },\n            \".ds-recent-visitors\": {\n                type: \"RecentVisitors\"\n            },\n            \".ds-top-users\": {\n                type: \"TopUsers\"\n            },\n            \".ds-top-threads\": {\n                type: \"TopThreads\"\n            },\n            \".ds-login\": {\n                type: \"LoginWidget\"\n            },\n            \".ds-thread-count\": {\n                type: \"ThreadCount\"\n            },\n            \".ds-share\": {\n                type: \"ShareWidget\"\n            }\n        },\n        E = S.openDialog = function(e) {\n            return S.dialog !== s && S.dialog.el.remove(),\n            S.dialog = new st.Dialog(et.dialog(e)).open()\n        },\n        L = S.smilies = {};\n        S.require = function() {\n            function t(e) {\n                var t = R[e] ? \"?\" + R[e] + \".js\": \"\";\n                return S.STATIC_URL + \"/libs/\" + e + \".js\" + t\n            }\n            var s = {\n                mzadxN: \"undefined\" != typeof mzadxN\n            };\n            return \"undefined\" != typeof jQuery && jQuery.fn.jquery >= \"1.5\" && (s[\"embed.compat\"] = !0, S.jQuery = e.jQuery),\n            function(e, a) {\n                if (\"string\" == typeof e) s[e] ? a() : o.injectScript(t(e),\n                function() {\n                    s[e] = !0,\n                    a()\n                });\n                else if (\"object\" == typeof e) {\n                    var i, r = !0;\n                    for (i = 0; i < e.length; i++)(function(n) {\n                        s[e[i]] || (r = !1, o.injectScript(t(n),\n                        function() {\n                            s[n] = !0;\n                            for (var t = 0; t < e.length; t++) if (!s[e[t]]) return;\n                            a()\n                        }))\n                    })(e[i]);\n                    r && a()\n                }\n            }\n        } ();\n        for (var N = 0,\n        I = [\"EmbedThread\", \"RecentComments\", \"RecentVisitors\", \"TopUsers\", \"TopThreads\", \"LoginWidget\", \"ThreadCount\"]; N < I.length; N++) S[I[N]] = function(e) {\n            return function(t, s) {\n                s = s || {},\n                s.type = e,\n                t && !O[t] && (O[t] = s),\n                S.initSelector && S.initSelector(t, s)\n            }\n        } (I[N]),\n        S[\"create\" + I[N]] = function(e) {\n            return function(s, a) {\n                var i = t.createElement(s);\n                for (var r in a) i.setAttribute(\"data-\" + r, a[r]);\n                return S[e](i),\n                i\n            }\n        } (I[N]);\n        S.RecentCommentsWidget = S.RecentComments;\n        var A = S.API = {\n            ajax: function(e, t, i, r, n) {\n                function d(e) {\n                    var t = e.getResponseHeader(\"Date\");\n                    t && (b = new Date - new Date(t))\n                }\n                function l(e, t, s) {\n                    var a, i, o, l = t;\n                    if (e >= 200 && 300 > e || 304 === e) if (304 === e) l = \"notmodified\",\n                    o = !0;\n                    else try {\n                        a = p.parse(s),\n                        l = \"success\",\n                        o = !0\n                    } catch(c) {\n                        l = \"parsererror\",\n                        i = c\n                    } else {\n                        i = l,\n                        (!l || e) && (l = \"error\", 0 > e && (e = 0));\n                        try {\n                            a = p.parse(s)\n                        } catch(c) {\n                            l = \"parsererror\",\n                            i = c\n                        }\n                    }\n                    o ? r && r(a) : \"parseerror\" === l ? C.error(\"解析错误: \" + s) : (C.error(\"出错啦(\" + a.code + \"): \" + a.errorMessage), n && n(a), a.errorTrace && C.error(a.errorTrace)),\n                    d(m)\n                }\n                var u = o.getCookie(\"duoshuo_token\");\n                i = i || {},\n                i.v = S.version,\n                u ? i.jwt = u: c.remote_auth && (i.remote_auth = c.remote_auth);\n                var h = f && p && p.parse;\n                if (h) {\n                    var m = new f,\n                    v = !!m && \"withCredentials\" in m;\n                    if (v) {\n                        var g;\n                        return m.open(e, a() + \"/api/\" + t + \".json\" + (\"GET\" == e ? \"?\" + o.param(i) : \"\"), !0),\n                        m.withCredentials = !0,\n                        m.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\"),\n                        m.send(\"GET\" == e ? null: o.param(i)),\n                        g = function(e, t) {\n                            var a, i, r, n;\n                            try {\n                                if (g && (t || 4 === m.readyState)) if (g = s, t) 4 !== m.readyState && m.abort();\n                                else {\n                                    a = m.status,\n                                    r = m.getAllResponseHeaders();\n                                    try {\n                                        n = m.responseText\n                                    } catch(e) {}\n                                    try {\n                                        i = m.statusText\n                                    } catch(o) {\n                                        i = \"\"\n                                    }\n                                }\n                            } catch(d) {\n                                t || l( - 1, d)\n                            }\n                            n && l(a, i, n, r)\n                        },\n                        void(4 === m.readyState ? g() : m.onreadystatechange = g)\n                    }\n                }\n                \"GET\" != e && (i._method = \"POST\");\n                var y = \"cb_\" + Math.round(1e6 * Math.random());\n                A[y] = function(e) {\n                    switch (e.code) {\n                    case 0:\n                        r && r(e);\n                        break;\n                    default:\n                        n && n(e),\n                        C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                        e.errorTrace && C.error(e.errorTrace)\n                    }\n                },\n                i.callback = \"DUOSHUO.API['\" + y + \"']\",\n                o.injectScript(a() + \"/api/\" + t + \".jsonp?\" + o.param(i))\n            },\n            get: function(e, t, s, a) {\n                return this.ajax(\"GET\", e, t, s, a)\n            },\n            post: function(e, t, s, a) {\n                return this.ajax(\"POST\", e, t, s, a)\n            }\n        },\n        M = S.ws = {\n            messages: [],\n            send: function(s) {\n                if (! (\"WebSocket\" in e && p)) return ! 1;\n                var a = this;\n                if (a.messages.push(p.stringify(s)), !a.webSocket) {\n                    var r = \"https:\" === t.location.protocol ? \"wss://ws.duoshuo.com:8202/\": \"ws://ws.duoshuo.com:8201/\",\n                    n = a.webSocket = new WebSocket(r);\n                    n.onopen = function() {\n                        var e, t = 1 === n.readyState;\n                        if (t) for (; e = a.messages.shift();) n.send(e)\n                    },\n                    n.onmessage = function(e) {\n                        try {\n                            var t = p.parse(e.data)\n                        } catch(s) {\n                            return\n                        }\n                        switch (t.type) {\n                        case \"post\":\n                            for (var a, r = 0; r < S.pagelets.length; r++) a = S.pagelets[r],\n                            a.threadId == t.thread_id && a.onMessage(t);\n                            break;\n                        case \"notification\":\n                            y.push(t),\n                            i()\n                        }\n                    },\n                    e.addEventListener(\"beforeunload\",\n                    function() {\n                        n.close()\n                    })\n                }\n                a.webSocket.onopen()\n            }\n        };\n        S.DOMAIN = \"duoshuo.com\",\n        S.STATIC_URL = g + \"//static.duoshuo.com\",\n        S.REMOTE = g + \"//duoshuo.com\",\n        S.version = \"15.11.15\";\n        var U = {\n            \"default\": \"79dc948b\",\n            dark: \"ddc346d8\",\n            bluebox: \"0f0f035c\",\n            newhua: \"dc453ca2\"\n        },\n        R = {\n            \"embed.compat\": \"24f8ca3f\",\n            smilies: \"921e8eda\"\n        },\n        z = {\n            post: \"发布\",\n            posting: \"正在发布\",\n            settings: \"设置\",\n            reply: \"回复\",\n            like: \"顶\",\n            repost: \"转发\",\n            report: \"举报\",\n            \"delete\": \"删除\",\n            reply_to: \"回复 \",\n            reposts: \"转发\",\n            comments: \"评论\",\n            floor: \"楼\",\n            latest: \"最新\",\n            earliest: \"最早\",\n            hottest: \"最热\",\n            share_to: \"分享到:\",\n            leave_a_message: \"说点什么吧…\",\n            no_comments_yet: \"还没有评论，沙发等你来抢\",\n            repost_reason: \"请输入转发理由\",\n            hot_posts_title: \"被顶起来的评论\",\n            comments_zero: \"暂无评论\",\n            comments_one: \"1条评论\",\n            comments_multiple: \"{num}条评论\",\n            reposts_zero: \"暂无转发\",\n            reposts_one: \"1条转发\",\n            reposts_multiple: \"{num}条转发\",\n            weibo_reposts_zero: \"暂无新浪微博\",\n            weibo_reposts_one: \"1条新浪微博\",\n            weibo_reposts_multiple: \"{num}条新浪微博\",\n            qqt_reposts_zero: \"暂无腾讯微博\",\n            qqt_reposts_one: \"1条腾讯微博\",\n            qqt_reposts_multiple: \"{num}条腾讯微博\"\n        },\n        D = {\n            get: function(e) {\n                return m ? m[e] : void 0\n            },\n            save: function(e, t) {\n                if (m) try {\n                    m.removeItem(e),\n                    m[e] = p.stringify(t),\n                    m.removeItem(e + \":timestamp\"),\n                    m[e + \":timestamp\"] = Math.floor((new Date - b) / 1e3)\n                } catch(s) {}\n            }\n        },\n        W = S.loadRequire = function(t) {\n            if (t.visitor && (!nt.data && t.visitor.user_id && e.Notification && M.send({\n                logged_user_id: t.visitor.user_id\n            }), nt.reset(t.visitor)), t.site && (rt.reset(t.site), D.save(\"ds_site_\" + c.short_name, t.site)), !S.theme && rt.data.theme && n(rt.data.theme), t.lang && (o.extend(z, t.lang), D.save(\"ds_lang_\" + c.short_name, t.lang)), t.stylesheets) for (var s = 0; s < t.stylesheets.length; s++) o.injectStylesheet(t.stylesheets[s]);\n            if (t.nonce && (S.nonce = t.nonce), t.style && o.injectStyle((t.style || \"\") + S.compileStyle(c.component_style)), t.unread && ot.reset(t.unread), t.warnings) for (var s = 0; s < t.warnings.length; s++) C.warn(t.warnings[s])\n        },\n        H = 0,\n        B = S.Class = function() {};\n        B.extend = function(e) {\n            function t() { ! H && this.init && this.init.apply(this, arguments)\n            }\n            H = 1;\n            var s = new this;\n            H = 0;\n            for (var a in e) s[a] = e[a];\n            return t.prototype = s,\n            t.prototype.constructor = t,\n            t.extend = arguments.callee,\n            t\n        };\n        var J = S.Event = B.extend({\n            on: function(e, t) {\n                var a = this.handlers || (this.handlers = {});\n                return a[e] === s && (a[e] = []),\n                a[e].push(t),\n                this\n            },\n            trigger: function(e, t) {\n                var s = (this.handlers || (this.handlers = {}))[e];\n                if (s) for (var a = 0; a < s.length && s[a].call(this, t) !== !1; a++);\n                return this\n            }\n        }),\n        Q = S.Widget = J.extend({\n            init: function(e, t) {\n                this.el = e,\n                this.options = t || {},\n                this.render()\n            },\n            render: function() {},\n            reset: function() {},\n            load: function(e) {\n                switch (e.code) {\n                case 0:\n                    W(e);\n                    var t = this.prepare(e);\n                    t.options = o.extend(this.options, e.options),\n                    this.onload(t);\n                    break;\n                default:\n                    this.onError(e)\n                }\n            },\n            onload: function(e) {\n                this.el.html(et[this.tmpl](e))\n            },\n            prepare: function(e) {\n                return e\n            },\n            onMessage: function() {},\n            onError: function(e) {\n                C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                e.errorTrace && C.error(e.errorTrace)\n            }\n        }),\n        V = S.Model = J.extend({\n            init: function(e) {\n                this.data = e\n            },\n            reset: function(e) {\n                this.data = e,\n                this.trigger(\"reset\")\n            },\n            remove: function(e) {\n                this.data.splice(e, 1),\n                this.trigger(\"reset\")\n            },\n            set: function(e, t) {\n                if (t === s) for (var a in e) this.data[a] = e[a];\n                else this.data[e] = t;\n                return this.trigger(\"reset\"),\n                this\n            },\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        $ = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        F = V.extend({\n            toJSON: function() {\n                var e = o.extend({},\n                this.data);\n                return e.theAuthor = ct[this.data.author_id] && ct[this.data.author_id].data || this.data.author,\n                e.parents = this.data.parents || [],\n                e\n            }\n        }),\n        G = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        Y = function(e) {\n            this.model = e\n        };\n        Y.prototype.set = function(e) {\n            for (var t in e) e[t] && (this[t] ? this[t].set(e[t]) : this[t] = new this.model(e[t]))\n        },\n        Y.prototype.get = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) s[t] = this[e[t]];\n            return s\n        },\n        Y.prototype.getJSON = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) this[e[t]] && s.push(this[e[t]].toJSON());\n            return s\n        };\n        var Z = {\n            userUrl: function(e) {\n                return e.url\n            },\n            avatarUrl: function(e) {\n                return e.avatar_url || rt.data.default_avatar_url\n            },\n            loginUrl: function(e, t) {\n                return t || (t = {}),\n                c.sso && c.sso.login && (t.sso = 1, t.redirect_uri = c.sso.login),\n                a() + \"/login/\" + e + \"/\" + x(t)\n            },\n            bindUrl: function(e) {\n                return a() + \"/bind/\" + e + \"/\" + x(c.sso && c.sso.login ? {\n                    sso: 1,\n                    redirect_uri: c.sso.login\n                }: null, T())\n            },\n            logoutUrl: function() {\n                return a() + \"/logout/\" + x(c.sso && c.sso.logout ? {\n                    sso: 1,\n                    redirect_uri: c.sso.logout\n                }: null)\n            }\n        },\n        X = [\"weixin\", \"weibo\", \"qq\", \"renren\"],\n        K = [\"douban\", \"kaixin\", \"baidu\", \"google\"],\n        et = S.templates = {\n            userAnchor: function(e) {\n                return e.url ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(e.url) + '\">' + _(e.name) + \"</a>\": _(e.name)\n            },\n            avatarImg: function(e, t) {\n                return '<img src=\"' + _(Z.avatarUrl(e, t)) + '\" alt=\"' + _(e.name) + '\"' + (t ? ' style=\"width:' + t + \"px;height:\" + t + 'px\"': \"\") + \"/>\"\n            },\n            avatar: function(e, t) {\n                var s = et.avatarImg(e, t),\n                i = Z.userUrl(e);\n                return i ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(i) + '\" ' + (e.user_id ? \" onclick=\\\"this.href='\" + a() + \"/user-url/?user_id=\" + e.user_id + \"';\\\"\": \"\") + ' title=\"' + _(e.name) + '\">' + s + \"</a>\": s\n            },\n            timeText: function(e) {\n                return e ? '<span class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</span>\": \"\"\n            },\n            timeAnchor: function(e, t) {\n                return e ? '<a href=\"' + t + '\" target=\"_blank\" rel=\"nofollow\" class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</a>\": \"\"\n            },\n            serviceIcon: function(e, t) {\n                return '<a href=\"javascript:void(0)\" class=\"ds-service-icon' + (t ? \"-grey\": \"\") + \" ds-\" + e + '\" data-service=\"' + e + '\" title=\"' + S.sourceName[e] + '\"></a>'\n            },\n            poweredBy: function(e) {\n                return '<p class=\"ds-powered-by\"><a href=\"http://duoshuo.com\" target=\"_blank\" rel=\"nofollow\">' + _(e) + \"</a></p>\"\n            },\n            indicator: w('<div id=\"ds-indicator\"></div>'),\n            waitingImg: w('<div id=\"ds-waiting\"></div>'),\n            loginItem: function(e, t) {\n                var s = Z[t ? \"bindUrl\": \"loginUrl\"](e);\n                return '<li>    <a href=\"' + s + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + e + '\">' + S.serviceNames[e] + (nt.data.social_uid[e] ? ' <span class=\"ds-icon ds-icon-ok\"></span>': \"\") + \"</a></li>\"\n            }\n        },\n        tt = function(e) {\n            var t = [];\n            for (var s in e) t.push('<input type=\"hidden\" name=\"' + s + '\" value=\"' + _(e[s]) + '\" />');\n            return t.join(\"\\n\")\n        };\n        et.commentList = function(e) {\n            var t = \"\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li class=\"ds-comment',\n            e.options.show_avatars && (t += \" ds-show-avatars\"),\n            t += '\" data-post-id=\"' + a.post_id + '\">',\n            e.options.show_avatars && (t += '<div class=\"ds-avatar\">' + et.avatar(a.theAuthor, e.options.avatar_size) + \"</div>\"),\n            t += '<div class=\"ds-meta\">' + et.userAnchor(a.theAuthor),\n            e.options.show_time && (t += et.timeText(a.created_at)),\n            t += \"</div>\",\n            t += e.options.show_title ? '<div class=\"ds-thread-title\">在 <a href=\"' + u(a.thread.url) + '#comments\">' + u(a.thread.title) + '</a> 中评论</div><div class=\"ds-excerpt\">' + a.message + \"</div>\": '<a class=\"ds-excerpt\" title=\"' + a.thread.title + ' 中的评论\" href=\"' + u(a.thread.url) + '#comments\">' + a.message + \"</a>\",\n            t += \"</li>\";\n            return t\n        },\n        et.ctxPost = function(e) {\n            var t = \"\";\n            return e.post && (t += '<li class=\"ds-ctx-entry\"', e.hidden && (t += ' style=\"display:none\"'), t += ' data-post-id=\"' + e.post.post_id + '\"><div class=\"ds-avatar\">' + et.avatar(e.post.theAuthor || e.post.author) + '</div><div class=\"ds-ctx-body\"><div class=\"ds-ctx-head\">' + et.userAnchor(e.post.theAuthor || e.post.author) + et.timeAnchor(e.post.created_at, e.post.url), e.index >= 0 && (t += '<div class=\"ds-ctx-nth\" title=\"' + S.fullTime(e.post.created_at) + '\">' + (e.index + 1) + z.floor + \"</div>\"), t += '</div><div class=\"ds-ctx-content\">' + e.post.message, e.index >= 0 && (t += '　　　　　　　<div class=\"ds-comment-actions', e.post.vote > 0 && (t += \" ds-post-liked\"), t += '\">' + et.likePost(e.post) + '<a class=\"ds-post-repost\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '</a><a class=\"ds-post-reply\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-reply\"></span>' + z.reply + \"</a></div>\"), t += \"</div></div></li>\"),\n            t\n        },\n        et[\"dialog-anonymous\"] = function(e) {\n            var t = '<h2>社交帐号登录</h2><div class=\"ds-icons-32\">',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\",\n            e.options.deny_anonymous || (t += '<h2>作为游客留言</h2><form><div class=\"ds-control-group\"><input type=\"text\" name=\"author_name\" id=\"ds-dialog-name\" value=\"' + u(nt.data.name) + '\" required /><label for=\"ds-dialog-name\">名字(必填)</label></div>', e.options.require_guest_email && (t += '<div class=\"ds-control-group\"><input type=\"email\" name=\"author_email\" id=\"ds-dialog-email\" value=\"' + u(nt.data.email) + '\" required /><label for=\"ds-dialog-email\">邮箱(必填)</label></div>'), e.options.require_guest_url && (t += '<div class=\"ds-control-group\"><input type=\"url\" name=\"author_url\" id=\"ds-dialog-url\" placeholder=\"http://\" value=\"' + u(nt.data.url) + '\" /><label for=\"ds-dialog-url\">网址(可选)</label></div>'), t += '<button type=\"submit\">发布</button></form>'),\n            t\n        },\n        et[\"dialog-ask-for-auth\"] = function() {\n            var e = '<h2>社交帐号登录</h2><ul class=\"ds-service-list\">' + et.serviceList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul>\";\n            return e\n        },\n        et[\"dialog-bind-more\"] = function() {\n            var e = '<h2>绑定更多帐号</h2><ul class=\"ds-service-list\">' + et.serviceBindList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceBindList(K) + '</ul><div style=\"clear:both\"></div>';\n            return e\n        },\n        et[\"dialog-qrcode\"] = function(e) {\n            var t = '<h2>微信扫一扫，分享到朋友圈</h2><div class=\"ds-share-qrcode\" style=\"text-align:center;\"><img src=\"' + e.qrcode_url + '\" alt=\"' + e.url + '\"></div>';\n            return t\n        },\n        et[\"dialog-reposts\"] = function(e) {\n            var t = '<h2>转发到微博</h2><div class=\"ds-quote\"><strong>@' + u(e.post.theAuthor.name) + \"</strong>: \" + e.post.message + \"</div><form>\" + tt({\n                post_id: e.post.post_id\n            }) + '<div class=\"ds-textarea-wrapper\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.repost_reason) + '\">' + u(e.repostMessage) + '</textarea><pre class=\"ds-hidden-text\"></pre>';\n            return t += '</div><div class=\"ds-actions\">',\n            e.service ? t += tt({\n                \"service[]\": e.service\n            }) : (t += '<label><input type=\"checkbox\" name=\"service[]\" value=\"weibo\"', nt.data.social_uid.weibo && (t += ' checked=\"checked\"'), t += ' /><span class=\"ds-service-icon ds-weibo\"></span>新浪微博</label><label><input type=\"checkbox\" name=\"service[]\" value=\"qqt\"', nt.data.social_uid.qq && (t += ' checked=\"checked\"'), t += ' /><span class=\"ds-service-icon ds-qqt\"></span>腾讯微博</label>'),\n            t += '<button type=\"submit\">' + z.repost + \"</button></div></form>\"\n        },\n        et.dialog = function(e) {\n            var t = '<div class=\"ds-dialog\"><div class=\"ds-dialog-inner ds-rounded\"><div class=\"ds-dialog-body\">' + e + '</div><div class=\"ds-dialog-footer\"><a href=\"http://duoshuo.com/\" target=\"_blank\" class=\"ds-logo\"></a><span>社会化评论框</span></div><a class=\"ds-dialog-close\" href=\"javascript:void(0)\" title=\"关闭\"></a></div></div>';\n            return t\n        },\n        et.hotPosts = function(e) {\n            var t = '<div class=\"ds-header ds-gradient-bg\">' + u(z.hot_posts_title) + \"</div><ul>\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += et.post({\n                post: a,\n                options: e.options\n            });\n            return t += \"</ul>\"\n        },\n        et.likePost = function(e) {\n            var t = '<a class=\"ds-post-likes\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-like\"></span>' + z.like;\n            return e.likes > 0 && (t += \"(\" + e.likes + \")\"),\n            t += \"</a>\"\n        },\n        et.likeTooltip = function(e) {\n            var t = '<div class=\"ds-like-tooltip ds-rounded\"><p>很高兴你能喜欢，分享一下吧：</p><ul>';\n            for (var s in e.services) t += '<li><a class=\"ds-share-to-' + s + \" ds-service-link ds-\" + s + '\" href=\"' + a() + \"/share-proxy/?\" + o.param({\n                service: s,\n                thread_id: e.thread_id\n            }) + '\">' + e.services[s] + \"</a></li>\";\n            return t += '</ul><p class=\"ds-like-tooltip-footer\"><a class=\"ds-like-tooltip-close\">算了</a></p></div>'\n        },\n        et.loginButtons = function() {\n            var e = '<div class=\"ds-login-buttons\"><p>社交帐号登录:</p><div class=\"ds-social-links\"><ul class=\"ds-service-list\">' + et.serviceList(X) + '<li><a class=\"ds-more-services\" href=\"javascript:void(0)\">更多»</a></li></ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul></div></div>\";\n            return e\n        },\n        et.loginWidget = function(e) {\n            var t = '<div class=\"ds-icons-32\">',\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\"\n        },\n        et.meta = function(e) {\n            var t = '<div class=\"ds-meta\"><a href=\"javascript:void(0)\" class=\"ds-like-thread-button ds-rounded';\n            return e.user_vote > 0 && (t += \" ds-thread-liked\"),\n            t += '\"><span class=\"ds-icon ds-icon-heart\"></span> <span class=\"ds-thread-like-text\">',\n            t += e.user_vote > 0 ? \"已喜欢\": \"喜欢\",\n            t += '</span><span class=\"ds-thread-cancel-like\">取消喜欢</span></a><span class=\"ds-like-panel\"></span></div>'\n        },\n        et.notify = function(e) {\n            var t = '<div id=\"ds-reset\"><a class=\"ds-logo\" href=\"http://duoshuo.com/\" target=\"_blank\" title=\"多说\"></a><ul class=\"ds-notify-unread\"><li';\n            return e.comments || (t += ' style=\"display:none;\"'),\n            t += '><a data-type=\"unread-comments\" href=\"javascript:void(0);\">你有' + e.comments + \"条新回复</a></li><li\",\n            e.notifications || (t += ' style=\"display:none;\"'),\n            t += '><a data-type=\"unread-notifications\" href=\"javascript:void(0);\">你有' + e.notifications + \"条系统消息</a></li></ul></div>\"\n        },\n        et.post = function(e) {\n            var t = \"\",\n            s = e.post,\n            i = e.options,\n            r = s.author;\n            if (t += '<li class=\"ds-post\" data-post-id=\"' + s.post_id + '\"><div class=\"ds-post-self\" data-post-id=\"' + s.post_id + '\" data-thread-id=\"' + s.thread_id + '\" data-root-id=\"' + s.root_id + '\" data-source=\"' + s.source + '\"><div class=\"ds-avatar\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += \">\" + et.avatar(r), S.sourceName[s.source] && (t += et.serviceIcon(s.source)), t += '</div><div class=\"ds-comment-body\"><div class=\"ds-comment-header\">', r.url ? (t += '<a class=\"ds-user-name ds-highlight\" data-qqt-account=\"' + (r.qqt_account || \"\") + '\" href=\"' + u(r.url) + '\" ', r.user_id && (t += \" onclick=\\\"this.href='\" + a() + \"/user-url/?user_id=\" + r.user_id + \"';\\\"\"), t += ' rel=\"nofollow\" target=\"_blank\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += \">\" + u(r.name) + \"</a>\") : (t += '<span class=\"ds-user-name\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += ' data-qqt-account=\"' + (r.qqt_account || \"\") + '\">' + u(r.name) + \"</span>\"), t += sskadmin(s.author) + \"<span class=\\\"ua\\\">\" + ua(s.agent) + \"</span><span class=\\\"ua\\\">\" + os(s.agent) + \"</span>\", t += \"</div>\", 1 == i.max_depth && i.show_context && s.parents.length) {\n                t += '<ol id=\"ds-ctx\">';\n                var n = lt.getJSON(s.parents);\n                if (n) for (var o, d = -1,\n                l = n.length - 1; l > d;) o = n[d += 1],\n                1 == d && s.parents.length > 2 && (t += '<li class=\"ds-ctx-entry\"><a href=\"javascript:void(0);\" class=\"ds-expand\">还有' + (s.parents.length - 2) + \"条评论</a></li>\"),\n                t += et.ctxPost({\n                    post: o,\n                    index: d,\n                    hidden: d && d < s.parents.length - 1\n                });\n                t += \"</ol>\"\n            }\n            if (t += \"<p>\", s.parents.length >= i.max_depth && (!i.show_context || i.max_depth > 1) && s.parent_id && lt[s.parent_id] && (t += '<a class=\"ds-comment-context\" data-post-id=\"' + s.post_id + '\" data-parent-id=\"' + s.parent_id + '\">' + z.reply_to + u(lt[s.parent_id].toJSON().author.name) + \": </a>\"), t += s.message + '</p><div class=\"ds-comment-footer ds-comment-actions', s.vote > 0 && (t += \" ds-post-liked\"), t += '\">', t += s.url ? et.timeAnchor(s.created_at, s.url) : et.timeText(s.created_at), \"duoshuo\" == s.source ? (t += '<a class=\"ds-post-reply\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-reply\"></span>' + z.reply + \"</a>\" + et.likePost(s) + '<a class=\"ds-post-repost\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '</a><a class=\"ds-post-report\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-report\"></span>' + z.report + \"</a>\", s.privileges[\"delete\"] && (t += '<a class=\"ds-post-delete\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-delete\"></span>' + z[\"delete\"] + \"</a>\")) : (\"qqt\" == s.source || \"weibo\" == s.source) && (t += '<a class=\"ds-weibo-comments\" href=\"javascript:void(0);\">' + z.comments, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.comments + \"</span>)\"), t += '</a><a class=\"ds-weibo-reposts\" href=\"javascript:void(0);\">' + z.reposts, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.reposts + \"</span>)\"), t += \"</a>\"), t += \"</div></div></div>\", i.max_depth > 1 && (s.childrenArray || s.children) && \"weibo\" != s.source && \"qqt\" != s.source) {\n                t += '<ul class=\"ds-children\">';\n                var c = lt.getJSON(s.childrenArray || s.children);\n                if (c) for (var s, d = -1,\n                p = c.length - 1; p > d;) s = c[d += 1],\n                t += et.post({\n                    post: s,\n                    options: i\n                });\n                t += \"</ul>\"\n            }\n            return t += \"</li>\"\n        },\n        et.postListHead = function(e) {\n            var t = '<div class=\"ds-comments-info\"><div class=\"ds-sort\"><a class=\"ds-order-desc\">' + z.latest + '</a><a class=\"ds-order-asc\">' + z.earliest + '</a><a class=\"ds-order-hot\">' + z.hottest + '</a></div><ul class=\"ds-comments-tabs\"><li class=\"ds-tab\"><a class=\"ds-comments-tab-duoshuo ds-current\" href=\"javascript:void(0);\"></a></li>';\n            return e.options.show_reposts && e.thread.reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-repost\" href=\"javascript:void(0);\"></a></li>'),\n            t += \" \",\n            e.options.show_weibo && e.thread.weibo_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-weibo\" href=\"javascript:void(0);\"></a></li>'),\n            t += \" \",\n            e.options.show_qqt && e.thread.qqt_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-qqt\" href=\"javascript:void(0);\"></a></li>'),\n            t += \"</ul></div>\"\n        },\n        et.recentVisitors = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"</div>\";\n            return t\n        },\n        et.replybox = function(e) {\n            var t = '<div class=\"ds-replybox\"><a class=\"ds-avatar\"';\n            if (t += r() ? ' href=\"javascript:void(0);\" onclick=\"return false\"': ' href=\"' + S.REMOTE + \"/settings/avatar/\" + x(T()) + '\" target=\"_blank\" title=\"设置头像\"', t += \">\" + et.avatarImg(nt.data) + '</a><form method=\"post\">' + tt(e.params) + '<div class=\"ds-textarea-wrapper ds-rounded-top\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.leave_a_message) + '\"></textarea><pre class=\"ds-hidden-text\"></pre>', t += \"</div>\", t += '<div class=\"ds-post-toolbar\"><div class=\"ds-post-options ds-gradient-bg\"><span class=\"ds-sync\">', !r() && nt.data.repostOptions) {\n                t += '<input id=\"ds-sync-checkbox',\n                e.inline && (t += \"-inline\"),\n                t += '\" type=\"checkbox\" name=\"repost\" ',\n                e.checked && (t += 'checked=\"checked\" '),\n                t += 'value=\"' + e.repostArray.join(\",\") + '\"> <label for=\"ds-sync-checkbox',\n                e.inline && (t += \"-inline\"),\n                t += '\">' + z.share_to + \"</label>\";\n                for (var s in nt.data.repostOptions) t += et.serviceIcon(s, !nt.data.repostOptions[s])\n            }\n            return t += \"</span>\",\n            t += \"</div>\",\n            t += '<button class=\"ds-post-button\" type=\"submit\">' + u(z.post) + '</button><div class=\"ds-toolbar-buttons\">',\n            e.options.use_smilies && (t += '<a class=\"ds-toolbar-button ds-add-emote\" title=\"插入表情\"></a>'),\n            e.options.use_images && e.options.parse_html_enabled && (t += '<a class=\"ds-toolbar-button ds-add-image\" title=\"插入图片\"></a>'),\n            t += \"</div></div>\",\n            t += \"</form></div>\"\n        },\n        et.serviceBindList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.bindUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a],\n            nt.data.social_uid[a] && (t += ' <span class=\"ds-icon ds-icon-ok\"></span>'),\n            t += \"</a></li>\";\n            return t\n        },\n        et.serviceList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.loginUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a] + \"</a></li>\";\n            return t\n        },\n        et.shareWidget = function(e) {\n            var t = '<div class=\"ds-share-icons\"> <div class=\"ds-share-icons-inner\"> <ul class=\"ds-share-icons-16\"> ',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += ' <li> <a class=\"ds-' + a + '\" href=\"javascript:void(0);\" data-service=\"' + a + '\">' + S.sourceName[a] + \"</a> </li> \";\n            return t += ' </ul> </div> <div class=\"ds-share-icons-footer\">' + e.copyright + \"</div></div>\"\n        },\n        et.smiliesTooltip = function(e) {\n            var t = '<div id=\"ds-smilies-tooltip\"><ul class=\"ds-smilies-tabs\">';\n            for (var s in e) t += \"<li><a>\" + s + \"</a></li>\";\n            return t += '</ul><div class=\"ds-smilies-container\"></div></div>'\n        },\n        et.toolbar = function() {\n            var e = '<div class=\"ds-toolbar\"><div class=\"ds-account-control\"><span class=\"ds-icon ds-icon-settings\"></span> <span>帐号管理</span><ul><li><a class=\"ds-bind-more\" href=\"javascript:void(0);\" style=\"border-top: none\">绑定更多</a></li><li><a target=\"_blank\" href=\"' + S.REMOTE + \"/settings/\" + x(T()) + '\">' + u(z.settings) + '</a></li><li><a rel=\"nofollow\" href=\"' + Z.logoutUrl() + '\" style=\"border-bottom: none\">登出</a></li></ul></div><div class=\"ds-visitor\">';\n            return e += nt.data.url ? '<a class=\"ds-visitor-name\" href=\"' + u(nt.data.url) + '\" target=\"_blank\">' + u(nt.data.name) + \"</a>\": '<span class=\"ds-visitor-name\">' + u(nt.data.name) + \"</span>\",\n            e += '<a class=\"ds-unread-comments-count\" href=\"javascript:void(0);\" title=\"新回复\"></a></div></div>'\n        },\n        et.topThreads = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a target=\"_blank\" href=\"' + u(a.url) + '\" title=\"' + u(a.title) + '\">' + u(a.title) + \"</a></li>\";\n            return t\n        },\n        et.topUsers = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"<h4>\" + u(a.name) + \"</h4></div>\";\n            return t\n        },\n        et.userInfo = function(e) {\n            var t = '<a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \"/user-url/?user_id=\" + e.user_id + '\\';\" class=\"ds-avatar\" target=\"_blank\">' + et.avatarImg(e) + '</a><a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \"/user-url/?user_id=\" + e.user_id + '\\';\" class=\"ds-user-name ds-highlight\" target=\"_blank\">' + u(e.name) + \"</a>\";\n            for (var s in e.social_uid) t += '<a href=\"' + S.REMOTE + \"/user-proxy/\" + s + \"/\" + e.social_uid[s] + '/\" target=\"_blank\" class=\"ds-service-icon ds-' + s + '\" title=\"' + S.sourceName[s] + '\"></a>';\n            return t += '<p class=\"ds-user-card-meta\"><a href=\"' + S.REMOTE + \"/profile/\" + e.user_id + '/\" target=\"_blank\"><span class=\"ds-highlight\">' + e.comments + \"</span>条评论</a></p>\",\n            e.description && (t += '<p class=\"ds-user-description\">' + u(e.description) + \"</p>\"),\n            t\n        };\n        var st = S.Views = {},\n        at = (S.Callbacks = {},\n        S.pagelets = []),\n        it = S.events = new J,\n        rt = S.site = new V,\n        nt = S.visitor = new $,\n        ot = S.unread = new V,\n        dt = S.threadPool = new Y(G),\n        lt = S.postPool = new Y(F),\n        ct = S.userPool = new Y($);\n        it.on(\"queryDefined\",\n        function() {\n            var e = c.short_name;\n            if (c.theme && n(c.theme), m) {\n                var t = m[\"ds_site_\" + e],\n                s = m[\"ds_lang_\" + e];\n                t && rt.reset(p.parse(t)),\n                s && o.extend(z, p.parse(s))\n            }\n        }),\n        q(),\n        S.require(\"embed.compat\",\n        function() {\n            function i(e) {\n                e.stopPropagation()\n            }\n            function n(e) { (e.ctrlKey && 13 == e.which || 10 == e.which) && B(this.form).trigger(\"submit\")\n            }\n            function d() {\n                var e = B(this);\n                e.height(Math.max(54, e.next(\".ds-hidden-text\").text(this.value).height() + 27))\n            }\n            function l() {\n                if (P.authInWin) {\n                    var e = this.href.match(/\\/(login|bind)\\/(\\w+)\\//i);\n                    if (e && S.serviceNames[e[2]]) return ! b(e[2], this.href)\n                }\n            }\n            function u() {\n                var e, s, a, i, r, n = this,\n                o = 0,\n                d = 0;\n                t.selection && (s = t.selection.createRange(), s && s.parentElement() == n && (i = n.value.length, e = n.value.replace(/\\r\\n/g, \"\\n\"), a = n.createTextRange(), a.moveToBookmark(s.getBookmark()), r = n.createTextRange(), r.collapse(!1), a.compareEndPoints(\"StartToEnd\", r) > -1 ? o = d = i: (o = -a.moveStart(\"character\", -i), o += e.slice(0, o).split(\"\\n\").length - 1, a.compareEndPoints(\"EndToEnd\", r) > -1 ? d = i: (d = -a.moveEnd(\"character\", -i), d += e.slice(0, d).split(\"\\n\").length - 1)))),\n                B(n).data(\"ds-range-start\", o).data(\"ds-range-end\", d)\n            }\n            function p(e) {\n                return P.touch && e.addClass(\"ds-touch\"),\n                o.cssProperty(\"transition\") || e.addClass(\"ds-no-transition\"),\n                P.ie6 && e.addClass(\"ds-ie6\"),\n                P.opacity || e.addClass(\"ds-no-opacity\"),\n                e\n            }\n            function f(e) {\n                if (!P.placeholder) {\n                    var t = e.attr(\"placeholder\");\n                    e.val(t).focus(function() {\n                        this.value === t && (this.value = \"\")\n                    }).blur(function() {\n                        \"\" === this.value && (this.value = t)\n                    })\n                }\n                return e\n            }\n            function g(e) {\n                if (\"http://duoshuo.com\" === e.origin) switch (e.data.type) {\n                case \"login\":\n                    h.href = e.data.redirectUrl\n                }\n            }\n            function b(t, s) {\n                var a = {\n                    weibo: [760, 600],\n                    renren: [420, 322],\n                    qq: [504, 445],\n                    weixin: [450, 550],\n                    google: [600, 440]\n                } [t] || [550, 400];\n                return e.open(s + ( - 1 == s.indexOf(\"?\") ? \"?\": \"&\") + o.param({\n                    origin: h.origin || \"http://\" + h.host\n                }), \"_blank\", \"width=\" + a[0] + \",height=\" + a[1] + \",toolbar=no,menubar=no,location=yes\")\n            }\n            function y(e) {\n                var t = Z[r() ? \"loginUrl\": \"bindUrl\"](e);\n                P.authInWin && b(e, t) || (h.href = t)\n            }\n            function w() {\n                var e = E(et[\"dialog-ask-for-auth\"]({})).el.find(\".ds-dialog\").css(\"width\", \"300px\");\n                e.find(\"a.ds-service-link\").click(l)\n            }\n            function x(e, t, s, a) {\n                function i() {\n                    function e(e) {\n                        if (s && a) {\n                            var t = s.options,\n                            i = U(s.postList.el, e.response[a], t);\n                            \"asc\" == t.order == (\"top\" == t.formPosition) && S.scrollTo(i);\n                            var r = s.el.find(\".ds-comments-tab-\" + a + \" span.ds-highlight\");\n                            r.html(parseInt(r.html()) + 1)\n                        }\n                    }\n                    return a || l.find(\"[type=checkbox]:checked\")[0] ? (A.post(\"posts/repost\", S.toJSON(l), e), o.close(), !1) : (alert(\"还没有选发布到哪儿呢\"), !1)\n                }\n                function r() {\n                    var e = this.value;\n                    return this.checked && !nt.data.social_uid[\"qqt\" == e ? \"qq\": e] ? void y(e) : void 0\n                }\n                var o = E(et[\"dialog-reposts\"]({\n                    post: e.toJSON(),\n                    repostMessage: t,\n                    service: a\n                })),\n                l = o.el.find(\"form\");\n                return l.submit(i),\n                l.find(\".ds-actions [type=checkbox]\").change(r),\n                f(l.find(\"textarea\")).keyup(n).keyup(d).focus(),\n                !1\n            }\n            function T(e) {\n                var t = {\n                    \"unread-comments\": {\n                        title: \"新留言及回复\",\n                        apiUrl: \"users/unreadComments\",\n                        tmpl: function(e) {\n                            return e.thread ? '<li data-thread-id=\"' + e.thread.thread_id + '\">' + B.map(e.authors, et.userAnchor).join(\"、\") + ' 在 <a class=\"ds-read\" href=\"' + e.thread.url + '#comments\" target=\"_blank\">' + _(e.thread.title || \"无标题\") + '</a> 中回复了你 <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\">知道了</a></li>': \"\"\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-thread-id\");\n                            A.post(\"threads/read\", {\n                                thread_id: t\n                            }),\n                            ot.data.comments--\n                        }\n                    },\n                    \"unread-notifications\": {\n                        title: \"系统消息\",\n                        apiUrl: \"users/unreadNotifications\",\n                        tmpl: function(e) {\n                            return '<li data-notification-id=\"' + e.notification_id + '\" data-notification-type=\"' + e.type + '\">' + e.content + ' <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\">知道了</a></li>'\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-notification-id\");\n                            A.post(\"notifications/read\", {\n                                notification_id: t\n                            }),\n                            ot.data.notifications--\n                        }\n                    }\n                } [e],\n                s = E(\"<h2>\" + t.title + '</h2><ul class=\"ds-unread-list\"></ul>');\n                s.on(\"close\", S.resetNotify);\n                var a = s.el.find(\".ds-unread-list\").delegate(\".ds-delete\", \"click\",\n                function() {\n                    return B(this).parent().remove(),\n                    0 === a.children().length && s.close(),\n                    !1\n                }).delegate(\".ds-read\", \"click\",\n                function() {\n                    t.read(B(this).parent())\n                });\n                B(\"#ds-notify\").hide(),\n                A.get(t.apiUrl, {},\n                function(e) {\n                    s.el.find(\".ds-unread-list\").html(B.map(e.response, t.tmpl).join(\"\\n\"))\n                })\n            }\n            function N() {\n                bubbleOutTimer && (clearTimeout(bubbleOutTimer), bubbleOutTimer = 0)\n            }\n            function I() {\n                bubbleOutTimer = setTimeout(function() {\n                    bubbleOutTimer = 0,\n                    X.detach()\n                },\n                400)\n            }\n            function U(e, t, s) {\n                return e.find(\".ds-post[data-post-id=\" + t.data.post_id + \"]\")[0] ? void 0 : (e.find(\".ds-post-placeholder\").remove(), B(et.post({\n                    post: t.toJSON(),\n                    options: s\n                })).hide()[\"asc\" == s.order ? \"appendTo\": \"prependTo\"](e).slideDown(function() {}))\n            }\n            function R(e, t) {\n                function s() {\n                    if (r()) return w(),\n                    !1;\n                    var e = B(this).parent(),\n                    t = e.hasClass(\"ds-post-liked\"),\n                    s = B(this).html().match(/\\((\\d+)\\)/),\n                    a = (s ? parseInt(s[1]) : 0) + (t ? -1 : 1);\n                    return A.post(\"posts/vote\", {\n                        post_id: e.closest(\".ds-ctx-entry, .ds-post-self\").attr(\"data-post-id\"),\n                        vote: t ? 0 : 1\n                    }),\n                    B(this).html(B(this).html().replace(/\\(\\d+\\)/, \"\") + (a ? \"(\" + a + \")\": \"\")),\n                    e[t ? \"removeClass\": \"addClass\"](\"ds-post-liked\"),\n                    !1\n                }\n                function a() {\n                    var e = B(this).closest(\".ds-post-self\"),\n                    t = lt[e.attr(\"data-post-id\")];\n                    return x(t, \"\"),\n                    !1\n                }\n                function i() {\n                    if (!confirm(\"确定要删除这条评论吗？\")) return ! 1;\n                    var t = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/remove\", {\n                        post_id: t.attr(\"data-post-id\")\n                    }),\n                    t.parent().fadeOut(200,\n                    function() {\n                        e.data.comments--,\n                        e.updateCounter(\"duoshuo\"),\n                        B(this).remove()\n                    }),\n                    !1\n                }\n                function n() {\n                    if (!confirm(\"确定要举报这条评论吗？\")) return ! 1;\n                    var e = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/report\", {\n                        post_id: e.attr(\"data-post-id\")\n                    }),\n                    alert(\"感谢您的反馈！\"),\n                    !1\n                }\n                function o() {\n                    var s = B(this),\n                    a = s.closest(\".ds-comment-actions\");\n                    if (a.hasClass(\"ds-reply-active\")) h.el.fadeOut(200,\n                    function() {\n                        B(this).detach()\n                    }),\n                    a.removeClass(\"ds-reply-active\");\n                    else {\n                        var i = s.closest(\".ds-ctx-entry, .ds-post-self\");\n                        h ? h.actionsBar.removeClass(\"ds-reply-active\") : (h = new st.Replybox(e), h.render(!0).el.addClass(\"ds-inline-replybox\").detach()),\n                        h.el.find(\"[name=parent_id]\").val(i.attr(\"data-post-id\")),\n                        h.el.show().appendTo(s.closest(\".ds-ctx-body, .ds-comment-body\")).find(\"textarea\").focus(),\n                        h.actionsBar = a.addClass(\"ds-reply-active\"),\n                        t.max_depth <= 1 ? h.postList = e.postList.el: (h.postList = i.siblings(\".ds-children\"), h.postList[0] || (h.postList = B('<ul class=\"ds-children\"></ul>').insertAfter(i)))\n                    }\n                    return ! 1\n                }\n                function d() {\n                    function e(e) {\n                        W(e),\n                        i.append(B.map(e.response,\n                        function(e) {\n                            return et.post({\n                                post: e,\n                                options: t\n                            })\n                        }).join(\"\"))\n                    } {\n                        var s = B(this).closest(\".ds-post-self\"),\n                        a = s.attr(\"data-post-id\");\n                        s.data(\"source\")\n                    }\n                    if (0 != s.attr(\"data-root-id\")) return ! 1;\n                    var i = s.siblings(\".ds-children\");\n                    return i[0] ? (i.remove(), !1) : (i = B('<ul class=\"ds-children\"></ul>').insertAfter(s), A.get(\"posts/listComments\", H({\n                        post_id: a\n                    }), e), !1)\n                }\n                function l() {\n                    var t = B(this).closest(\".ds-post-self\"),\n                    s = lt[t.attr(\"data-post-id\")],\n                    a = s.data.source;\n                    if (!nt.data.social_uid[\"qqt\" == a ? \"qq\": a]) return void y(a);\n                    var i = s.data.root_id,\n                    r = \"0\" != i ? lt[i] : s,\n                    n = \"\";\n                    if (\"0\" != i) {\n                        var o = prepatePost(s.data).theAuthor;\n                        n = (\"weibo\" == a ? \"//@\" + o.name: \"|| @\" + o.qqt_account) + \":\" + s.data.message\n                    }\n                    return x(r, n, e, a),\n                    !1\n                }\n                function c() {\n                    var e = B(this).parent();\n                    return e.siblings().show(),\n                    e.remove(),\n                    !1\n                }\n                function u() {\n                    function t() {\n                        function t(e) {\n                            var t = e.response;\n                            ct[c] ? ct[c].set(t) : ct[c] = new $(t),\n                            X.owner == s && K.html(et.userInfo(t))\n                        }\n                        tt = 0,\n                        X.owner = s,\n                        N();\n                        var i = a.offset(),\n                        r = e.el.offset(),\n                        n = a.innerWidth() / 2,\n                        o = e.el.innerHeight() - (i.top - r.top) + 6,\n                        d = i.left - r.left - 35 + (n > 35 ? 35 : n);\n                        try {\n                            if (a.hasClass(\"ds-comment-context\")) K.attr(\"id\", \"ds-ctx-bubble\").attr(\"data-post-id\", a.attr(\"data-post-id\")).html('<ul id=\"ds-ctx\">' + et.ctxPost({\n                                post: lt[a.attr(\"data-parent-id\")].toJSON()\n                            }) + '</ul><div class=\"ds-bubble-footer\"><a class=\"ds-ctx-open\" href=\"javascript:void(0);\">查看对话</a></div>');\n                            else if (a.hasClass(\"ds-avatar\") || a.hasClass(\"ds-user-name\")) {\n                                var l = {},\n                                c = l.user_id = a.attr(\"data-user-id\");\n                                if (!c) throw \"no info\";\n                                K.attr(\"id\", \"ds-user-card\").attr(\"data-user-id\", c).empty(),\n                                ct[c] ? K.html(et.userInfo(ct[c].data)) : A.get(\"users/profile\", H(l), t)\n                            }\n                            X.css({\n                                bottom: o,\n                                left: d\n                            }).appendTo(e.innerEl)\n                        } catch(u) {\n                            X.detach()\n                        }\n                    }\n                    var s = this;\n                    if (bubbleOutTimer && X.owner == s) return clearTimeout(bubbleOutTimer),\n                    void(bubbleOutTimer = 0);\n                    var a = B(s);\n                    tt = setTimeout(t, 200)\n                }\n                function p() {\n                    tt ? (clearTimeout(tt), tt = 0) : bubbleOutTimer || I()\n                }\n                var h;\n                this.delegate(\"a.ds-post-likes\", \"click\", s).delegate(\"a.ds-post-repost\", \"click\", a).delegate(\"a.ds-post-delete\", \"click\", i).delegate(\"a.ds-post-report\", \"click\", n).delegate(\"a.ds-post-reply\", \"click\", o).delegate(\"a.ds-weibo-comments\", \"click\", d).delegate(\"a.ds-weibo-reposts\", \"click\", l).delegate(\"a.ds-expand\", \"click\", c),\n                P.touch || this.delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseenter\", u).delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseleave\", p)\n            }\n            function H(e) {\n                var s = {\n                    require: \"site,visitor,nonce,lang\" + (it++?\"\": \",unread,log,extraCss\"),\n                    site_ims: D.get(\"ds_site_\" + c.short_name + \":timestamp\"),\n                    lang_ims: D.get(\"ds_lang_\" + c.short_name + \":timestamp\"),\n                    referer: t.referrer\n                };\n                c.stylePatch && (s.style_patch = c.stylePatch);\n                for (var a in s) s[a] && (!P.ie6 || encodeURIComponent(s[a]).length < 200) && (e[a] = s[a]);\n                return e\n            }\n            var B = S.jQuery,\n            V = B(e),\n            Y = B(t);\n            e.postMessage && (e.addEventListener ? e.addEventListener(\"message\", g, !1) : e.attachEvent && e.attachEvent(\"onmessage\", g)),\n            S.scrollTo = function(e) {\n                var t = e.offset().top; (t < V.scrollTop() || t > V.scrollTop() + V.height()) && B(\"html, body\").animate({\n                    scrollTop: t - 40\n                },\n                200, \"swing\")\n            },\n            S.toJSON = function(e) {\n                var t = /\\r?\\n/g,\n                s = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,\n                a = /^(?:select|textarea)/i,\n                i = e.map(function() {\n                    return this.elements ? B.makeArray(this.elements) : this\n                }).filter(function() {\n                    return this.name && !this.disabled && (this.checked || a.test(this.nodeName) || s.test(this.type))\n                }).map(function(e, s) {\n                    var a = B(this).val();\n                    return null == a ? null: B.isArray(a) ? B.map(a,\n                    function(e) {\n                        return {\n                            name: s.name,\n                            value: e.replace(t, \"\\r\\n\")\n                        }\n                    }) : {\n                        name: s.name,\n                        value: a.replace(t, \"\\r\\n\")\n                    }\n                }).toArray(),\n                r = {};\n                return B.each(i,\n                function() {\n                    r[this.name] = this.value\n                }),\n                r\n            },\n            S.resetNotify = function() {\n                var e = B(\"#ds-notify\"),\n                s = ot.data;\n                e[0] || (e = B('<div id=\"ds-notify\"></div>').css({\n                    hidden: {\n                        display: \"none\"\n                    },\n                    \"top-right\": {\n                        top: \"24px\",\n                        right: \"24px\"\n                    },\n                    \"bottom-right\": {\n                        bottom: \"24px\",\n                        right: \"24px\"\n                    }\n                } [rt.data.notify_position]).delegate(\".ds-notify-unread a\", \"click\",\n                function() {\n                    return T(B(this).data(\"type\")),\n                    !1\n                }).appendTo(t.body)),\n                e.html(et.notify(s))[!s.comments && !s.notifications || \"hidden\" === rt.data.notify_position || B(\".ds-dialog\")[0] ? \"hide\": \"show\"]()\n            },\n            ot.on(\"reset\", S.resetNotify),\n            st.Replybox = function(e) {\n                this.embedThread = e\n            },\n            st.Replybox.prototype = {\n                render: function(e) {\n                    function s(e) {\n                        e.data(\"submitting\", !0),\n                        e.find(\".ds-post-button\").addClass(\"ds-waiting\").html(z.posting)[0].disabled = !0\n                    }\n                    function a(e) {\n                        e.data(\"submitting\", !1),\n                        e.find(\".ds-post-button\").removeClass(\"ds-waiting\").html(z.post)[0].disabled = !1\n                    }\n                    var i = this,\n                    o = i.embedThread,\n                    c = o.options,\n                    p = function() {\n                        S.require(\"smilies\",\n                        function() {})\n                    },\n                    h = {\n                        thread: o,\n                        options: c,\n                        inline: e,\n                        params: {\n                            thread_id: o.threadId,\n                            parent_id: \"\",\n                            nonce: S.nonce\n                        },\n                        repostArray: [],\n                        checked: 0\n                    };\n                    for (var v in nt.data.repostOptions) nt.data.repostOptions[v] && (h.repostArray.push(v), h.checked = 1);\n                    var g = i.el = B(et.replybox(h)).click(p),\n                    b = g.find(\"form\"),\n                    y = b.find(\"input[type=checkbox]\")[0],\n                    _ = b.find(\"a.ds-service-icon, a.ds-service-icon-grey\"),\n                    k = f(b.find(\"textarea\")).focus(p).keyup(n).keyup(d).bind(\"focus mousedown mouseup keyup\", u),\n                    w = g.find(\".ds-add-emote\").click(function(e) {\n                        var s = S.smiliesTooltip;\n                        return w.toggleClass(\"ds-expanded\").hasClass(\"ds-expanded\") ? (s || (s = S.smiliesTooltip = new st.SmiliesTooltip, s.render(), S.require(\"smilies\",\n                        function() {\n                            s.reset(\"微博-默认\")\n                        })), s.replybox = i, s.el.appendTo(t.body).css({\n                            top: i.el.offset().top + i.el.outerHeight() + 4 + \"px\",\n                            left: i.el.find(\".ds-textarea-wrapper\").offset().left + \"px\"\n                        }), B(t.body).click(x)) : x(e),\n                        !1\n                    }),\n                    x = (g.find(\".ds-add-image\").click(function(e) {\n                        var s = k[0],\n                        a = s.value,\n                        i = \"请输入图片地址\",\n                        r = '<img src=\"' + i + '\" />';\n                        if (t.selection) {\n                            s.value = a.substring(0, k.data(\"ds-range-start\")) + r + a.substring(k.data(\"ds-range-end\"), a.length),\n                            s.value = s.value.replace(\"说点什么吧 ...\", \"\"),\n                            s.focus();\n                            var n = t.selection.createRange();\n                            n.collapse(),\n                            n.findText(i),\n                            n.select()\n                        } else {\n                            s.value = a.substring(0, s.selectionStart) + r + a.substring(s.selectionEnd);\n                            var o = s.value.search(i);\n                            s.setSelectionRange(o, o + i.length),\n                            s.focus()\n                        }\n                        e.preventDefault()\n                    }), i.hideSmilies = function() {\n                        w.removeClass(\"ds-expanded\"),\n                        S.smiliesTooltip.el.detach(),\n                        B(t.body).unbind(\"click\", x)\n                    }),\n                    T = function(e, t) {\n                        var s = E(et[\"dialog-anonymous\"]({\n                            services: [\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"],\n                            options: c\n                        })),\n                        a = s.el.find(\".ds-dialog\").css(\"width\", \"320px\");\n                        if (a.find(\".ds-icons-32 a\").click(l), !c.deny_anonymous) {\n                            var i = s.el.find(\"form\");\n                            i.submit(function() {\n                                var e = i.find(\"input[name=author_email]\").val();\n                                return ! e && !c.require_guest_email || e.match(/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) ? (t(S.toJSON(i)), s.close(), !1) : (alert(\"请输入一个有效的email地址.\"), !1)\n                            }),\n                            i.find(\"input[name=author_name]\")[0].focus()\n                        }\n                    };\n                    c.deny_anonymous && k.focus(function() {\n                        if (r()) {\n                            T(b, q);\n                            var e = function(t) {\n                                t.stopPropagation(),\n                                k.unbind(\"click\", e)\n                            };\n                            k.click(e)\n                        }\n                        return ! 1\n                    });\n                    var q = function(e) {\n                        s(b),\n                        A.post(\"posts/create\", B.extend(S.toJSON(b), e),\n                        function(e) {\n                            var t = lt[e.response.post_id] = new F(e.response),\n                            s = U(i.postList, t, c);\n                            if (\"asc\" == c.order == (\"top\" == c.formPosition) && S.scrollTo(s), o.data.comments++, o.updateCounter(\"duoshuo\"), k.val(\"\").trigger(\"keyup\"), a(b), g.hasClass(\"ds-inline-replybox\") && (g.detach(), i.actionsBar.removeClass(\"ds-reply-active\")), m) try {\n                                m.removeItem(\"ds_draft_\" + o.threadId)\n                            } catch(r) {}\n                        },\n                        function(e) {\n                            a(b),\n                            alert(e.errorMessage)\n                        })\n                    };\n                    b.submit(function() {\n                        if (b.data(\"submitting\")) return ! 1;\n                        var e = B.trim(b[0].message.value);\n                        return \"\" == e || !P.placeholder && e == k.attr(\"placeholder\") ? (alert(\"您还没写内容呢\"), !1) : (r() ? T(b, q) : q(), !1)\n                    });\n                    var C = function(e) {\n                        return B(e).hasClass(\"ds-service-icon-grey\") ? null: B(e).attr(\"data-service\")\n                    };\n                    if (_.click(function() {\n                        return B(this).toggleClass(\"ds-service-icon-grey\").toggleClass(\"ds-service-icon\"),\n                        y.value = B.map(_, C).join(\",\"),\n                        y.checked = \"\" != y.value,\n                        !1\n                    }), B(y).change(function() {\n                        var e = this.checked;\n                        _[e ? \"removeClass\": \"addClass\"](\"ds-service-icon-grey\")[e ? \"addClass\": \"removeClass\"](\"ds-service-icon\"),\n                        this.value = B.map(_, C).join(\",\")\n                    }), !e && m) {\n                        var j = \"ds_draft_\" + o.threadId;\n                        k.bind(\"focus blur keyup\",\n                        function(e) {\n                            var t = B(e.currentTarget).val();\n                            try {\n                                m[j] = t\n                            } catch(e) {}\n                        }),\n                        m[j] && k.val(m[j])\n                    }\n                    return this\n                }\n            },\n            st.Dialog = J.extend({\n                init: function(e, t) { (this.el = B(\"#ds-wrapper\"))[0] || (this.el = p(B('<div id=\"ds-wrapper\"></div>'))),\n                    this.options = B.extend({\n                        width: 600\n                    },\n                    t),\n                    e !== s && B(e).attr(\"id\", \"ds-reset\").appendTo(this.el)\n                },\n                open: function() {\n                    function e(e) {\n                        return 27 == e.which ? (a.close(), !1) : void 0\n                    }\n                    function s() {\n                        return a.close(),\n                        !1\n                    }\n                    var a = this;\n                    return a.el.hide().appendTo(t.body).fadeIn(200),\n                    P.ie6 && a.el.css(\"top\", V.scrollTop() + 100),\n                    a.el.show().find(\".ds-dialog\").delegate(\"a.ds-dialog-close\", \"click\",\n                    function() {\n                        return a.close(),\n                        !1\n                    }).click(i),\n                    Y.keydown(e),\n                    B(t.body).click(s),\n                    a.close = function() {\n                        Y.unbind(\"keydown\", e),\n                        B(t.body).unbind(\"click\", s),\n                        a.el.fadeOut(200,\n                        function() {\n                            B(this).remove()\n                        }),\n                        a.trigger(\"close\")\n                    },\n                    a\n                }\n            }),\n            et.likePanel = function(e) {\n                return e.likes ? '<span class=\"ds-highlight\">' + e.likes + \"</span> 人喜欢\": \"\"\n            },\n            st.Meta = function(e) {\n                this.embedThread = e\n            },\n            st.Meta.prototype = {\n                render: function() {\n                    function a(a) {\n                        function r(e) {\n                            o.set(e),\n                            n.resetLikePanel()\n                        }\n                        function c() {\n                            n.tooltip.detach(),\n                            B(t.body).unbind(\"click\", c)\n                        }\n                        function u(t) {\n                            switch (this.className) {\n                            case \"ds-like-tooltip-close\":\n                                c(t);\n                                break;\n                            default:\n                                if (!e.open(this.href, \"_blank\", \"height=500,width=600,top=0,left=0,toolbar=no,menubar=no,resizable=yes,location=yes,status=no\")) return\n                            }\n                            return ! 1\n                        }\n                        var p = l.hasClass(\"ds-thread-liked\");\n                        if (A.post(\"threads/vote\", {\n                            thread_id: n.embedThread.threadId,\n                            vote: p ? 0 : 1\n                        },\n                        r), l.toggleClass(\"ds-thread-liked\"), l.find(\".ds-thread-like-text\").text(p ? \"喜欢\": \"已喜欢\"), p) return n.tooltip && c(a),\n                        !1;\n                        if (n.tooltip === s) {\n                            var h = et.likeTooltip({\n                                services: {\n                                    qzone: \"QQ空间\",\n                                    weibo: \"新浪微博\",\n                                    qqt: \"腾讯微博\",\n                                    renren: \"人人网\",\n                                    kaixin: \"开心网\",\n                                    douban: \"豆瓣网\",\n                                    baidu: \"百度搜藏\"\n                                },\n                                thread_id: o.data.thread_id\n                            });\n                            n.tooltip = B(h).click(i).delegate(\"a\", \"click\", u)\n                        }\n                        var f = {};\n                        return f.left = 0,\n                        f.top = d.position().top + d.outerHeight() - 4 + \"px\",\n                        n.tooltip.appendTo(n.embedThread.innerEl).css(f),\n                        B(t.body).click(c),\n                        !1\n                    }\n                    var n = this,\n                    o = n.embedThread.model,\n                    d = n.el = B(et.meta(o.toJSON())),\n                    l = d.find(\".ds-like-thread-button\");\n                    return l.click(a),\n                    n.resetLikePanel(),\n                    r() && d.hide(),\n                    n\n                },\n                resetLikePanel: function() {\n                    this.el.find(\".ds-like-panel\").html(et.likePanel(this.embedThread.model.toJSON()))\n                }\n            },\n            st.PostListHead = function(e) {\n                this.embedThread = e\n            },\n            st.PostListHead.prototype = {\n                render: function() {\n                    function e(e) {\n                        r.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.page = 1;\n                        var t = e.currentTarget;\n                        switch (t.className) {\n                        case \"ds-comments-tab-duoshuo\":\n                            a.params.source = \"duoshuo\",\n                            s.replybox.el.show();\n                            break;\n                        case \"ds-comments-tab-repost\":\n                            a.params.source = \"repost\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-weibo\":\n                            a.params.source = \"weibo\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-qqt\":\n                            a.params.source = \"qqt\",\n                            s.replybox.el.hide()\n                        }\n                        return B(t).addClass(\"ds-current\"),\n                        a.refetch(),\n                        !1\n                    }\n                    function t() {\n                        return n.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.order = s.options.order = this.className.replace(\"ds-order-\", \"\"),\n                        a.params.page = 1,\n                        a.refetch(),\n                        B(this).addClass(\"ds-current\"),\n                        !1\n                    }\n                    var s = this.embedThread,\n                    a = s.postList,\n                    i = this.el = B(et.postListHead({\n                        thread: s.model.toJSON(),\n                        options: s.options\n                    })),\n                    r = i.find(\"ul.ds-comments-tabs\");\n                    r.delegate(\".ds-tab a\", \"click\", e);\n                    var n = i.find(\".ds-sort\");\n                    return n.delegate(\"a\", \"click\", t),\n                    n.find(\".ds-order-\" + a.params.order).addClass(\"ds-current\"),\n                    this\n                }\n            },\n            st.Paginator = function(e) {\n                function t() {\n                    return i.params.page = parseInt(this.innerHTML),\n                    i.refetch(),\n                    a.find(\".ds-current\").removeClass(\"ds-current\"),\n                    B(this).addClass(\"ds-current\"),\n                    !1\n                }\n                e = e || {};\n                var s = this,\n                a = s.el = e.el || B('<div class=\"ds-paginator\"></div>'),\n                i = s.collection = e.collection;\n                a.delegate(\"a\", \"click\", t)\n            },\n            st.Paginator.prototype = {\n                reset: function(e) {\n                    function t(e) {\n                        i.push('<a data-page=\"' + e + '\" href=\"javascript:void(0);\">' + e + \"</a>\")\n                    }\n                    var s, a = this.collection.params.page || 1,\n                    i = [];\n                    if (a > 1) for (t(1), s = a > 4 ? a - 2 : 2, s > 2 && i.push('<span class=\"page-break\">...</span>'); a > s; s++) t(s);\n                    if (i.push('<a data-page=\"' + a + '\" href=\"javascript:void(0);\" class=\"ds-current\">' + a + \"</a>\"), a < e.pages) {\n                        for (s = a + 1; a + 4 >= s && s < e.pages; s++) t(s);\n                        s < e.pages && i.push('<span class=\"page-break\">...</span>'),\n                        t(e.pages)\n                    }\n                    this.el.html('<div class=\"ds-border\"></div>' + i.join(\" \"))[e.pages > 1 ? \"show\": \"hide\"]()\n                }\n            },\n            S.addSmilies = function(e, t) {\n                var s = S.smiliesTooltip;\n                s && s.el.find(\"ul.ds-smilies-tabs\").append(\"<li><a>\" + e + \"</a></li>\"),\n                S.smilies[e] = t\n            },\n            st.SmiliesTooltip = function() {},\n            st.SmiliesTooltip.prototype = {\n                render: function() {\n                    function e() {\n                        var e = s.replybox,\n                        a = e.el.find(\"textarea\"),\n                        i = a[0],\n                        r = i.value;\n                        if (t.selection) {\n                            i.value = r.substring(0, a.data(\"ds-range-start\")) + this.title + r.substring(a.data(\"ds-range-end\"), r.length),\n                            i.value = i.value.replace(z.leave_a_message, \"\"),\n                            i.focus();\n                            var n = t.selection.createRange();\n                            n.moveStart(\"character\", a.data(\"ds-range-start\") + this.title.length),\n                            n.collapse(),\n                            n.select()\n                        } else {\n                            var o = i.selectionStart + this.title.length;\n                            i.value = r.substring(0, i.selectionStart) + this.title + r.substring(i.selectionEnd),\n                            i.setSelectionRange(o, o)\n                        }\n                        e.hideSmilies(),\n                        i.focus()\n                    }\n                    var s = this,\n                    a = s.el = B(et.smiliesTooltip(L));\n                    return a.click(i).find(\"ul.ds-smilies-tabs\").delegate(\"a\", \"click\",\n                    function() {\n                        s.reset(this.innerHTML)\n                    }),\n                    a.find(\".ds-smilies-container\").delegate(\"img\", \"click\", e),\n                    this\n                },\n                reset: function(e) {\n                    function t(t, s) {\n                        var i = 0 === e.indexOf(\"微博\") ? \"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/\" + s.replace(\"_org\", \"_thumb\") : S.STATIC_URL + \"/images/smilies/\" + s;\n                        \"WordPress\" === e && (t = \" \" + t + \" \"),\n                        a += '<li><img src=\"' + i + '\" title=\"' + _(t) + '\" /></li>'\n                    }\n                    var s = this.el.find(\"ul.ds-smilies-tabs\");\n                    s.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                    s.find(\"a\").filter(function() {\n                        return this.innerHTML == e\n                    }).addClass(\"ds-current\");\n                    var a = \"<ul>\";\n                    return B.each(L[e], t),\n                    a += \"</ul>\",\n                    this.el.find(\".ds-smilies-container\").html(a),\n                    this\n                }\n            },\n            et.postPlaceholder = function() {\n                return ['<li class=\"ds-post ds-post-placeholder\">', z.no_comments_yet, \"</li>\"].join(\"\")\n            };\n            var X = B('<div id=\"ds-bubble\"><div class=\"ds-bubble-content\"></div><div class=\"ds-arrow ds-arrow-down ds-arrow-border\"></div><div class=\"ds-arrow ds-arrow-down\"></div></div>'),\n            K = X.find(\".ds-bubble-content\").delegate(\"a.ds-ctx-open\", \"click\",\n            function() {\n                function e(e) {\n                    function t(e, t) {\n                        return et.ctxPost({\n                            post: e,\n                            index: t\n                        })\n                    }\n                    C.log(B.map(e.response, t).join(\"\\n\"));\n                    s.el.find(\"ol\");\n                    s.el.find(\"ol\").html(B.map(e.response, t).join(\"\\n\"))\n                }\n                var t = {};\n                t.post_id = K.attr(\"data-post-id\"),\n                A.get(\"posts/conversation\", t, e);\n                var s = E('<h2>查看对话</h2><ol id=\"ds-ctx\"></ol>');\n                return s.el.find(\".ds-dialog\").css(\"width\", \"600px\"),\n                s.el.find(\".ds-dialog-body\").css({\n                    \"max-height\": \"350px\",\n                    _height: \"350px\",\n                    \"overflow-y\": \"auto\",\n                    \"padding-top\": \"10px\"\n                }),\n                !1\n            }),\n            tt = bubbleOutTimer = 0;\n            X.mouseenter(N).mouseleave(I),\n            st.PostList = function(e) {\n                e && (e.params && (this.params = e.params), e.embedThread && (this.embedThread = e.embedThread)),\n                this.el = B('<ul class=\"ds-comments\"></ul>')\n            },\n            st.PostList.prototype = {\n                url: \"threads/listPosts\",\n                render: function() {\n                    return R.call(this.el, this.embedThread, this.embedThread.options),\n                    this\n                },\n                reset: function(e) {\n                    var t = this.embedThread.options;\n                    this.el.html(e[0] ? B.map(lt.getJSON(e),\n                    function(e) {\n                        return et.post({\n                            post: e,\n                            options: t\n                        })\n                    }).join(\"\") : et.postPlaceholder())\n                },\n                refetch: function() {\n                    function e(e) {\n                        lt.set(e.parentPosts || e.relatedPosts),\n                        ct.set(e.users),\n                        s.reset(e.response),\n                        s.embedThread.paginator.reset(e.cursor),\n                        s.el.fadeTo(200, 1),\n                        S.scrollTo(s.el),\n                        a.remove()\n                    }\n                    var s = this,\n                    a = B(et.indicator()).appendTo(t.body).fadeIn(200);\n                    s.el.fadeTo(200, .5),\n                    A.get(s.url, s.params, e)\n                }\n            },\n            st.EmbedThread = Q.extend({\n                uri: \"threads/listPosts\",\n                params: \"thread-id local-thread-id source-thread-id thread-key category channel-key author-key author-id url limit order max-depth form-position container-url\" + (v.match(/MSIE 6\\.0/) ? \"\": \" title image thumbnail\"),\n                render: function() {\n                    var e = this.el;\n                    if (\"请将此处替换成文章在你的站点中的ID\" === e.data(\"thread-key\")) return alert(\"请设置正确的 data-thread-key 属性\"),\n                    !1;\n                    e.attr(\"id\", \"ds-thread\").append(et.waitingImg());\n                    var t = e.width(),\n                    s = e.data(\"url\") || !e.attr(\"data-thread-id\") && B(\"link[rel=canonical]\").attr(\"href\");\n                    s ? e.data(\"url\", k(s)) : e.data(\"container-url\", h.href),\n                    t && 400 >= t && e.addClass(\"ds-narrow\").data(\"max-depth\", 1)\n                },\n                updateCounter: function(e) {\n                    function t(e) {\n                        return e.substr(e.indexOf(\"}\") + 1)\n                    }\n                    var s = {\n                        duoshuo: [\"comments\", t(z.comments_multiple) || \"评论\"],\n                        repost: [\"reposts\", t(z.reposts_multiple) || \"转载\"],\n                        weibo: [\"weibo_reposts\", t(z.weibo_reposts_multiple) || \"新浪微博\"],\n                        qqt: [\"qqt_reposts\", t(z.qqt_reposts_multiple) || \"腾讯微博\"]\n                    };\n                    for (var a in s) if (!e || e == a) {\n                        var i = this.data[s[a][0]];\n                        this.el.find(\".ds-comments-tab-\" + a).html(this.el.hasClass(\"ds-narrow\") ? '<span class=\"ds-service-icon ds-' + a + '\"></span>' + i: (i ? '<span class=\"ds-highlight\">' + i + \"</span>\": \"0\") + s[a][1])\n                    }\n                },\n                onError: function(e) {\n                    this.el.html(\"评论框出错啦(\" + e.code + \"): \" + e.errorMessage)\n                },\n                onload: function(t) {\n                    var a = this,\n                    i = a.threadId = t.thread.thread_id,\n                    n = t.cursor,\n                    o = a.options = t.options,\n                    d = a.innerEl = p(B('<div id=\"ds-reset\"></div>').appendTo(a.el));\n                    a.model = new G(a.data = t.thread),\n                    lt.set(t.parentPosts || t.relatedPosts),\n                    ct.set(t.users),\n                    a.el.find(\"#ds-waiting\").remove(),\n                    o.like_thread_enabled && (a.meta = new st.Meta(a), d.append(a.meta.render().el)),\n                    o.hot_posts && t.hotPosts && t.hotPosts.length && (a.hotPosts = new st.HotPosts(B('<div class=\"ds-rounded\"></div>'), {\n                        max_depth: 1,\n                        show_context: o.show_context\n                    }), a.hotPosts.thread = a, d.append(a.hotPosts.el), a.hotPosts.onload({\n                        list: lt.getJSON(t.hotPosts)\n                    })),\n                    a.postListHead = new st.PostListHead(a),\n                    a.postList = new st.PostList({\n                        embedThread: a,\n                        params: {\n                            source: \"duoshuo\",\n                            thread_id: i,\n                            max_depth: o.max_depth,\n                            order: o.order,\n                            limit: o.limit\n                        }\n                    }),\n                    a.postList.render().reset(t.response),\n                    a.paginator = new st.Paginator({\n                        collection: a.postList\n                    }),\n                    a.paginator.reset(n);\n                    var c = a.replybox = new st.Replybox(a);\n                    c.postList = a.postList.el,\n                    r() ? a.loginButtons = B(et.loginButtons()).delegate(\"a.ds-more-services\", \"click\",\n                    function() {\n                        return a.loginButtons.find(\".ds-additional-services\").toggle(),\n                        !1\n                    }).delegate(\"a.ds-service-link\", \"click\", l) : a.toolbar = B(et.toolbar()).delegate(\".ds-account-control\", \"mouseenter\",\n                    function() {\n                        B(this).addClass(\"ds-active\")\n                    }).delegate(\".ds-account-control\", \"mouseleave\",\n                    function() {\n                        B(this).removeClass(\"ds-active\")\n                    }).delegate(\"a.ds-bind-more\", \"click\",\n                    function() {\n                        var e = E(et[\"dialog-bind-more\"]()).el.find(\".ds-dialog\").addClass(\"ds-dialog-bind-more\").css(\"width\", \"300px\");\n                        return e.find(\"a.ds-service-link\").click(l),\n                        !1\n                    }).delegate(\"a.ds-unread-comments-count\", \"click\",\n                    function() {\n                        return T(\"unread-comments\"),\n                        !1\n                    });\n                    var u = ['<a name=\"respond\"></a>', a.toolbar || a.loginButtons, c.render().el];\n                    \"top\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(a.postListHead.render().el, a.postList.el, a.paginator.el),\n                    \"bottom\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(et.poweredBy(o.poweredby_text)),\n                    a.updateCounter(),\n                    t.alerts && B.each(t.alerts,\n                    function(e, t) {\n                        B('<div class=\"ds-alert\">' + t + \"</div>\").insertBefore(a.toolbar || loginButtons)\n                    }),\n                    o.message && c.el.find(\"textarea\").val(o.message).focus(),\n                    ot.on(\"reset\",\n                    function() {\n                        var e = ot.data.comments || 0;\n                        d.find(\"a.ds-unread-comments-count\").html(e).attr(\"title\", e ? \"你有\" + e + \"条新回复\": \"你没有新回复\").css(\"display\", e ? \"inline\": \"none\")\n                    }),\n                    o.mzadx_id && (S.require(\"mzadxN\",\n                    function() {}), B('<div id=\"MZADX_' + o.mzadx_id + '\" style=\"margin:0 auto;\"></div>').appendTo(d), __mz_rpq = e.__mz_rpq || [], __mz_rpq.push({\n                        l: [o.mzadx_id],\n                        r: \"1\",\n                        _srv: \"MZADX\",\n                        _callback: function() {}\n                    })),\n                    S.thread = a,\n                    ot.data !== s && ot.trigger(\"reset\"),\n                    r() || M.send({\n                        visit_thread_id: a.threadId\n                    })\n                },\n                onMessage: function(e) {\n                    U(this.postList.el, new F(e), this.options)\n                }\n            }),\n            st.HotPosts = Q.extend({\n                tmpl: \"hotPosts\",\n                params: \"show-quote\",\n                render: function() {\n                    return this.el.attr(\"id\", \"ds-hot-posts\"),\n                    this\n                },\n                onload: function(e) {\n                    e.options = B.extend(this.options, e.options),\n                    Q.prototype.onload.call(this, e),\n                    R.call(this.el.find(\"ul\"), this.thread, this.options)\n                }\n            }),\n            st.RecentComments = Q.extend({\n                tmpl: \"commentList\",\n                uri: \"sites/listRecentPosts\",\n                params: \"show-avatars show-time show-title avatar-size show-admin excerpt-length num-items channel-key\",\n                render: function() {\n                    this.el.attr(\"id\", \"ds-recent-comments\")\n                },\n                prepare: function(e) {\n                    return {\n                        list: B.map(e.response,\n                        function(e) {\n                            return new F(e).toJSON()\n                        })\n                    }\n                }\n            }),\n            st.RecentVisitors = Q.extend({\n                tmpl: \"recentVisitors\",\n                uri: \"sites/listVisitors\",\n                params: \"show-time avatar-size num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-recent-visitors\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.TopThreads = Q.extend({\n                tmpl: \"topThreads\",\n                uri: \"sites/listTopThreads\",\n                params: \"range num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-top-threads\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.LoginWidget = Q.extend({\n                tmpl: \"loginWidget\",\n                render: function() {\n                    var e = this.el;\n                    e.attr(\"id\", \"ds-login\").html(et.loginWidget([\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"])),\n                    e.find(\"a\").click(l),\n                    e.find(\"a.ds-logout\").attr(\"href\", Z.logoutUrl())\n                }\n            }),\n            st.ThreadCount = Q.extend({\n                onload: function(e) {\n                    var t = this.el,\n                    s = t.data(\"count-type\") || \"comments\",\n                    a = e.data[s];\n                    t[t.data(\"replace\") ? \"replaceWith\": \"html\"](z[s + \"_\" + (a ? a > 1 ? \"multiple\": \"one\": \"zero\")].replace(\"{num}\", a))\n                }\n            }),\n            st.ShareWidget = Q.extend({\n                tmpl: \"shareWidget\",\n                render: function() {\n                    var e = {\n                        copyright: \"多说分享插件\",\n                        services: [\"weibo\", \"qzone\", \"sohu\", \"renren\", \"netease\", \"qqt\", \"kaixin\", \"douban\", \"qq\", \"meilishuo\", \"mogujie\", \"baidu\", \"taobao\", \"google\", \"wechat\", \"diandian\", \"huaban\", \"duitang\", \"youdao\", \"pengyou\", \"facebook\", \"twitter\", \"linkedin\", \"msn\"]\n                    };\n                    this.el.attr(\"id\", \"ds-share\"),\n                    this.el.children().attr(\"id\", \"ds-reset\"),\n                    this.el.find(\".ds-share-aside-inner\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").hide(),\n                    this.el.hasClass(\"flat\") && this.el.find(\"a\").each(function() {\n                        B(this).addClass(\"flat\")\n                    }),\n                    p(this.el),\n                    this.delegateEvents()\n                },\n                delegateEvents: function() {\n                    var s = this,\n                    i = s.el;\n                    if (i.children().hasClass(\"ds-share-inline\")) {\n                        var r = \".ds-share-icons-more\",\n                        n = i.find(r),\n                        d = \"[data-toggle=ds-share-icons-more]\";\n                        i.delegate(d, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(d, \"mouseout\",\n                        function() {\n                            n.hide()\n                        }),\n                        i.delegate(r, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(r, \"mouseout\",\n                        function() {\n                            n.hide()\n                        })\n                    } else {\n                        var l = i.children().hasClass(\"ds-share-aside-left\") ? \"slide-to-right\": \"slide-to-left\",\n                        c = i.children();\n                        if (!o.cssProperty(\"transition\")) {\n                            var u = i.children().hasClass(\"ds-share-aside-left\") ? \"left\": \"right\";\n                            i.delegate(\".ds-share-aside-toggle\", \"mouseover\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) - 195 : e[u] = 0,\n                                c.animate(e, 200)\n                            }),\n                            i.delegate(\".ds-share-aside-inner\", \"mouseleave\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) + 230 : e[u] = -229,\n                                c.animate(e, 200)\n                            })\n                        }\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseover\",\n                        function() {\n                            c.addClass(l)\n                        }),\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseleave\",\n                        function() {\n                            c.removeClass(l)\n                        })\n                    }\n                    i.delegate(\"a\", \"click\",\n                    function(t) {\n                        var s = B(this).data(\"service\");\n                        if (!i.data(\"url\")) return void alert(\"请设置data-url\");\n                        if (\"wechat\" === s) {\n                            var r = a() + \"/api/qrcode/getImage.png\",\n                            n = \"?size=240&text=\" + i.data(\"url\"),\n                            d = E(et[\"dialog-qrcode\"]({\n                                qrcode_url: r + n,\n                                url: i.data(\"url\")\n                            }));\n                            d.el.find(\".ds-dialog\").css(\"width\", \"320px\")\n                        } else {\n                            var l = a() + \"/share-proxy/?\" + o.param({\n                                service: B(this).data(\"service\"),\n                                thread_key: i.data(\"threadKey\"),\n                                title: i.data(\"title\"),\n                                images: i.data(\"images\"),\n                                content: i.data(\"content\"),\n                                url: i.data(\"url\")\n                            });\n                            e.open(l, \"_blank\")\n                        }\n                        t.preventDefault(),\n                        t.stopPropagation()\n                    })\n                }\n            });\n            var it = 0;\n            S.initSelector = function(e, t) {\n                function s(e) {\n                    W(e),\n                    o.extend(z, e.options),\n                    dt.set(e.response)\n                }\n                var a = []; ! q() || !B.isReady && j || B(e).each(function(e, s) {\n                    var i = B(s);\n                    if (!i.data(\"initialized\")) {\n                        i.data(\"initialized\", !0);\n                        var r = new st[t.type](i, t);\n                        if (at.push(r), \"ThreadCount\" === t.type) {\n                            var n = i.attr(\"data-thread-key\");\n                            i.attr(\"data-channel-key\") && (n = i.attr(\"data-channel-key\") + \":\" + n),\n                            a.push(n),\n                            dt[n] || (dt[n] = new G({})),\n                            dt[n].on(\"reset\",\n                            function() {\n                                r.onload(this)\n                            })\n                        } else if (r.uri) {\n                            var o = {};\n                            B.each(r.params.split(\" \"),\n                            function(e, t) {\n                                o[t.replace(/-/g, \"_\")] = i.attr(\"data-\" + t) || i.data(t)\n                            }),\n                            A.get(r.uri, H(o),\n                            function(e) {\n                                r.load(e)\n                            })\n                        }\n                    }\n                }),\n                a.length && A.get(\"threads/counts\", H({\n                    threads: a.join(\",\")\n                }), s)\n            },\n            (S.initView = function() {\n                B.each(O, S.initSelector)\n            })(),\n            B(function() {\n                if (!c) {\n                    if (!q()) return C.error(\"缺少 duoshuoQuery 的定义\");\n                    C.warn(\"请在加载多说 embed.js 之前定义 duoshuoQuery\")\n                }\n                setInterval(function() {\n                    B(\".ds-time\").each(function() {\n                        var e = B(this).attr(\"datetime\");\n                        e && (this.innerHTML = S.elapsedTime(e))\n                    })\n                },\n                2e4),\n                c.ondomready && c.ondomready(),\n                S.initView(),\n                !it && c.short_name && A.get(\"analytics/ping\", H({}), W)\n            })\n        })\n    }\n} (window, document);\n","date":"2016-03-10T08:59:00.669Z","updated":"2016-03-10T08:59:00.669Z","path":"js/duoshuo.js","layout":"false","title":"","comments":1,"_id":"cilm1nzuc0000iksc7ljohxu2","content":"//管理员判断开始\nfunction sskadmin(e) {\n    var ssk = '';\n    if (e.user_id == 6260328050223743746) {\n        if (checkMobile()) {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span><br><br>';\n        } else {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span>';\n        }\n    } else {\n        if (checkMobile()) {\n            ssk = '<br><br>';\n        }\n    }\n    return ssk;\n}\n//管理员判断结束\n//移动客户端判断开始\nfunction checkMobile() {\n    var isiPad = navigator.userAgent.match(/iPad/i) != null;\n    if (isiPad) {\n        return false;\n    }\n    var isMobile = navigator.userAgent.match(/iphone|android|phone|mobile|wap|netfront|x11|java|opera mobi|opera mini|ucweb|windows ce|symbian|symbianos|series|webos|sony|blackberry|dopod|nokia|samsung|palmsource|xda|pieplus|meizu|midp|cldc|motorola|foma|docomo|up.browser|up.link|blazer|helio|hosin|huawei|novarra|coolpad|webos|techfaith|palmsource|alcatel|amoi|ktouch|nexian|ericsson|philips|sagem|wellcom|bunjalloo|maui|smartphone|iemobile|spice|bird|zte-|longcos|pantech|gionee|portalmmm|jig browser|hiptop|benq|haier|^lct|320x320|240x320|176x220/i) != null;\n    if (isMobile) {\n        return true;\n    }\n    return false;\n}\n//移动客户端判断结束\n//显UA开始\nfunction ua(e) {\n    var r = new Array;\n    var outputer = '';\n    if (r = e.match(/FireFox\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_firefox\"><i class=\"fa fa-firefox\"></i> FireFox'\n    } else if (r = e.match(/Maxthon([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_maxthon\"><i class=\"fa fa-globe\"></i> Maxthon'\n    } else if (r = e.match(/BIDUBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> 百度浏览器'\n    } else if (r = e.match(/UBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/UCBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/MetaSr/ig)) {\n        outputer = '<span class=\"ua_sogou\"><i class=\"fa fa-globe\"></i> 搜狗浏览器'\n    } else if (r = e.match(/2345Explorer/ig)) {\n        outputer = '<span class=\"ua_2345explorer\"><i class=\"fa fa-globe\"></i> 2345王牌浏览器'\n    } else if (r = e.match(/2345chrome/ig)) {\n        outputer = '<span class=\"ua_2345chrome\"><i class=\"fa fa-globe\"></i> 2345加速浏览器'\n    } else if (r = e.match(/LBBROWSER/ig)) {\n        outputer = '<span class=\"ua_lbbrowser\"><i class=\"fa fa-globe\"></i> 猎豹安全浏览器'\n    } else if (r = e.match(/MicroMessenger\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-weixin\"></i> 微信'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQ\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/MiuiBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_mi\"><i class=\"fa fa-globe\"></i> Miui浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/Chrome([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_chrome\"><i class=\"fa fa-chrome\"></i> Chrome'\n        /*.split('.')[0]*/\n    } else if (r = e.match(/safari\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_apple\"><i class=\"fa fa-safari\"></i> Safari'\n    } else if (r = e.match(/Opera[\\s|\\/]([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_opera\"><i class=\"fa fa-opera\"></i> Opera'\n    } else if (r = e.match(/Trident\\/7.0/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE 11'\n    } else if (r = e.match(/MSIE\\s([^\\s|;]+)/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE' + ' ' + r[0]\n        /*.replace('MSIE', '').split('.')[0]*/\n    } else {\n        outputer = '<span class=\"ua_other\"><i class=\"fa fa-globe\"></i> 其它浏览器'\n    }\n    if (checkMobile()) {\n        Mobile = '<br><br>';\n    } else {\n        Mobile = '';\n    }\n    return outputer + \"</span>\" + Mobile;\n}\nfunction os(e) {\n    var os = '';\n    if (e.match(/win/ig)) {\n        if (e.match(/nt 5.1/ig)) {\n            os = '<span class=\"os_xp\"><i class=\"fa fa-windows\"></i> Windows XP'\n        } else if (e.match(/nt 6.1/ig)) {\n            os = '<span class=\"os_7\"><i class=\"fa fa-windows\"></i> Windows 7'\n        } else if (e.match(/nt 6.2/ig)) {\n            os = '<span class=\"os_8\"><i class=\"fa fa-windows\"></i> Windows 8'\n        } else if (e.match(/nt 6.3/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 8.1'\n        } else if (e.match(/nt 10.0/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 10'\n        } else if (e.match(/nt 6.0/ig)) {\n            os = '<span class=\"os_vista\"><i class=\"fa fa-windows\"></i> Windows Vista'\n        } else if (e.match(/nt 5/ig)) {\n            os = '<span class=\"os_2000\"><i class=\"fa fa-windows\"></i> Windows 2000'\n        } else {\n            os = '<span class=\"os_windows\"><i class=\"fa fa-windows\"></i> Windows'\n        }\n    } else if (e.match(/android/ig)) {\n        os = '<span class=\"os_android\"><i class=\"fa fa-android\"></i> Android'\n    } else if (e.match(/ubuntu/ig)) {\n        os = '<span class=\"os_ubuntu\"><i class=\"fa fa-desktop\"></i> Ubuntu'\n    } else if (e.match(/linux/ig)) {\n        os = '<span class=\"os_linux\"><i class=\"fa fa-linux\"></i> Linux'\n    } else if (e.match(/mac/ig)) {\n        os = '<span class=\"os_mac\"><i class=\"fa fa-apple\"></i> Mac OS X'\n    } else if (e.match(/unix/ig)) {\n        os = '<span class=\"os_unix\"><i class=\"fa fa-desktop\"></i> Unix'\n    } else if (e.match(/symbian/ig)) {\n        os = '<span class=\"os_nokia\"><i class=\"fa fa-mobile\"></i> Nokia SymbianOS'\n    } else {\n        os = '<span class=\"os_other\"><i class=\"fa fa-desktop\"></i> 其它操作系统'\n    }\n    return os + \"</span>\";\n}\n//显UA结束\n!\nfunction(e, t, s) {\n    function a() {\n        return c.short_name ? g + \"//\" + c.short_name + \".\" + S.DOMAIN: S.REMOTE\n    }\n    function i() {\n        function t() {\n            for (var t; t = y.shift();) {\n                var a = t.url,\n                i = new s(t.title, {\n                    dir: \"auto\",\n                    icon: t.iconUrl,\n                    body: t.body\n                });\n                try {\n                    i.onclick = function() {\n                        e.focus(),\n                        h.href = a,\n                        i.close()\n                    }\n                } catch(r) {}\n                setTimeout(function() {\n                    i.close && i.close()\n                },\n                8e3)\n            }\n        }\n        var s = e.Notification;\n        \"Notification\" in e && \"denied\" !== s.permission && (\"granted\" === s.permission && t(), s.requestPermission(function(e) {\n            \"granted\" === e && t()\n        }))\n    }\n    function r() {\n        return 0 == nt.data.user_id\n    }\n    function n(e) {\n        S.theme = e,\n        \"none\" != e && o.injectStylesheet(S.STATIC_URL + \"/styles/embed\" + (e ? \".\" + e + \".css?\" + U[e] : \".\" + short_name) + \".css\")\n    }\n    var o = {},\n    d = t.getElementsByTagName(\"head\")[0] || t.getElementsByTagName(\"body\")[0];\n    if (o.extend = function(e, t) {\n        for (var s in t) e[s] = t[s];\n        return e\n    },\n    o.injectScript = function(a, i) {\n        var r = t.createElement(\"script\"),\n        n = t.head || t.getElementsByTagName(\"head\")[0] || t.documentElement;\n        r.type = \"text/javascript\",\n        r.src = a,\n        r.async = \"async\",\n        r.charset = \"utf-8\",\n        i && (r.onload = r.onreadystatechange = function(t, a) {\n            var o = a || !r.readyState || /loaded|complete/.test(r.readyState);\n            o && (r.onload = r.onreadystatechange = null, n && r.parentNode && n.removeChild(r), r = s, a || i.call(e))\n        }),\n        n.insertBefore(r, n.firstChild)\n    },\n    o.injectStylesheet = function(e) {\n        var s = t.createElement(\"link\");\n        s.type = \"text/css\",\n        s.rel = \"stylesheet\",\n        s.href = e,\n        d.appendChild(s)\n    },\n    o.injectStyle = function(e) {\n        var s = t.createElement(\"style\");\n        return s.type = \"text/css\",\n        d.appendChild(s),\n        e = e.replace(/\\}/g, \"}\\n\"),\n        s.styleSheet ? s.styleSheet.cssText = e: s.appendChild(t.createTextNode(e)),\n        s\n    },\n    o.getCookie = function(e) {\n        for (var a, i, r, n = \" \" + e + \"=\",\n        o = t.cookie.split(\";\"), d = 0; d < o.length; d++) if (a = \" \" + o[d], i = a.indexOf(n), i >= 0 && i + n.length == (r = a.indexOf(\"=\") + 1)) return decodeURIComponent(a.substring(r, a.length).replace(/\\+/g, \"\"));\n        return s\n    },\n    o.param = function(e) {\n        var t = [];\n        for (var a in e) e[a] != s && t.push(a + \"=\" + encodeURIComponent(e[a]));\n        return t.join(\"&\")\n    },\n    o.cssProperty = function(e, s) {\n        var a = (t.body || t.documentElement).style;\n        if (\"undefined\" == typeof a) return ! 1;\n        if (\"string\" == typeof a[e]) return s ? e: !0;\n        for (var i = [\"Moz\", \"Webkit\", \"ms\"], e = e.charAt(0).toUpperCase() + e.substr(1), r = 0; r < i.length; r++) if (\"string\" == typeof a[i[r] + e]) return s ? i[r] + e: !0\n    },\n    !e.DUOSHUO) {\n        for (var l in Object.prototype) return alert(\"Object.prototype 不为空，请不要给 Object.prototype 设置方法\");\n        var c, u, p = e.JSON,\n        h = e.location,\n        f = e.XMLHttpRequest,\n        m = p && p.stringify && e.localStorage,\n        v = e.navigator.userAgent,\n        g = \"https:\" == t.location.protocol ? \"https:\": \"http:\",\n        b = 0,\n        y = [],\n        _ = u = function() {\n            function e(e) {\n                return t[e] || \"&amp;\"\n            }\n            var t = {\n                \"<\": \"&lt;\",=\"\" \"=\"\">\": \"&gt;\",\n                '\"': \"&quot;\",\n                \"'\": \"&#x27;\",\n                \"`\": \"&#x60;\"\n            },\n            s = /&(?!\\w+;)|[<>\"'`]/g,\n            a = /[&<>\"'`]/;\n            return function(t) {\n                return null == t || t === !1 ? \"\": a.test(t) ? t.replace(s, e) : t\n            }\n        } (),\n        k = function(e) {\n            if (e.match(/^(http|https):/)) return e;\n            var s = t.createElement(\"a\");\n            return s.href = e,\n            P.hrefNormalized ? s.href: s.getAttribute(\"href\", 4)\n        },\n        w = function(e) {\n            return function() {\n                return e\n            }\n        },\n        x = function() {\n            for (var e = {},\n            t = 0; t < arguments.length; t++) arguments[t] && o.extend(e, arguments[t]);\n            var s = o.param(e);\n            return s ? \"?\" + s: \"\"\n        },\n        T = function() {\n            var e = o.getCookie(\"duoshuo_token\");\n            return e ? {\n                jwt: e\n            }: c.remote_auth ? {\n                short_name: c.short_name,\n                remote_auth: c.remote_auth\n            }: s\n        },\n        q = function() {\n            if (!c && (c = e.duoshuoQuery)) {\n                if (!c.short_name || \"your_duoshuo_short_name\" === c.short_name) return c = s,\n                void alert(\"你还没有设置多说域名(duoshuoQuery.short_name)，填入已有域名或创建新站点：http://duoshuo.com/create-site/\");\n                it.trigger(\"queryDefined\")\n            }\n            return c\n        },\n        C = function(e) {\n            return e && e.error && e.warn ? e: {\n                error: function() {},\n                log: function() {},\n                warn: function() {}\n            }\n        } (e.console),\n        S = e.DUOSHUO = {\n            sourceName: {\n                weibo: \"新浪微博\",\n                qq: \"QQ\",\n                qzone: \"QQ空间\",\n                qqt: \"腾讯微博\",\n                renren: \"人人网\",\n                douban: \"豆瓣网\",\n                kaixin: \"开心网\",\n                sohu: \"搜狐微博\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            serviceNames: {\n                weibo: \"微博\",\n                qq: \"QQ\",\n                douban: \"豆瓣\",\n                renren: \"人人\",\n                kaixin: \"开心\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            parseDate: function(e) {\n                return e.parse(\"2011-10-28T00:00:00+08:00\") &&\n                function(t) {\n                    return new e(t)\n                } || e.parse(\"2011/10/28T00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\"))\n                } || e.parse(\"2011/10/28 00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\").replace(\"T\", \" \"))\n                } ||\n                function(t) {\n                    return new e(t)\n                }\n            } (Date),\n            fullTime: function(e) {\n                var t = S.parseDate(e);\n                return t.getFullYear() + \"年\" + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日 \" + t.toLocaleTimeString()\n            },\n            elapsedTime: function(e) {\n                var t = S.parseDate(e),\n                s = new Date,\n                a = (s - b - t) / 1e3;\n                return 10 > a ? \"刚刚\": 60 > a ? Math.round(a) + \"秒前\": 3600 > a ? Math.round(a / 60) + \"分钟前\": 86400 > a ? Math.round(a / 3600) + \"小时前\": (s.getFullYear() == t.getFullYear() ? \"\": t.getFullYear() + \"年\") + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日\"\n            },\n            compileStyle: function(e) {\n                var t = \"\",\n                s = {};\n                if (s.textbox = \"#ds-thread #ds-reset .ds-replybox .ds-textarea-wrapper\", !e) return t;\n                for (var a in e) t += s[a] + \"{\" + e[a] + \"}\\n\";\n                return t\n            },\n            init: function(e, t) {\n                e && !O[e] && (O[e] = t || {\n                    type: \"EmbedThread\"\n                }),\n                S.initView && S.initView()\n            }\n        },\n        j = t.all,\n        P = S.support = function() {\n            var s = t.createElement(\"div\");\n            s.innerHTML = '<a href=\"/a\" style=\"opacity:.55;\">a</a><input type=\"checkbox\">';\n            var a = s.getElementsByTagName(\"a\")[0],\n            i = s.getElementsByTagName(\"input\")[0],\n            r = {\n                placeholder: \"placeholder\" in i,\n                touch: \"ontouchstart\" in e || \"onmsgesturechange\" in e,\n                opacity: /^0.55$/.test(a.style.opacity),\n                hrefNormalized: \"/a\" === a.getAttribute(\"href\"),\n                iOS: v.match(/ \\((iPad|iPhone|iPod);( U;)? CPU( iPhone)? OS /),\n                android: v.match(/ \\(Linux; U; Android /)\n            };\n            return r.ie6 = !f && \"undefined\" == typeof s.style.maxHeight,\n            r.authInWin = e.postMessage && e.screen.width > 800 && !r.iOS && !r.android && h.origin,\n            r\n        } (),\n        O = S.selectors = {\n            \".ds-thread\": {\n                type: \"EmbedThread\"\n            },\n            \".ds-recent-comments\": {\n                type: \"RecentComments\"\n            },\n            \".ds-recent-visitors\": {\n                type: \"RecentVisitors\"\n            },\n            \".ds-top-users\": {\n                type: \"TopUsers\"\n            },\n            \".ds-top-threads\": {\n                type: \"TopThreads\"\n            },\n            \".ds-login\": {\n                type: \"LoginWidget\"\n            },\n            \".ds-thread-count\": {\n                type: \"ThreadCount\"\n            },\n            \".ds-share\": {\n                type: \"ShareWidget\"\n            }\n        },\n        E = S.openDialog = function(e) {\n            return S.dialog !== s && S.dialog.el.remove(),\n            S.dialog = new st.Dialog(et.dialog(e)).open()\n        },\n        L = S.smilies = {};\n        S.require = function() {\n            function t(e) {\n                var t = R[e] ? \"?\" + R[e] + \".js\": \"\";\n                return S.STATIC_URL + \"/libs/\" + e + \".js\" + t\n            }\n            var s = {\n                mzadxN: \"undefined\" != typeof mzadxN\n            };\n            return \"undefined\" != typeof jQuery && jQuery.fn.jquery >= \"1.5\" && (s[\"embed.compat\"] = !0, S.jQuery = e.jQuery),\n            function(e, a) {\n                if (\"string\" == typeof e) s[e] ? a() : o.injectScript(t(e),\n                function() {\n                    s[e] = !0,\n                    a()\n                });\n                else if (\"object\" == typeof e) {\n                    var i, r = !0;\n                    for (i = 0; i < e.length; i++)(function(n) {\n                        s[e[i]] || (r = !1, o.injectScript(t(n),\n                        function() {\n                            s[n] = !0;\n                            for (var t = 0; t < e.length; t++) if (!s[e[t]]) return;\n                            a()\n                        }))\n                    })(e[i]);\n                    r && a()\n                }\n            }\n        } ();\n        for (var N = 0,\n        I = [\"EmbedThread\", \"RecentComments\", \"RecentVisitors\", \"TopUsers\", \"TopThreads\", \"LoginWidget\", \"ThreadCount\"]; N < I.length; N++) S[I[N]] = function(e) {\n            return function(t, s) {\n                s = s || {},\n                s.type = e,\n                t && !O[t] && (O[t] = s),\n                S.initSelector && S.initSelector(t, s)\n            }\n        } (I[N]),\n        S[\"create\" + I[N]] = function(e) {\n            return function(s, a) {\n                var i = t.createElement(s);\n                for (var r in a) i.setAttribute(\"data-\" + r, a[r]);\n                return S[e](i),\n                i\n            }\n        } (I[N]);\n        S.RecentCommentsWidget = S.RecentComments;\n        var A = S.API = {\n            ajax: function(e, t, i, r, n) {\n                function d(e) {\n                    var t = e.getResponseHeader(\"Date\");\n                    t && (b = new Date - new Date(t))\n                }\n                function l(e, t, s) {\n                    var a, i, o, l = t;\n                    if (e >= 200 && 300 > e || 304 === e) if (304 === e) l = \"notmodified\",\n                    o = !0;\n                    else try {\n                        a = p.parse(s),\n                        l = \"success\",\n                        o = !0\n                    } catch(c) {\n                        l = \"parsererror\",\n                        i = c\n                    } else {\n                        i = l,\n                        (!l || e) && (l = \"error\", 0 > e && (e = 0));\n                        try {\n                            a = p.parse(s)\n                        } catch(c) {\n                            l = \"parsererror\",\n                            i = c\n                        }\n                    }\n                    o ? r && r(a) : \"parseerror\" === l ? C.error(\"解析错误: \" + s) : (C.error(\"出错啦(\" + a.code + \"): \" + a.errorMessage), n && n(a), a.errorTrace && C.error(a.errorTrace)),\n                    d(m)\n                }\n                var u = o.getCookie(\"duoshuo_token\");\n                i = i || {},\n                i.v = S.version,\n                u ? i.jwt = u: c.remote_auth && (i.remote_auth = c.remote_auth);\n                var h = f && p && p.parse;\n                if (h) {\n                    var m = new f,\n                    v = !!m && \"withCredentials\" in m;\n                    if (v) {\n                        var g;\n                        return m.open(e, a() + \"/api/\" + t + \".json\" + (\"GET\" == e ? \"?\" + o.param(i) : \"\"), !0),\n                        m.withCredentials = !0,\n                        m.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\"),\n                        m.send(\"GET\" == e ? null: o.param(i)),\n                        g = function(e, t) {\n                            var a, i, r, n;\n                            try {\n                                if (g && (t || 4 === m.readyState)) if (g = s, t) 4 !== m.readyState && m.abort();\n                                else {\n                                    a = m.status,\n                                    r = m.getAllResponseHeaders();\n                                    try {\n                                        n = m.responseText\n                                    } catch(e) {}\n                                    try {\n                                        i = m.statusText\n                                    } catch(o) {\n                                        i = \"\"\n                                    }\n                                }\n                            } catch(d) {\n                                t || l( - 1, d)\n                            }\n                            n && l(a, i, n, r)\n                        },\n                        void(4 === m.readyState ? g() : m.onreadystatechange = g)\n                    }\n                }\n                \"GET\" != e && (i._method = \"POST\");\n                var y = \"cb_\" + Math.round(1e6 * Math.random());\n                A[y] = function(e) {\n                    switch (e.code) {\n                    case 0:\n                        r && r(e);\n                        break;\n                    default:\n                        n && n(e),\n                        C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                        e.errorTrace && C.error(e.errorTrace)\n                    }\n                },\n                i.callback = \"DUOSHUO.API['\" + y + \"']\",\n                o.injectScript(a() + \"/api/\" + t + \".jsonp?\" + o.param(i))\n            },\n            get: function(e, t, s, a) {\n                return this.ajax(\"GET\", e, t, s, a)\n            },\n            post: function(e, t, s, a) {\n                return this.ajax(\"POST\", e, t, s, a)\n            }\n        },\n        M = S.ws = {\n            messages: [],\n            send: function(s) {\n                if (! (\"WebSocket\" in e && p)) return ! 1;\n                var a = this;\n                if (a.messages.push(p.stringify(s)), !a.webSocket) {\n                    var r = \"https:\" === t.location.protocol ? \"wss://ws.duoshuo.com:8202/\": \"ws://ws.duoshuo.com:8201/\",\n                    n = a.webSocket = new WebSocket(r);\n                    n.onopen = function() {\n                        var e, t = 1 === n.readyState;\n                        if (t) for (; e = a.messages.shift();) n.send(e)\n                    },\n                    n.onmessage = function(e) {\n                        try {\n                            var t = p.parse(e.data)\n                        } catch(s) {\n                            return\n                        }\n                        switch (t.type) {\n                        case \"post\":\n                            for (var a, r = 0; r < S.pagelets.length; r++) a = S.pagelets[r],\n                            a.threadId == t.thread_id && a.onMessage(t);\n                            break;\n                        case \"notification\":\n                            y.push(t),\n                            i()\n                        }\n                    },\n                    e.addEventListener(\"beforeunload\",\n                    function() {\n                        n.close()\n                    })\n                }\n                a.webSocket.onopen()\n            }\n        };\n        S.DOMAIN = \"duoshuo.com\",\n        S.STATIC_URL = g + \"//static.duoshuo.com\",\n        S.REMOTE = g + \"//duoshuo.com\",\n        S.version = \"15.11.15\";\n        var U = {\n            \"default\": \"79dc948b\",\n            dark: \"ddc346d8\",\n            bluebox: \"0f0f035c\",\n            newhua: \"dc453ca2\"\n        },\n        R = {\n            \"embed.compat\": \"24f8ca3f\",\n            smilies: \"921e8eda\"\n        },\n        z = {\n            post: \"发布\",\n            posting: \"正在发布\",\n            settings: \"设置\",\n            reply: \"回复\",\n            like: \"顶\",\n            repost: \"转发\",\n            report: \"举报\",\n            \"delete\": \"删除\",\n            reply_to: \"回复 \",\n            reposts: \"转发\",\n            comments: \"评论\",\n            floor: \"楼\",\n            latest: \"最新\",\n            earliest: \"最早\",\n            hottest: \"最热\",\n            share_to: \"分享到:\",\n            leave_a_message: \"说点什么吧…\",\n            no_comments_yet: \"还没有评论，沙发等你来抢\",\n            repost_reason: \"请输入转发理由\",\n            hot_posts_title: \"被顶起来的评论\",\n            comments_zero: \"暂无评论\",\n            comments_one: \"1条评论\",\n            comments_multiple: \"{num}条评论\",\n            reposts_zero: \"暂无转发\",\n            reposts_one: \"1条转发\",\n            reposts_multiple: \"{num}条转发\",\n            weibo_reposts_zero: \"暂无新浪微博\",\n            weibo_reposts_one: \"1条新浪微博\",\n            weibo_reposts_multiple: \"{num}条新浪微博\",\n            qqt_reposts_zero: \"暂无腾讯微博\",\n            qqt_reposts_one: \"1条腾讯微博\",\n            qqt_reposts_multiple: \"{num}条腾讯微博\"\n        },\n        D = {\n            get: function(e) {\n                return m ? m[e] : void 0\n            },\n            save: function(e, t) {\n                if (m) try {\n                    m.removeItem(e),\n                    m[e] = p.stringify(t),\n                    m.removeItem(e + \":timestamp\"),\n                    m[e + \":timestamp\"] = Math.floor((new Date - b) / 1e3)\n                } catch(s) {}\n            }\n        },\n        W = S.loadRequire = function(t) {\n            if (t.visitor && (!nt.data && t.visitor.user_id && e.Notification && M.send({\n                logged_user_id: t.visitor.user_id\n            }), nt.reset(t.visitor)), t.site && (rt.reset(t.site), D.save(\"ds_site_\" + c.short_name, t.site)), !S.theme && rt.data.theme && n(rt.data.theme), t.lang && (o.extend(z, t.lang), D.save(\"ds_lang_\" + c.short_name, t.lang)), t.stylesheets) for (var s = 0; s < t.stylesheets.length; s++) o.injectStylesheet(t.stylesheets[s]);\n            if (t.nonce && (S.nonce = t.nonce), t.style && o.injectStyle((t.style || \"\") + S.compileStyle(c.component_style)), t.unread && ot.reset(t.unread), t.warnings) for (var s = 0; s < t.warnings.length; s++) C.warn(t.warnings[s])\n        },\n        H = 0,\n        B = S.Class = function() {};\n        B.extend = function(e) {\n            function t() { ! H && this.init && this.init.apply(this, arguments)\n            }\n            H = 1;\n            var s = new this;\n            H = 0;\n            for (var a in e) s[a] = e[a];\n            return t.prototype = s,\n            t.prototype.constructor = t,\n            t.extend = arguments.callee,\n            t\n        };\n        var J = S.Event = B.extend({\n            on: function(e, t) {\n                var a = this.handlers || (this.handlers = {});\n                return a[e] === s && (a[e] = []),\n                a[e].push(t),\n                this\n            },\n            trigger: function(e, t) {\n                var s = (this.handlers || (this.handlers = {}))[e];\n                if (s) for (var a = 0; a < s.length && s[a].call(this, t) !== !1; a++);\n                return this\n            }\n        }),\n        Q = S.Widget = J.extend({\n            init: function(e, t) {\n                this.el = e,\n                this.options = t || {},\n                this.render()\n            },\n            render: function() {},\n            reset: function() {},\n            load: function(e) {\n                switch (e.code) {\n                case 0:\n                    W(e);\n                    var t = this.prepare(e);\n                    t.options = o.extend(this.options, e.options),\n                    this.onload(t);\n                    break;\n                default:\n                    this.onError(e)\n                }\n            },\n            onload: function(e) {\n                this.el.html(et[this.tmpl](e))\n            },\n            prepare: function(e) {\n                return e\n            },\n            onMessage: function() {},\n            onError: function(e) {\n                C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                e.errorTrace && C.error(e.errorTrace)\n            }\n        }),\n        V = S.Model = J.extend({\n            init: function(e) {\n                this.data = e\n            },\n            reset: function(e) {\n                this.data = e,\n                this.trigger(\"reset\")\n            },\n            remove: function(e) {\n                this.data.splice(e, 1),\n                this.trigger(\"reset\")\n            },\n            set: function(e, t) {\n                if (t === s) for (var a in e) this.data[a] = e[a];\n                else this.data[e] = t;\n                return this.trigger(\"reset\"),\n                this\n            },\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        $ = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        F = V.extend({\n            toJSON: function() {\n                var e = o.extend({},\n                this.data);\n                return e.theAuthor = ct[this.data.author_id] && ct[this.data.author_id].data || this.data.author,\n                e.parents = this.data.parents || [],\n                e\n            }\n        }),\n        G = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        Y = function(e) {\n            this.model = e\n        };\n        Y.prototype.set = function(e) {\n            for (var t in e) e[t] && (this[t] ? this[t].set(e[t]) : this[t] = new this.model(e[t]))\n        },\n        Y.prototype.get = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) s[t] = this[e[t]];\n            return s\n        },\n        Y.prototype.getJSON = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) this[e[t]] && s.push(this[e[t]].toJSON());\n            return s\n        };\n        var Z = {\n            userUrl: function(e) {\n                return e.url\n            },\n            avatarUrl: function(e) {\n                return e.avatar_url || rt.data.default_avatar_url\n            },\n            loginUrl: function(e, t) {\n                return t || (t = {}),\n                c.sso && c.sso.login && (t.sso = 1, t.redirect_uri = c.sso.login),\n                a() + \"/login/\" + e + \"/\" + x(t)\n            },\n            bindUrl: function(e) {\n                return a() + \"/bind/\" + e + \"/\" + x(c.sso && c.sso.login ? {\n                    sso: 1,\n                    redirect_uri: c.sso.login\n                }: null, T())\n            },\n            logoutUrl: function() {\n                return a() + \"/logout/\" + x(c.sso && c.sso.logout ? {\n                    sso: 1,\n                    redirect_uri: c.sso.logout\n                }: null)\n            }\n        },\n        X = [\"weixin\", \"weibo\", \"qq\", \"renren\"],\n        K = [\"douban\", \"kaixin\", \"baidu\", \"google\"],\n        et = S.templates = {\n            userAnchor: function(e) {\n                return e.url ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(e.url) + '\">' + _(e.name) + \"</a>\": _(e.name)\n            },\n            avatarImg: function(e, t) {\n                return '<img src=\"' + _(Z.avatarUrl(e, t)) + '\" alt=\"' + _(e.name) + '\" '=\"\" +=\"\" (t=\"\" ?=\"\" style=\"width:' + t + \" px;height:\"=\"\" t=\"\" 'px\"':=\"\" \"\")=\"\" \"=\"\">\"\n            },\n            avatar: function(e, t) {\n                var s = et.avatarImg(e, t),\n                i = Z.userUrl(e);\n                return i ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(i) + '\" '=\"\" +=\"\" (e.user_id=\"\" ?=\"\" \"=\"\" onclick=\"\\\"this.href='\"\" a()=\"\" user-url=\"\" ?user_id=\" + e.user_id + \" ';\\\"\":=\"\" \"\")=\"\" title=\"' + _(e.name) + '\">' + s + \"</a>\": s\n            },\n            timeText: function(e) {\n                return e ? '<span class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</span>\": \"\"\n            },\n            timeAnchor: function(e, t) {\n                return e ? '<a href=\"' + t + '\" target=\"_blank\" rel=\"nofollow\" class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</a>\": \"\"\n            },\n            serviceIcon: function(e, t) {\n                return '<a href=\"javascript:void(0)\" class=\"ds-service-icon' + (t ? \" -grey\":=\"\" \"\")=\"\" +=\"\" \"=\"\" ds-\"=\"\" e=\"\" '\"=\"\" data-service=\"' + e + '\" title=\"' + S.sourceName[e] + '\" target=\"_blank\" rel=\"external\"></a>'\n            },\n            poweredBy: function(e) {\n                return '<p class=\"ds-powered-by\"><a href=\"http://duoshuo.com\" target=\"_blank\" rel=\"nofollow\">' + _(e) + \"</a></p>\"\n            },\n            indicator: w('<div id=\"ds-indicator\"></div>'),\n            waitingImg: w('<div id=\"ds-waiting\"></div>'),\n            loginItem: function(e, t) {\n                var s = Z[t ? \"bindUrl\": \"loginUrl\"](e);\n                return '<li>    <a href=\"' + s + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + e + '\">' + S.serviceNames[e] + (nt.data.social_uid[e] ? ' <span class=\"ds-icon ds-icon-ok\"></span>': \"\") + \"</a></li>\"\n            }\n        },\n        tt = function(e) {\n            var t = [];\n            for (var s in e) t.push('<input type=\"hidden\" name=\"' + s + '\" value=\"' + _(e[s]) + '\">');\n            return t.join(\"\\n\")\n        };\n        et.commentList = function(e) {\n            var t = \"\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li class=\"ds-comment',\n            e.options.show_avatars && (t += \" ds-show-avatars\"),=\"\" t=\"\" +=\"\" data-post-id=\"\" a.post_id=\"\" '\"=\"\">',\n            e.options.show_avatars && (t += '<div class=\"ds-avatar\">' + et.avatar(a.theAuthor, e.options.avatar_size) + \"</div>\"),\n            t += '<div class=\"ds-meta\">' + et.userAnchor(a.theAuthor),\n            e.options.show_time && (t += et.timeText(a.created_at)),\n            t += \"</div>\",\n            t += e.options.show_title ? '<div class=\"ds-thread-title\">在 <a href=\"' + u(a.thread.url) + '#comments\">' + u(a.thread.title) + '</a> 中评论</div><div class=\"ds-excerpt\">' + a.message + \"</div>\": '<a class=\"ds-excerpt\" title=\"' + a.thread.title + ' 中的评论\" href=\"' + u(a.thread.url) + '#comments\">' + a.message + \"</a>\",\n            t += \"</li>\";\n            return t\n        },\n        et.ctxPost = function(e) {\n            var t = \"\";\n            return e.post && (t += '<li class=\"ds-ctx-entry\" ',=\"\" e.hidden=\"\" &&=\"\" (t=\"\" +=\" style=\"display:none\"\" ),=\"\" t=\"\" e.post.post_id=\"\" '\"=\"\"><div class=\"ds-avatar\">' + et.avatar(e.post.theAuthor || e.post.author) + '</div><div class=\"ds-ctx-body\"><div class=\"ds-ctx-head\">' + et.userAnchor(e.post.theAuthor || e.post.author) + et.timeAnchor(e.post.created_at, e.post.url), e.index >= 0 && (t += '<div class=\"ds-ctx-nth\" title=\"' + S.fullTime(e.post.created_at) + '\">' + (e.index + 1) + z.floor + \"</div>\"), t += '</div><div class=\"ds-ctx-content\">' + e.post.message, e.index >= 0 && (t += '　　　　　　　<div class=\"ds-comment-actions', e.post.vote > 0 && (t += \" ds-post-liked\"),=\"\" t=\"\" +=\"\">\" et.likepost(e.post)=\"\" '<a=\"\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '<a class=\"ds-post-reply\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"><span class=\"ds-icon ds-icon-reply\"></span>' + z.reply + \"</a></div>\"), t += \"</div></div></li>\"),\n            t\n        },\n        et[\"dialog-anonymous\"] = function(e) {\n            var t = '<h2>社交帐号登录</h2><div class=\"ds-icons-32\">',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\",\n            e.options.deny_anonymous || (t += '<h2>作为游客留言</h2><form><div class=\"ds-control-group\"><input type=\"text\" name=\"author_name\" id=\"ds-dialog-name\" value=\"' + u(nt.data.name) + '\" required><label for=\"ds-dialog-name\">名字(必填)</label></div>', e.options.require_guest_email && (t += '<div class=\"ds-control-group\"><input type=\"email\" name=\"author_email\" id=\"ds-dialog-email\" value=\"' + u(nt.data.email) + '\" required><label for=\"ds-dialog-email\">邮箱(必填)</label></div>'), e.options.require_guest_url && (t += '<div class=\"ds-control-group\"><input type=\"url\" name=\"author_url\" id=\"ds-dialog-url\" placeholder=\"http://\" value=\"' + u(nt.data.url) + '\"><label for=\"ds-dialog-url\">网址(可选)</label></div>'), t += '<button type=\"submit\">发布</button></form>'),\n            t\n        },\n        et[\"dialog-ask-for-auth\"] = function() {\n            var e = '<h2>社交帐号登录</h2><ul class=\"ds-service-list\">' + et.serviceList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul>\";\n            return e\n        },\n        et[\"dialog-bind-more\"] = function() {\n            var e = '<h2>绑定更多帐号</h2><ul class=\"ds-service-list\">' + et.serviceBindList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceBindList(K) + '</ul><div style=\"clear:both\"></div>';\n            return e\n        },\n        et[\"dialog-qrcode\"] = function(e) {\n            var t = '<h2>微信扫一扫，分享到朋友圈</h2><div class=\"ds-share-qrcode\" style=\"text-align:center;\"><img src=\"' + e.qrcode_url + '\" alt=\"' + e.url + '\"></div>';\n            return t\n        },\n        et[\"dialog-reposts\"] = function(e) {\n            var t = '<h2>转发到微博</h2><div class=\"ds-quote\"><strong>@' + u(e.post.theAuthor.name) + \"</strong>: \" + e.post.message + \"</div><form>\" + tt({\n                post_id: e.post.post_id\n            }) + '<div class=\"ds-textarea-wrapper\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.repost_reason) + '\">' + u(e.repostMessage) + '</textarea><pre class=\"ds-hidden-text\"></pre>';\n            return t += '</div><div class=\"ds-actions\">',\n            e.service ? t += tt({\n                \"service[]\": e.service\n            }) : (t += '<label><input type=\"checkbox\" name=\"service[]\" value=\"weibo\" ',=\"\" nt.data.social_uid.weibo=\"\" &&=\"\" (t=\"\" +=\" checked=\"checked\"\" ),=\"\" t=\"\" ,=\"\" nt.data.social_uid.qq=\"\" z.repost=\"\" \"<=\"\" button=\"\"></label></div></form>\"\n        },\n        et.dialog = function(e) {\n            var t = '<div class=\"ds-dialog\"><div class=\"ds-dialog-inner ds-rounded\"><div class=\"ds-dialog-body\">' + e + '</div><div class=\"ds-dialog-footer\"><a href=\"http://duoshuo.com/\" target=\"_blank\" class=\"ds-logo\"></a><span>社会化评论框</span></div><a class=\"ds-dialog-close\" href=\"javascript:void(0)\" title=\"关闭\" target=\"_blank\" rel=\"external\"></a></div></div>';\n            return t\n        },\n        et.hotPosts = function(e) {\n            var t = '<div class=\"ds-header ds-gradient-bg\">' + u(z.hot_posts_title) + \"</div><ul>\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += et.post({\n                post: a,\n                options: e.options\n            });\n            return t += \"</ul>\"\n        },\n        et.likePost = function(e) {\n            var t = '<a class=\"ds-post-likes\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"><span class=\"ds-icon ds-icon-like\"></span>' + z.like;\n            return e.likes > 0 && (t += \"(\" + e.likes + \")\"),\n            t += \"</a>\"\n        },\n        et.likeTooltip = function(e) {\n            var t = '<div class=\"ds-like-tooltip ds-rounded\"><p>很高兴你能喜欢，分享一下吧：</p><ul>';\n            for (var s in e.services) t += '<li><a class=\"ds-share-to-' + s + \" ds-service-link=\"\" ds-\"=\"\" +=\"\" s=\"\" '\"=\"\" href=\"' + a() + \" share-proxy=\"\" ?\"=\"\" o.param({=\"\" service:=\"\" s,=\"\" thread_id:=\"\" e.thread_id=\"\" })=\"\">' + e.services[s] + \"</a></li>\";\n            return t += '</ul><p class=\"ds-like-tooltip-footer\"><a class=\"ds-like-tooltip-close\">算了</a></p></div>'\n        },\n        et.loginButtons = function() {\n            var e = '<div class=\"ds-login-buttons\"><p>社交帐号登录:</p><div class=\"ds-social-links\"><ul class=\"ds-service-list\">' + et.serviceList(X) + '<li><a class=\"ds-more-services\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"external\">更多»</a></li></ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul></div></div>\";\n            return e\n        },\n        et.loginWidget = function(e) {\n            var t = '<div class=\"ds-icons-32\">',\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\"\n        },\n        et.meta = function(e) {\n            var t = '<div class=\"ds-meta\"><a href=\"javascript:void(0)\" class=\"ds-like-thread-button ds-rounded';\n            return e.user_vote > 0 && (t += \" ds-thread-liked\"),=\"\" t=\"\" +=\"\"><span class=\"ds-icon ds-icon-heart\"></span> <span class=\"ds-thread-like-text\">\" ,=\"\" target=\"_blank\" rel=\"external\"> 0 ? \"已喜欢\": \"喜欢\",\n            t += '</a></div></\":></span><span class=\"ds-thread-cancel-like\">取消喜欢</span><span class=\"ds-like-panel\"></span>'\n        },\n        et.notify = function(e) {\n            var t = '<div id=\"ds-reset\"><a class=\"ds-logo\" href=\"http://duoshuo.com/\" target=\"_blank\" title=\"多说\"></a><ul class=\"ds-notify-unread\"><li'; return=\"\" e.comments=\"\" ||=\"\" (t=\"\" +=\" style=\"display:none;\"\" ),=\"\" t=\"\" \"条新回复<=\"\" a=\"\"><li\", e.notifications=\"\" ||=\"\" (t=\"\" +=\" style=\"display:none;\"\" ),=\"\" t=\"\" \"条系统消息<=\"\" a=\"\"></li\",></li';></ul></div>\"\n        },\n        et.post = function(e) {\n            var t = \"\",\n            s = e.post,\n            i = e.options,\n            r = s.author;\n            if (t += '<li class=\"ds-post\" data-post-id=\"' + s.post_id + '\"><div class=\"ds-post-self\" data-post-id=\"' + s.post_id + '\" data-thread-id=\"' + s.thread_id + '\" data-root-id=\"' + s.root_id + '\" data-source=\"' + s.source + '\"><div class=\"ds-avatar\" ',=\"\" r.user_id=\"\" &&=\"\" (t=\"\" +=\" data-user-id=\"\" '\"'),=\"\" t=\"\" et.avatar(r),=\"\" s.sourcename[s.source]=\"\" ,=\"\" r.url=\"\" ?=\"\" (r.qqt_account=\"\" ||=\"\" \"\")=\"\" '\"=\"\" href=\"' + u(r.url) + '\" this.href=\"\" + a() + \"/user-url/?user_id=\" + r.user_id + \"\" ;\\\"\"),=\"\" u(r.name)=\"\" \"<=\"\" a=\"\">\") : (t += '<span class=\"ds-user-name\" ',=\"\" r.user_id=\"\" &&=\"\" (t=\"\" +=\" data-user-id=\"\" '\"'),=\"\" t=\"\" (r.qqt_account=\"\" ||=\"\" \"\")=\"\" '\"=\"\">' + u(r.name) + \"</span>\"), t += sskadmin(s.author) + \"<span class=\"\\\"ua\\\"\">\" + ua(s.agent) + \"</span><span class=\"\\\"ua\\\"\">\" + os(s.agent) + \"</span>\", t += \"</div>\", 1 == i.max_depth && i.show_context && s.parents.length) {\n                t += '<ol id=\"ds-ctx\">';\n                var n = lt.getJSON(s.parents);\n                if (n) for (var o, d = -1,\n                l = n.length - 1; l > d;) o = n[d += 1],\n                1 == d && s.parents.length > 2 && (t += '<li class=\"ds-ctx-entry\"><a href=\"javascript:void(0);\" class=\"ds-expand\" target=\"_blank\" rel=\"external\">还有' + (s.parents.length - 2) + \"条评论</a></li>\"),\n                t += et.ctxPost({\n                    post: o,\n                    index: d,\n                    hidden: d && d < s.parents.length - 1\n                });\n                t += \"</ol>\"\n            }\n            if (t += \"<p>\", s.parents.length >= i.max_depth && (!i.show_context || i.max_depth > 1) && s.parent_id && lt[s.parent_id] && (t += '<a class=\"ds-comment-context\" data-post-id=\"' + s.post_id + '\" data-parent-id=\"' + s.parent_id + '\">' + z.reply_to + u(lt[s.parent_id].toJSON().author.name) + \": </a>\"), t += s.message + '</p><div class=\"ds-comment-footer ds-comment-actions', s.vote > 0 && (t += \" ds-post-liked\"),=\"\" t=\"\" +=\"\">\" ,=\"\" ?=\"\" et.timeanchor(s.created_at,=\"\" s.url)=\"\" :=\"\" et.timetext(s.created_at),=\"\" \"duoshuo\"=\"=\" s.source=\"\" (t=\"\" z.reply=\"\" \"<=\"\" a=\"\">\" + et.likePost(s) + '<a class=\"ds-post-repost\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '</a><a class=\"ds-post-report\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"><span class=\"ds-icon ds-icon-report\"></span>' + z.report + \"</a>\", s.privileges[\"delete\"] && (t += '<a class=\"ds-post-delete\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"><span class=\"ds-icon ds-icon-delete\"></span>' + z[\"delete\"] + \"</a>\")) : (\"qqt\" == s.source || \"weibo\" == s.source) && (t += '<a class=\"ds-weibo-comments\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\">' + z.comments, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.comments + \"</span>)\"), t += '</a><a class=\"ds-weibo-reposts\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\">' + z.reposts, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.reposts + \"</span>)\"), t += \"</a>\"), t += \"</div></div>\", i.max_depth > 1 && (s.childrenArray || s.children) && \"weibo\" != s.source && \"qqt\" != s.source) {\n                t += '<ul class=\"ds-children\">';\n                var c = lt.getJSON(s.childrenArray || s.children);\n                if (c) for (var s, d = -1,\n                p = c.length - 1; p > d;) s = c[d += 1],\n                t += et.post({\n                    post: s,\n                    options: i\n                });\n                t += \"</ul>\"\n            }\n            return t += \"</li>\"\n        },\n        et.postListHead = function(e) {\n            var t = '<div class=\"ds-comments-info\"><div class=\"ds-sort\"><a class=\"ds-order-desc\">' + z.latest + '</a><a class=\"ds-order-asc\">' + z.earliest + '</a><a class=\"ds-order-hot\">' + z.hottest + '</a></div><ul class=\"ds-comments-tabs\"><li class=\"ds-tab\"><a class=\"ds-comments-tab-duoshuo ds-current\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"></a></li>';\n            return e.options.show_reposts && e.thread.reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-repost\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"></a></li>'),\n            t += \" \",\n            e.options.show_weibo && e.thread.weibo_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-weibo\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"></a></li>'),\n            t += \" \",\n            e.options.show_qqt && e.thread.qqt_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-qqt\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\"></a></li>'),\n            t += \"</ul></div>\"\n        },\n        et.recentVisitors = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"</div>\";\n            return t\n        },\n        et.replybox = function(e) {\n            var t = '<div class=\"ds-replybox\"><a class=\"ds-avatar\" ';=\"\" if=\"\" (t=\"\" +=\"r()\" ?=\"\" '=\"\" href=\"javascript:void(0);\" onclick=\"return false\" ':=\"\" settings=\"\" avatar=\"\" \"=\"\" x(t())=\"\" '\"=\"\" target=\"_blank\" title=\"设置头像\" ',=\"\" t=\"\" et.avatarimg(nt.data)=\"\" '<=\"\" a=\"\"><form method=\"post\">' + tt(e.params) + '<div class=\"ds-textarea-wrapper ds-rounded-top\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.leave_a_message) + '\"></textarea><pre class=\"ds-hidden-text\"></pre>', t += \"</div>\", t += '<div class=\"ds-post-toolbar\"><div class=\"ds-post-options ds-gradient-bg\"><span class=\"ds-sync\">', !r() && nt.data.repostOptions) {\n                t += '<input id=\"ds-sync-checkbox',\n                e.inline && (t += \" -inline\"),=\"\" t=\"\" +=\"\" type=\"checkbox\" name=\"repost\" \" ,=\"\" e.checked=\"\" &&=\"\" (t=\"\" ),=\"\" e.repostarray.join(\",\")=\"\" '\"=\"\"> <label for=\"ds-sync-checkbox',\n                e.inline && (t += \" -inline\"),=\"\" t=\"\" +=\"\">\" z.share_to=\"\" \"<=\"\" label=\"\">\";\n                for (var s in nt.data.repostOptions) t += et.serviceIcon(s, !nt.data.repostOptions[s])\n            }\n            return t += \"</label></span>\",\n            t += \"</div>\",\n            t += '<button class=\"ds-post-button\" type=\"submit\">' + u(z.post) + '</button><div class=\"ds-toolbar-buttons\">',\n            e.options.use_smilies && (t += '<a class=\"ds-toolbar-button ds-add-emote\" title=\"插入表情\"></a>'),\n            e.options.use_images && e.options.parse_html_enabled && (t += '<a class=\"ds-toolbar-button ds-add-image\" title=\"插入图片\"></a>'),\n            t += \"</div></div>\",\n            t += \"</form></a></div>\"\n        },\n        et.serviceBindList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.bindUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a],\n            nt.data.social_uid[a] && (t += ' <span class=\"ds-icon ds-icon-ok\"></span>'),\n            t += \"</a></li>\";\n            return t\n        },\n        et.serviceList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.loginUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a] + \"</a></li>\";\n            return t\n        },\n        et.shareWidget = function(e) {\n            var t = '<div class=\"ds-share-icons\"> <div class=\"ds-share-icons-inner\"> <ul class=\"ds-share-icons-16\"> ',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += ' <li> <a class=\"ds-' + a + '\" href=\"javascript:void(0);\" data-service=\"' + a + '\" target=\"_blank\" rel=\"external\">' + S.sourceName[a] + \"</a> </li> \";\n            return t += ' </ul> </div> <div class=\"ds-share-icons-footer\">' + e.copyright + \"</div></div>\"\n        },\n        et.smiliesTooltip = function(e) {\n            var t = '<div id=\"ds-smilies-tooltip\"><ul class=\"ds-smilies-tabs\">';\n            for (var s in e) t += \"<li><a>\" + s + \"</a></li>\";\n            return t += '</ul><div class=\"ds-smilies-container\"></div></div>'\n        },\n        et.toolbar = function() {\n            var e = '<div class=\"ds-toolbar\"><div class=\"ds-account-control\"><span class=\"ds-icon ds-icon-settings\"></span> <span>帐号管理</span><ul><li><a class=\"ds-bind-more\" href=\"javascript:void(0);\" style=\"border-top: none\" target=\"_blank\" rel=\"external\">绑定更多</a></li><li><a target=\"_blank\" href=\"' + S.REMOTE + \" settings=\"\" \"=\"\" +=\"\" x(t())=\"\" '\"=\"\">' + u(z.settings) + '</a></li><li><a rel=\"nofollow\" href=\"' + Z.logoutUrl() + '\" style=\"border-bottom: none\">登出</a></li></ul></div><div class=\"ds-visitor\">';\n            return e += nt.data.url ? '<a class=\"ds-visitor-name\" href=\"' + u(nt.data.url) + '\" target=\"_blank\">' + u(nt.data.name) + \"</a>\": '<span class=\"ds-visitor-name\">' + u(nt.data.name) + \"</span>\",\n            e += '<a class=\"ds-unread-comments-count\" href=\"javascript:void(0);\" title=\"新回复\" target=\"_blank\" rel=\"external\"></a></div></div>'\n        },\n        et.topThreads = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a target=\"_blank\" href=\"' + u(a.url) + '\" title=\"' + u(a.title) + '\">' + u(a.title) + \"</a></li>\";\n            return t\n        },\n        et.topUsers = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"<h4>\" + u(a.name) + \"</h4></div>\";\n            return t\n        },\n        et.userInfo = function(e) {\n            var t = '<a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \" user-url=\"\" ?user_id=\" + e.user_id + '\\';\" class=\"ds-avatar\" target=\"_blank\">' + et.avatarImg(e) + '</a><a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \" user-url=\"\" ?user_id=\" + e.user_id + '\\';\" class=\"ds-user-name ds-highlight\" target=\"_blank\">' + u(e.name) + \"</a>\";\n            for (var s in e.social_uid) t += '<a href=\"' + S.REMOTE + \" user-proxy=\"\" \"=\"\" +=\"\" s=\"\" e.social_uid[s]=\"\" '=\"\" target=\"_blank\" class=\"ds-service-icon ds-' + s + '\" title=\"' + S.sourceName[s] + '\"></a>';\n            return t += '<p class=\"ds-user-card-meta\"><a href=\"' + S.REMOTE + \" profile=\"\" \"=\"\" +=\"\" e.user_id=\"\" '=\"\" target=\"_blank\"><span class=\"ds-highlight\">' + e.comments + \"</span>条评论</a></p>\",\n            e.description && (t += '<p class=\"ds-user-description\">' + u(e.description) + \"</p>\"),\n            t\n        };\n        var st = S.Views = {},\n        at = (S.Callbacks = {},\n        S.pagelets = []),\n        it = S.events = new J,\n        rt = S.site = new V,\n        nt = S.visitor = new $,\n        ot = S.unread = new V,\n        dt = S.threadPool = new Y(G),\n        lt = S.postPool = new Y(F),\n        ct = S.userPool = new Y($);\n        it.on(\"queryDefined\",\n        function() {\n            var e = c.short_name;\n            if (c.theme && n(c.theme), m) {\n                var t = m[\"ds_site_\" + e],\n                s = m[\"ds_lang_\" + e];\n                t && rt.reset(p.parse(t)),\n                s && o.extend(z, p.parse(s))\n            }\n        }),\n        q(),\n        S.require(\"embed.compat\",\n        function() {\n            function i(e) {\n                e.stopPropagation()\n            }\n            function n(e) { (e.ctrlKey && 13 == e.which || 10 == e.which) && B(this.form).trigger(\"submit\")\n            }\n            function d() {\n                var e = B(this);\n                e.height(Math.max(54, e.next(\".ds-hidden-text\").text(this.value).height() + 27))\n            }\n            function l() {\n                if (P.authInWin) {\n                    var e = this.href.match(/\\/(login|bind)\\/(\\w+)\\//i);\n                    if (e && S.serviceNames[e[2]]) return ! b(e[2], this.href)\n                }\n            }\n            function u() {\n                var e, s, a, i, r, n = this,\n                o = 0,\n                d = 0;\n                t.selection && (s = t.selection.createRange(), s && s.parentElement() == n && (i = n.value.length, e = n.value.replace(/\\r\\n/g, \"\\n\"), a = n.createTextRange(), a.moveToBookmark(s.getBookmark()), r = n.createTextRange(), r.collapse(!1), a.compareEndPoints(\"StartToEnd\", r) > -1 ? o = d = i: (o = -a.moveStart(\"character\", -i), o += e.slice(0, o).split(\"\\n\").length - 1, a.compareEndPoints(\"EndToEnd\", r) > -1 ? d = i: (d = -a.moveEnd(\"character\", -i), d += e.slice(0, d).split(\"\\n\").length - 1)))),\n                B(n).data(\"ds-range-start\", o).data(\"ds-range-end\", d)\n            }\n            function p(e) {\n                return P.touch && e.addClass(\"ds-touch\"),\n                o.cssProperty(\"transition\") || e.addClass(\"ds-no-transition\"),\n                P.ie6 && e.addClass(\"ds-ie6\"),\n                P.opacity || e.addClass(\"ds-no-opacity\"),\n                e\n            }\n            function f(e) {\n                if (!P.placeholder) {\n                    var t = e.attr(\"placeholder\");\n                    e.val(t).focus(function() {\n                        this.value === t && (this.value = \"\")\n                    }).blur(function() {\n                        \"\" === this.value && (this.value = t)\n                    })\n                }\n                return e\n            }\n            function g(e) {\n                if (\"http://duoshuo.com\" === e.origin) switch (e.data.type) {\n                case \"login\":\n                    h.href = e.data.redirectUrl\n                }\n            }\n            function b(t, s) {\n                var a = {\n                    weibo: [760, 600],\n                    renren: [420, 322],\n                    qq: [504, 445],\n                    weixin: [450, 550],\n                    google: [600, 440]\n                } [t] || [550, 400];\n                return e.open(s + ( - 1 == s.indexOf(\"?\") ? \"?\": \"&\") + o.param({\n                    origin: h.origin || \"http://\" + h.host\n                }), \"_blank\", \"width=\" + a[0] + \",height=\" + a[1] + \",toolbar=no,menubar=no,location=yes\")\n            }\n            function y(e) {\n                var t = Z[r() ? \"loginUrl\": \"bindUrl\"](e);\n                P.authInWin && b(e, t) || (h.href = t)\n            }\n            function w() {\n                var e = E(et[\"dialog-ask-for-auth\"]({})).el.find(\".ds-dialog\").css(\"width\", \"300px\");\n                e.find(\"a.ds-service-link\").click(l)\n            }\n            function x(e, t, s, a) {\n                function i() {\n                    function e(e) {\n                        if (s && a) {\n                            var t = s.options,\n                            i = U(s.postList.el, e.response[a], t);\n                            \"asc\" == t.order == (\"top\" == t.formPosition) && S.scrollTo(i);\n                            var r = s.el.find(\".ds-comments-tab-\" + a + \" span.ds-highlight\");\n                            r.html(parseInt(r.html()) + 1)\n                        }\n                    }\n                    return a || l.find(\"[type=checkbox]:checked\")[0] ? (A.post(\"posts/repost\", S.toJSON(l), e), o.close(), !1) : (alert(\"还没有选发布到哪儿呢\"), !1)\n                }\n                function r() {\n                    var e = this.value;\n                    return this.checked && !nt.data.social_uid[\"qqt\" == e ? \"qq\": e] ? void y(e) : void 0\n                }\n                var o = E(et[\"dialog-reposts\"]({\n                    post: e.toJSON(),\n                    repostMessage: t,\n                    service: a\n                })),\n                l = o.el.find(\"form\");\n                return l.submit(i),\n                l.find(\".ds-actions [type=checkbox]\").change(r),\n                f(l.find(\"textarea\")).keyup(n).keyup(d).focus(),\n                !1\n            }\n            function T(e) {\n                var t = {\n                    \"unread-comments\": {\n                        title: \"新留言及回复\",\n                        apiUrl: \"users/unreadComments\",\n                        tmpl: function(e) {\n                            return e.thread ? '<li data-thread-id=\"' + e.thread.thread_id + '\">' + B.map(e.authors, et.userAnchor).join(\"、\") + ' 在 <a class=\"ds-read\" href=\"' + e.thread.url + '#comments\" target=\"_blank\">' + _(e.thread.title || \"无标题\") + '</a> 中回复了你 <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"external\">知道了</a></li>': \"\"\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-thread-id\");\n                            A.post(\"threads/read\", {\n                                thread_id: t\n                            }),\n                            ot.data.comments--\n                        }\n                    },\n                    \"unread-notifications\": {\n                        title: \"系统消息\",\n                        apiUrl: \"users/unreadNotifications\",\n                        tmpl: function(e) {\n                            return '<li data-notification-id=\"' + e.notification_id + '\" data-notification-type=\"' + e.type + '\">' + e.content + ' <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\" target=\"_blank\" rel=\"external\">知道了</a></li>'\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-notification-id\");\n                            A.post(\"notifications/read\", {\n                                notification_id: t\n                            }),\n                            ot.data.notifications--\n                        }\n                    }\n                } [e],\n                s = E(\"<h2>\" + t.title + '</h2><ul class=\"ds-unread-list\"></ul>');\n                s.on(\"close\", S.resetNotify);\n                var a = s.el.find(\".ds-unread-list\").delegate(\".ds-delete\", \"click\",\n                function() {\n                    return B(this).parent().remove(),\n                    0 === a.children().length && s.close(),\n                    !1\n                }).delegate(\".ds-read\", \"click\",\n                function() {\n                    t.read(B(this).parent())\n                });\n                B(\"#ds-notify\").hide(),\n                A.get(t.apiUrl, {},\n                function(e) {\n                    s.el.find(\".ds-unread-list\").html(B.map(e.response, t.tmpl).join(\"\\n\"))\n                })\n            }\n            function N() {\n                bubbleOutTimer && (clearTimeout(bubbleOutTimer), bubbleOutTimer = 0)\n            }\n            function I() {\n                bubbleOutTimer = setTimeout(function() {\n                    bubbleOutTimer = 0,\n                    X.detach()\n                },\n                400)\n            }\n            function U(e, t, s) {\n                return e.find(\".ds-post[data-post-id=\" + t.data.post_id + \"]\")[0] ? void 0 : (e.find(\".ds-post-placeholder\").remove(), B(et.post({\n                    post: t.toJSON(),\n                    options: s\n                })).hide()[\"asc\" == s.order ? \"appendTo\": \"prependTo\"](e).slideDown(function() {}))\n            }\n            function R(e, t) {\n                function s() {\n                    if (r()) return w(),\n                    !1;\n                    var e = B(this).parent(),\n                    t = e.hasClass(\"ds-post-liked\"),\n                    s = B(this).html().match(/\\((\\d+)\\)/),\n                    a = (s ? parseInt(s[1]) : 0) + (t ? -1 : 1);\n                    return A.post(\"posts/vote\", {\n                        post_id: e.closest(\".ds-ctx-entry, .ds-post-self\").attr(\"data-post-id\"),\n                        vote: t ? 0 : 1\n                    }),\n                    B(this).html(B(this).html().replace(/\\(\\d+\\)/, \"\") + (a ? \"(\" + a + \")\": \"\")),\n                    e[t ? \"removeClass\": \"addClass\"](\"ds-post-liked\"),\n                    !1\n                }\n                function a() {\n                    var e = B(this).closest(\".ds-post-self\"),\n                    t = lt[e.attr(\"data-post-id\")];\n                    return x(t, \"\"),\n                    !1\n                }\n                function i() {\n                    if (!confirm(\"确定要删除这条评论吗？\")) return ! 1;\n                    var t = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/remove\", {\n                        post_id: t.attr(\"data-post-id\")\n                    }),\n                    t.parent().fadeOut(200,\n                    function() {\n                        e.data.comments--,\n                        e.updateCounter(\"duoshuo\"),\n                        B(this).remove()\n                    }),\n                    !1\n                }\n                function n() {\n                    if (!confirm(\"确定要举报这条评论吗？\")) return ! 1;\n                    var e = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/report\", {\n                        post_id: e.attr(\"data-post-id\")\n                    }),\n                    alert(\"感谢您的反馈！\"),\n                    !1\n                }\n                function o() {\n                    var s = B(this),\n                    a = s.closest(\".ds-comment-actions\");\n                    if (a.hasClass(\"ds-reply-active\")) h.el.fadeOut(200,\n                    function() {\n                        B(this).detach()\n                    }),\n                    a.removeClass(\"ds-reply-active\");\n                    else {\n                        var i = s.closest(\".ds-ctx-entry, .ds-post-self\");\n                        h ? h.actionsBar.removeClass(\"ds-reply-active\") : (h = new st.Replybox(e), h.render(!0).el.addClass(\"ds-inline-replybox\").detach()),\n                        h.el.find(\"[name=parent_id]\").val(i.attr(\"data-post-id\")),\n                        h.el.show().appendTo(s.closest(\".ds-ctx-body, .ds-comment-body\")).find(\"textarea\").focus(),\n                        h.actionsBar = a.addClass(\"ds-reply-active\"),\n                        t.max_depth <= 1=\"\" ?=\"\" h.postlist=\"e.postList.el:\" (h.postlist=\"i.siblings(\".ds-children\"),\" h.postlist[0]=\"\" ||=\"\" class=\"ds-children\">').insertAfter(i)))\n                    }\n                    return ! 1\n                }\n                function d() {\n                    function e(e) {\n                        W(e),\n                        i.append(B.map(e.response,\n                        function(e) {\n                            return et.post({\n                                post: e,\n                                options: t\n                            })\n                        }).join(\"\"))\n                    } {\n                        var s = B(this).closest(\".ds-post-self\"),\n                        a = s.attr(\"data-post-id\");\n                        s.data(\"source\")\n                    }\n                    if (0 != s.attr(\"data-root-id\")) return ! 1;\n                    var i = s.siblings(\".ds-children\");\n                    return i[0] ? (i.remove(), !1) : (i = B('<ul class=\"ds-children\"></ul>').insertAfter(s), A.get(\"posts/listComments\", H({\n                        post_id: a\n                    }), e), !1)\n                }\n                function l() {\n                    var t = B(this).closest(\".ds-post-self\"),\n                    s = lt[t.attr(\"data-post-id\")],\n                    a = s.data.source;\n                    if (!nt.data.social_uid[\"qqt\" == a ? \"qq\": a]) return void y(a);\n                    var i = s.data.root_id,\n                    r = \"0\" != i ? lt[i] : s,\n                    n = \"\";\n                    if (\"0\" != i) {\n                        var o = prepatePost(s.data).theAuthor;\n                        n = (\"weibo\" == a ? \"//@\" + o.name: \"|| @\" + o.qqt_account) + \":\" + s.data.message\n                    }\n                    return x(r, n, e, a),\n                    !1\n                }\n                function c() {\n                    var e = B(this).parent();\n                    return e.siblings().show(),\n                    e.remove(),\n                    !1\n                }\n                function u() {\n                    function t() {\n                        function t(e) {\n                            var t = e.response;\n                            ct[c] ? ct[c].set(t) : ct[c] = new $(t),\n                            X.owner == s && K.html(et.userInfo(t))\n                        }\n                        tt = 0,\n                        X.owner = s,\n                        N();\n                        var i = a.offset(),\n                        r = e.el.offset(),\n                        n = a.innerWidth() / 2,\n                        o = e.el.innerHeight() - (i.top - r.top) + 6,\n                        d = i.left - r.left - 35 + (n > 35 ? 35 : n);\n                        try {\n                            if (a.hasClass(\"ds-comment-context\")) K.attr(\"id\", \"ds-ctx-bubble\").attr(\"data-post-id\", a.attr(\"data-post-id\")).html('<ul id=\"ds-ctx\">' + et.ctxPost({\n                                post: lt[a.attr(\"data-parent-id\")].toJSON()\n                            }) + '</ul><div class=\"ds-bubble-footer\"><a class=\"ds-ctx-open\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\">查看对话</a></div>');\n                            else if (a.hasClass(\"ds-avatar\") || a.hasClass(\"ds-user-name\")) {\n                                var l = {},\n                                c = l.user_id = a.attr(\"data-user-id\");\n                                if (!c) throw \"no info\";\n                                K.attr(\"id\", \"ds-user-card\").attr(\"data-user-id\", c).empty(),\n                                ct[c] ? K.html(et.userInfo(ct[c].data)) : A.get(\"users/profile\", H(l), t)\n                            }\n                            X.css({\n                                bottom: o,\n                                left: d\n                            }).appendTo(e.innerEl)\n                        } catch(u) {\n                            X.detach()\n                        }\n                    }\n                    var s = this;\n                    if (bubbleOutTimer && X.owner == s) return clearTimeout(bubbleOutTimer),\n                    void(bubbleOutTimer = 0);\n                    var a = B(s);\n                    tt = setTimeout(t, 200)\n                }\n                function p() {\n                    tt ? (clearTimeout(tt), tt = 0) : bubbleOutTimer || I()\n                }\n                var h;\n                this.delegate(\"a.ds-post-likes\", \"click\", s).delegate(\"a.ds-post-repost\", \"click\", a).delegate(\"a.ds-post-delete\", \"click\", i).delegate(\"a.ds-post-report\", \"click\", n).delegate(\"a.ds-post-reply\", \"click\", o).delegate(\"a.ds-weibo-comments\", \"click\", d).delegate(\"a.ds-weibo-reposts\", \"click\", l).delegate(\"a.ds-expand\", \"click\", c),\n                P.touch || this.delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseenter\", u).delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseleave\", p)\n            }\n            function H(e) {\n                var s = {\n                    require: \"site,visitor,nonce,lang\" + (it++?\"\": \",unread,log,extraCss\"),\n                    site_ims: D.get(\"ds_site_\" + c.short_name + \":timestamp\"),\n                    lang_ims: D.get(\"ds_lang_\" + c.short_name + \":timestamp\"),\n                    referer: t.referrer\n                };\n                c.stylePatch && (s.style_patch = c.stylePatch);\n                for (var a in s) s[a] && (!P.ie6 || encodeURIComponent(s[a]).length < 200) && (e[a] = s[a]);\n                return e\n            }\n            var B = S.jQuery,\n            V = B(e),\n            Y = B(t);\n            e.postMessage && (e.addEventListener ? e.addEventListener(\"message\", g, !1) : e.attachEvent && e.attachEvent(\"onmessage\", g)),\n            S.scrollTo = function(e) {\n                var t = e.offset().top; (t < V.scrollTop() || t > V.scrollTop() + V.height()) && B(\"html, body\").animate({\n                    scrollTop: t - 40\n                },\n                200, \"swing\")\n            },\n            S.toJSON = function(e) {\n                var t = /\\r?\\n/g,\n                s = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,\n                a = /^(?:select|textarea)/i,\n                i = e.map(function() {\n                    return this.elements ? B.makeArray(this.elements) : this\n                }).filter(function() {\n                    return this.name && !this.disabled && (this.checked || a.test(this.nodeName) || s.test(this.type))\n                }).map(function(e, s) {\n                    var a = B(this).val();\n                    return null == a ? null: B.isArray(a) ? B.map(a,\n                    function(e) {\n                        return {\n                            name: s.name,\n                            value: e.replace(t, \"\\r\\n\")\n                        }\n                    }) : {\n                        name: s.name,\n                        value: a.replace(t, \"\\r\\n\")\n                    }\n                }).toArray(),\n                r = {};\n                return B.each(i,\n                function() {\n                    r[this.name] = this.value\n                }),\n                r\n            },\n            S.resetNotify = function() {\n                var e = B(\"#ds-notify\"),\n                s = ot.data;\n                e[0] || (e = B('<div id=\"ds-notify\"></div>').css({\n                    hidden: {\n                        display: \"none\"\n                    },\n                    \"top-right\": {\n                        top: \"24px\",\n                        right: \"24px\"\n                    },\n                    \"bottom-right\": {\n                        bottom: \"24px\",\n                        right: \"24px\"\n                    }\n                } [rt.data.notify_position]).delegate(\".ds-notify-unread a\", \"click\",\n                function() {\n                    return T(B(this).data(\"type\")),\n                    !1\n                }).appendTo(t.body)),\n                e.html(et.notify(s))[!s.comments && !s.notifications || \"hidden\" === rt.data.notify_position || B(\".ds-dialog\")[0] ? \"hide\": \"show\"]()\n            },\n            ot.on(\"reset\", S.resetNotify),\n            st.Replybox = function(e) {\n                this.embedThread = e\n            },\n            st.Replybox.prototype = {\n                render: function(e) {\n                    function s(e) {\n                        e.data(\"submitting\", !0),\n                        e.find(\".ds-post-button\").addClass(\"ds-waiting\").html(z.posting)[0].disabled = !0\n                    }\n                    function a(e) {\n                        e.data(\"submitting\", !1),\n                        e.find(\".ds-post-button\").removeClass(\"ds-waiting\").html(z.post)[0].disabled = !1\n                    }\n                    var i = this,\n                    o = i.embedThread,\n                    c = o.options,\n                    p = function() {\n                        S.require(\"smilies\",\n                        function() {})\n                    },\n                    h = {\n                        thread: o,\n                        options: c,\n                        inline: e,\n                        params: {\n                            thread_id: o.threadId,\n                            parent_id: \"\",\n                            nonce: S.nonce\n                        },\n                        repostArray: [],\n                        checked: 0\n                    };\n                    for (var v in nt.data.repostOptions) nt.data.repostOptions[v] && (h.repostArray.push(v), h.checked = 1);\n                    var g = i.el = B(et.replybox(h)).click(p),\n                    b = g.find(\"form\"),\n                    y = b.find(\"input[type=checkbox]\")[0],\n                    _ = b.find(\"a.ds-service-icon, a.ds-service-icon-grey\"),\n                    k = f(b.find(\"textarea\")).focus(p).keyup(n).keyup(d).bind(\"focus mousedown mouseup keyup\", u),\n                    w = g.find(\".ds-add-emote\").click(function(e) {\n                        var s = S.smiliesTooltip;\n                        return w.toggleClass(\"ds-expanded\").hasClass(\"ds-expanded\") ? (s || (s = S.smiliesTooltip = new st.SmiliesTooltip, s.render(), S.require(\"smilies\",\n                        function() {\n                            s.reset(\"微博-默认\")\n                        })), s.replybox = i, s.el.appendTo(t.body).css({\n                            top: i.el.offset().top + i.el.outerHeight() + 4 + \"px\",\n                            left: i.el.find(\".ds-textarea-wrapper\").offset().left + \"px\"\n                        }), B(t.body).click(x)) : x(e),\n                        !1\n                    }),\n                    x = (g.find(\".ds-add-image\").click(function(e) {\n                        var s = k[0],\n                        a = s.value,\n                        i = \"请输入图片地址\",\n                        r = '<img src=\"' + i + '\">';\n                        if (t.selection) {\n                            s.value = a.substring(0, k.data(\"ds-range-start\")) + r + a.substring(k.data(\"ds-range-end\"), a.length),\n                            s.value = s.value.replace(\"说点什么吧 ...\", \"\"),\n                            s.focus();\n                            var n = t.selection.createRange();\n                            n.collapse(),\n                            n.findText(i),\n                            n.select()\n                        } else {\n                            s.value = a.substring(0, s.selectionStart) + r + a.substring(s.selectionEnd);\n                            var o = s.value.search(i);\n                            s.setSelectionRange(o, o + i.length),\n                            s.focus()\n                        }\n                        e.preventDefault()\n                    }), i.hideSmilies = function() {\n                        w.removeClass(\"ds-expanded\"),\n                        S.smiliesTooltip.el.detach(),\n                        B(t.body).unbind(\"click\", x)\n                    }),\n                    T = function(e, t) {\n                        var s = E(et[\"dialog-anonymous\"]({\n                            services: [\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"],\n                            options: c\n                        })),\n                        a = s.el.find(\".ds-dialog\").css(\"width\", \"320px\");\n                        if (a.find(\".ds-icons-32 a\").click(l), !c.deny_anonymous) {\n                            var i = s.el.find(\"form\");\n                            i.submit(function() {\n                                var e = i.find(\"input[name=author_email]\").val();\n                                return ! e && !c.require_guest_email || e.match(/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) ? (t(S.toJSON(i)), s.close(), !1) : (alert(\"请输入一个有效的email地址.\"), !1)\n                            }),\n                            i.find(\"input[name=author_name]\")[0].focus()\n                        }\n                    };\n                    c.deny_anonymous && k.focus(function() {\n                        if (r()) {\n                            T(b, q);\n                            var e = function(t) {\n                                t.stopPropagation(),\n                                k.unbind(\"click\", e)\n                            };\n                            k.click(e)\n                        }\n                        return ! 1\n                    });\n                    var q = function(e) {\n                        s(b),\n                        A.post(\"posts/create\", B.extend(S.toJSON(b), e),\n                        function(e) {\n                            var t = lt[e.response.post_id] = new F(e.response),\n                            s = U(i.postList, t, c);\n                            if (\"asc\" == c.order == (\"top\" == c.formPosition) && S.scrollTo(s), o.data.comments++, o.updateCounter(\"duoshuo\"), k.val(\"\").trigger(\"keyup\"), a(b), g.hasClass(\"ds-inline-replybox\") && (g.detach(), i.actionsBar.removeClass(\"ds-reply-active\")), m) try {\n                                m.removeItem(\"ds_draft_\" + o.threadId)\n                            } catch(r) {}\n                        },\n                        function(e) {\n                            a(b),\n                            alert(e.errorMessage)\n                        })\n                    };\n                    b.submit(function() {\n                        if (b.data(\"submitting\")) return ! 1;\n                        var e = B.trim(b[0].message.value);\n                        return \"\" == e || !P.placeholder && e == k.attr(\"placeholder\") ? (alert(\"您还没写内容呢\"), !1) : (r() ? T(b, q) : q(), !1)\n                    });\n                    var C = function(e) {\n                        return B(e).hasClass(\"ds-service-icon-grey\") ? null: B(e).attr(\"data-service\")\n                    };\n                    if (_.click(function() {\n                        return B(this).toggleClass(\"ds-service-icon-grey\").toggleClass(\"ds-service-icon\"),\n                        y.value = B.map(_, C).join(\",\"),\n                        y.checked = \"\" != y.value,\n                        !1\n                    }), B(y).change(function() {\n                        var e = this.checked;\n                        _[e ? \"removeClass\": \"addClass\"](\"ds-service-icon-grey\")[e ? \"addClass\": \"removeClass\"](\"ds-service-icon\"),\n                        this.value = B.map(_, C).join(\",\")\n                    }), !e && m) {\n                        var j = \"ds_draft_\" + o.threadId;\n                        k.bind(\"focus blur keyup\",\n                        function(e) {\n                            var t = B(e.currentTarget).val();\n                            try {\n                                m[j] = t\n                            } catch(e) {}\n                        }),\n                        m[j] && k.val(m[j])\n                    }\n                    return this\n                }\n            },\n            st.Dialog = J.extend({\n                init: function(e, t) { (this.el = B(\"#ds-wrapper\"))[0] || (this.el = p(B('<div id=\"ds-wrapper\"></div>'))),\n                    this.options = B.extend({\n                        width: 600\n                    },\n                    t),\n                    e !== s && B(e).attr(\"id\", \"ds-reset\").appendTo(this.el)\n                },\n                open: function() {\n                    function e(e) {\n                        return 27 == e.which ? (a.close(), !1) : void 0\n                    }\n                    function s() {\n                        return a.close(),\n                        !1\n                    }\n                    var a = this;\n                    return a.el.hide().appendTo(t.body).fadeIn(200),\n                    P.ie6 && a.el.css(\"top\", V.scrollTop() + 100),\n                    a.el.show().find(\".ds-dialog\").delegate(\"a.ds-dialog-close\", \"click\",\n                    function() {\n                        return a.close(),\n                        !1\n                    }).click(i),\n                    Y.keydown(e),\n                    B(t.body).click(s),\n                    a.close = function() {\n                        Y.unbind(\"keydown\", e),\n                        B(t.body).unbind(\"click\", s),\n                        a.el.fadeOut(200,\n                        function() {\n                            B(this).remove()\n                        }),\n                        a.trigger(\"close\")\n                    },\n                    a\n                }\n            }),\n            et.likePanel = function(e) {\n                return e.likes ? '<span class=\"ds-highlight\">' + e.likes + \"</span> 人喜欢\": \"\"\n            },\n            st.Meta = function(e) {\n                this.embedThread = e\n            },\n            st.Meta.prototype = {\n                render: function() {\n                    function a(a) {\n                        function r(e) {\n                            o.set(e),\n                            n.resetLikePanel()\n                        }\n                        function c() {\n                            n.tooltip.detach(),\n                            B(t.body).unbind(\"click\", c)\n                        }\n                        function u(t) {\n                            switch (this.className) {\n                            case \"ds-like-tooltip-close\":\n                                c(t);\n                                break;\n                            default:\n                                if (!e.open(this.href, \"_blank\", \"height=500,width=600,top=0,left=0,toolbar=no,menubar=no,resizable=yes,location=yes,status=no\")) return\n                            }\n                            return ! 1\n                        }\n                        var p = l.hasClass(\"ds-thread-liked\");\n                        if (A.post(\"threads/vote\", {\n                            thread_id: n.embedThread.threadId,\n                            vote: p ? 0 : 1\n                        },\n                        r), l.toggleClass(\"ds-thread-liked\"), l.find(\".ds-thread-like-text\").text(p ? \"喜欢\": \"已喜欢\"), p) return n.tooltip && c(a),\n                        !1;\n                        if (n.tooltip === s) {\n                            var h = et.likeTooltip({\n                                services: {\n                                    qzone: \"QQ空间\",\n                                    weibo: \"新浪微博\",\n                                    qqt: \"腾讯微博\",\n                                    renren: \"人人网\",\n                                    kaixin: \"开心网\",\n                                    douban: \"豆瓣网\",\n                                    baidu: \"百度搜藏\"\n                                },\n                                thread_id: o.data.thread_id\n                            });\n                            n.tooltip = B(h).click(i).delegate(\"a\", \"click\", u)\n                        }\n                        var f = {};\n                        return f.left = 0,\n                        f.top = d.position().top + d.outerHeight() - 4 + \"px\",\n                        n.tooltip.appendTo(n.embedThread.innerEl).css(f),\n                        B(t.body).click(c),\n                        !1\n                    }\n                    var n = this,\n                    o = n.embedThread.model,\n                    d = n.el = B(et.meta(o.toJSON())),\n                    l = d.find(\".ds-like-thread-button\");\n                    return l.click(a),\n                    n.resetLikePanel(),\n                    r() && d.hide(),\n                    n\n                },\n                resetLikePanel: function() {\n                    this.el.find(\".ds-like-panel\").html(et.likePanel(this.embedThread.model.toJSON()))\n                }\n            },\n            st.PostListHead = function(e) {\n                this.embedThread = e\n            },\n            st.PostListHead.prototype = {\n                render: function() {\n                    function e(e) {\n                        r.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.page = 1;\n                        var t = e.currentTarget;\n                        switch (t.className) {\n                        case \"ds-comments-tab-duoshuo\":\n                            a.params.source = \"duoshuo\",\n                            s.replybox.el.show();\n                            break;\n                        case \"ds-comments-tab-repost\":\n                            a.params.source = \"repost\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-weibo\":\n                            a.params.source = \"weibo\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-qqt\":\n                            a.params.source = \"qqt\",\n                            s.replybox.el.hide()\n                        }\n                        return B(t).addClass(\"ds-current\"),\n                        a.refetch(),\n                        !1\n                    }\n                    function t() {\n                        return n.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.order = s.options.order = this.className.replace(\"ds-order-\", \"\"),\n                        a.params.page = 1,\n                        a.refetch(),\n                        B(this).addClass(\"ds-current\"),\n                        !1\n                    }\n                    var s = this.embedThread,\n                    a = s.postList,\n                    i = this.el = B(et.postListHead({\n                        thread: s.model.toJSON(),\n                        options: s.options\n                    })),\n                    r = i.find(\"ul.ds-comments-tabs\");\n                    r.delegate(\".ds-tab a\", \"click\", e);\n                    var n = i.find(\".ds-sort\");\n                    return n.delegate(\"a\", \"click\", t),\n                    n.find(\".ds-order-\" + a.params.order).addClass(\"ds-current\"),\n                    this\n                }\n            },\n            st.Paginator = function(e) {\n                function t() {\n                    return i.params.page = parseInt(this.innerHTML),\n                    i.refetch(),\n                    a.find(\".ds-current\").removeClass(\"ds-current\"),\n                    B(this).addClass(\"ds-current\"),\n                    !1\n                }\n                e = e || {};\n                var s = this,\n                a = s.el = e.el || B('<div class=\"ds-paginator\"></div>'),\n                i = s.collection = e.collection;\n                a.delegate(\"a\", \"click\", t)\n            },\n            st.Paginator.prototype = {\n                reset: function(e) {\n                    function t(e) {\n                        i.push('<a data-page=\"' + e + '\" href=\"javascript:void(0);\" target=\"_blank\" rel=\"external\">' + e + \"</a>\")\n                    }\n                    var s, a = this.collection.params.page || 1,\n                    i = [];\n                    if (a > 1) for (t(1), s = a > 4 ? a - 2 : 2, s > 2 && i.push('<span class=\"page-break\">...</span>'); a > s; s++) t(s);\n                    if (i.push('<a data-page=\"' + a + '\" href=\"javascript:void(0);\" class=\"ds-current\" target=\"_blank\" rel=\"external\">' + a + \"</a>\"), a < e.pages) {\n                        for (s = a + 1; a + 4 >= s && s < e.pages; s++) t(s);\n                        s < e.pages && i.push('<span class=\"page-break\">...</span>'),\n                        t(e.pages)\n                    }\n                    this.el.html('<div class=\"ds-border\"></div>' + i.join(\" \"))[e.pages > 1 ? \"show\": \"hide\"]()\n                }\n            },\n            S.addSmilies = function(e, t) {\n                var s = S.smiliesTooltip;\n                s && s.el.find(\"ul.ds-smilies-tabs\").append(\"<li><a>\" + e + \"</a></li>\"),\n                S.smilies[e] = t\n            },\n            st.SmiliesTooltip = function() {},\n            st.SmiliesTooltip.prototype = {\n                render: function() {\n                    function e() {\n                        var e = s.replybox,\n                        a = e.el.find(\"textarea\"),\n                        i = a[0],\n                        r = i.value;\n                        if (t.selection) {\n                            i.value = r.substring(0, a.data(\"ds-range-start\")) + this.title + r.substring(a.data(\"ds-range-end\"), r.length),\n                            i.value = i.value.replace(z.leave_a_message, \"\"),\n                            i.focus();\n                            var n = t.selection.createRange();\n                            n.moveStart(\"character\", a.data(\"ds-range-start\") + this.title.length),\n                            n.collapse(),\n                            n.select()\n                        } else {\n                            var o = i.selectionStart + this.title.length;\n                            i.value = r.substring(0, i.selectionStart) + this.title + r.substring(i.selectionEnd),\n                            i.setSelectionRange(o, o)\n                        }\n                        e.hideSmilies(),\n                        i.focus()\n                    }\n                    var s = this,\n                    a = s.el = B(et.smiliesTooltip(L));\n                    return a.click(i).find(\"ul.ds-smilies-tabs\").delegate(\"a\", \"click\",\n                    function() {\n                        s.reset(this.innerHTML)\n                    }),\n                    a.find(\".ds-smilies-container\").delegate(\"img\", \"click\", e),\n                    this\n                },\n                reset: function(e) {\n                    function t(t, s) {\n                        var i = 0 === e.indexOf(\"微博\") ? \"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/\" + s.replace(\"_org\", \"_thumb\") : S.STATIC_URL + \"/images/smilies/\" + s;\n                        \"WordPress\" === e && (t = \" \" + t + \" \"),\n                        a += '<li><img src=\"' + i + '\" title=\"' + _(t) + '\"></li>'\n                    }\n                    var s = this.el.find(\"ul.ds-smilies-tabs\");\n                    s.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                    s.find(\"a\").filter(function() {\n                        return this.innerHTML == e\n                    }).addClass(\"ds-current\");\n                    var a = \"<ul>\";\n                    return B.each(L[e], t),\n                    a += \"</ul>\",\n                    this.el.find(\".ds-smilies-container\").html(a),\n                    this\n                }\n            },\n            et.postPlaceholder = function() {\n                return ['<li class=\"ds-post ds-post-placeholder\">', z.no_comments_yet, \"</li>\"].join(\"\")\n            };\n            var X = B('<div id=\"ds-bubble\"><div class=\"ds-bubble-content\"></div><div class=\"ds-arrow ds-arrow-down ds-arrow-border\"></div><div class=\"ds-arrow ds-arrow-down\"></div></div>'),\n            K = X.find(\".ds-bubble-content\").delegate(\"a.ds-ctx-open\", \"click\",\n            function() {\n                function e(e) {\n                    function t(e, t) {\n                        return et.ctxPost({\n                            post: e,\n                            index: t\n                        })\n                    }\n                    C.log(B.map(e.response, t).join(\"\\n\"));\n                    s.el.find(\"ol\");\n                    s.el.find(\"ol\").html(B.map(e.response, t).join(\"\\n\"))\n                }\n                var t = {};\n                t.post_id = K.attr(\"data-post-id\"),\n                A.get(\"posts/conversation\", t, e);\n                var s = E('<h2>查看对话</h2><ol id=\"ds-ctx\"></ol>');\n                return s.el.find(\".ds-dialog\").css(\"width\", \"600px\"),\n                s.el.find(\".ds-dialog-body\").css({\n                    \"max-height\": \"350px\",\n                    _height: \"350px\",\n                    \"overflow-y\": \"auto\",\n                    \"padding-top\": \"10px\"\n                }),\n                !1\n            }),\n            tt = bubbleOutTimer = 0;\n            X.mouseenter(N).mouseleave(I),\n            st.PostList = function(e) {\n                e && (e.params && (this.params = e.params), e.embedThread && (this.embedThread = e.embedThread)),\n                this.el = B('<ul class=\"ds-comments\"></ul>')\n            },\n            st.PostList.prototype = {\n                url: \"threads/listPosts\",\n                render: function() {\n                    return R.call(this.el, this.embedThread, this.embedThread.options),\n                    this\n                },\n                reset: function(e) {\n                    var t = this.embedThread.options;\n                    this.el.html(e[0] ? B.map(lt.getJSON(e),\n                    function(e) {\n                        return et.post({\n                            post: e,\n                            options: t\n                        })\n                    }).join(\"\") : et.postPlaceholder())\n                },\n                refetch: function() {\n                    function e(e) {\n                        lt.set(e.parentPosts || e.relatedPosts),\n                        ct.set(e.users),\n                        s.reset(e.response),\n                        s.embedThread.paginator.reset(e.cursor),\n                        s.el.fadeTo(200, 1),\n                        S.scrollTo(s.el),\n                        a.remove()\n                    }\n                    var s = this,\n                    a = B(et.indicator()).appendTo(t.body).fadeIn(200);\n                    s.el.fadeTo(200, .5),\n                    A.get(s.url, s.params, e)\n                }\n            },\n            st.EmbedThread = Q.extend({\n                uri: \"threads/listPosts\",\n                params: \"thread-id local-thread-id source-thread-id thread-key category channel-key author-key author-id url limit order max-depth form-position container-url\" + (v.match(/MSIE 6\\.0/) ? \"\": \" title image thumbnail\"),\n                render: function() {\n                    var e = this.el;\n                    if (\"请将此处替换成文章在你的站点中的ID\" === e.data(\"thread-key\")) return alert(\"请设置正确的 data-thread-key 属性\"),\n                    !1;\n                    e.attr(\"id\", \"ds-thread\").append(et.waitingImg());\n                    var t = e.width(),\n                    s = e.data(\"url\") || !e.attr(\"data-thread-id\") && B(\"link[rel=canonical]\").attr(\"href\");\n                    s ? e.data(\"url\", k(s)) : e.data(\"container-url\", h.href),\n                    t && 400 >= t && e.addClass(\"ds-narrow\").data(\"max-depth\", 1)\n                },\n                updateCounter: function(e) {\n                    function t(e) {\n                        return e.substr(e.indexOf(\"}\") + 1)\n                    }\n                    var s = {\n                        duoshuo: [\"comments\", t(z.comments_multiple) || \"评论\"],\n                        repost: [\"reposts\", t(z.reposts_multiple) || \"转载\"],\n                        weibo: [\"weibo_reposts\", t(z.weibo_reposts_multiple) || \"新浪微博\"],\n                        qqt: [\"qqt_reposts\", t(z.qqt_reposts_multiple) || \"腾讯微博\"]\n                    };\n                    for (var a in s) if (!e || e == a) {\n                        var i = this.data[s[a][0]];\n                        this.el.find(\".ds-comments-tab-\" + a).html(this.el.hasClass(\"ds-narrow\") ? '<span class=\"ds-service-icon ds-' + a + '\"></span>' + i: (i ? '<span class=\"ds-highlight\">' + i + \"</span>\": \"0\") + s[a][1])\n                    }\n                },\n                onError: function(e) {\n                    this.el.html(\"评论框出错啦(\" + e.code + \"): \" + e.errorMessage)\n                },\n                onload: function(t) {\n                    var a = this,\n                    i = a.threadId = t.thread.thread_id,\n                    n = t.cursor,\n                    o = a.options = t.options,\n                    d = a.innerEl = p(B('<div id=\"ds-reset\"></div>').appendTo(a.el));\n                    a.model = new G(a.data = t.thread),\n                    lt.set(t.parentPosts || t.relatedPosts),\n                    ct.set(t.users),\n                    a.el.find(\"#ds-waiting\").remove(),\n                    o.like_thread_enabled && (a.meta = new st.Meta(a), d.append(a.meta.render().el)),\n                    o.hot_posts && t.hotPosts && t.hotPosts.length && (a.hotPosts = new st.HotPosts(B('<div class=\"ds-rounded\"></div>'), {\n                        max_depth: 1,\n                        show_context: o.show_context\n                    }), a.hotPosts.thread = a, d.append(a.hotPosts.el), a.hotPosts.onload({\n                        list: lt.getJSON(t.hotPosts)\n                    })),\n                    a.postListHead = new st.PostListHead(a),\n                    a.postList = new st.PostList({\n                        embedThread: a,\n                        params: {\n                            source: \"duoshuo\",\n                            thread_id: i,\n                            max_depth: o.max_depth,\n                            order: o.order,\n                            limit: o.limit\n                        }\n                    }),\n                    a.postList.render().reset(t.response),\n                    a.paginator = new st.Paginator({\n                        collection: a.postList\n                    }),\n                    a.paginator.reset(n);\n                    var c = a.replybox = new st.Replybox(a);\n                    c.postList = a.postList.el,\n                    r() ? a.loginButtons = B(et.loginButtons()).delegate(\"a.ds-more-services\", \"click\",\n                    function() {\n                        return a.loginButtons.find(\".ds-additional-services\").toggle(),\n                        !1\n                    }).delegate(\"a.ds-service-link\", \"click\", l) : a.toolbar = B(et.toolbar()).delegate(\".ds-account-control\", \"mouseenter\",\n                    function() {\n                        B(this).addClass(\"ds-active\")\n                    }).delegate(\".ds-account-control\", \"mouseleave\",\n                    function() {\n                        B(this).removeClass(\"ds-active\")\n                    }).delegate(\"a.ds-bind-more\", \"click\",\n                    function() {\n                        var e = E(et[\"dialog-bind-more\"]()).el.find(\".ds-dialog\").addClass(\"ds-dialog-bind-more\").css(\"width\", \"300px\");\n                        return e.find(\"a.ds-service-link\").click(l),\n                        !1\n                    }).delegate(\"a.ds-unread-comments-count\", \"click\",\n                    function() {\n                        return T(\"unread-comments\"),\n                        !1\n                    });\n                    var u = ['<a name=\"respond\"></a>', a.toolbar || a.loginButtons, c.render().el];\n                    \"top\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(a.postListHead.render().el, a.postList.el, a.paginator.el),\n                    \"bottom\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(et.poweredBy(o.poweredby_text)),\n                    a.updateCounter(),\n                    t.alerts && B.each(t.alerts,\n                    function(e, t) {\n                        B('<div class=\"ds-alert\">' + t + \"</div>\").insertBefore(a.toolbar || loginButtons)\n                    }),\n                    o.message && c.el.find(\"textarea\").val(o.message).focus(),\n                    ot.on(\"reset\",\n                    function() {\n                        var e = ot.data.comments || 0;\n                        d.find(\"a.ds-unread-comments-count\").html(e).attr(\"title\", e ? \"你有\" + e + \"条新回复\": \"你没有新回复\").css(\"display\", e ? \"inline\": \"none\")\n                    }),\n                    o.mzadx_id && (S.require(\"mzadxN\",\n                    function() {}), B('<div id=\"MZADX_' + o.mzadx_id + '\" style=\"margin:0 auto;\"></div>').appendTo(d), __mz_rpq = e.__mz_rpq || [], __mz_rpq.push({\n                        l: [o.mzadx_id],\n                        r: \"1\",\n                        _srv: \"MZADX\",\n                        _callback: function() {}\n                    })),\n                    S.thread = a,\n                    ot.data !== s && ot.trigger(\"reset\"),\n                    r() || M.send({\n                        visit_thread_id: a.threadId\n                    })\n                },\n                onMessage: function(e) {\n                    U(this.postList.el, new F(e), this.options)\n                }\n            }),\n            st.HotPosts = Q.extend({\n                tmpl: \"hotPosts\",\n                params: \"show-quote\",\n                render: function() {\n                    return this.el.attr(\"id\", \"ds-hot-posts\"),\n                    this\n                },\n                onload: function(e) {\n                    e.options = B.extend(this.options, e.options),\n                    Q.prototype.onload.call(this, e),\n                    R.call(this.el.find(\"ul\"), this.thread, this.options)\n                }\n            }),\n            st.RecentComments = Q.extend({\n                tmpl: \"commentList\",\n                uri: \"sites/listRecentPosts\",\n                params: \"show-avatars show-time show-title avatar-size show-admin excerpt-length num-items channel-key\",\n                render: function() {\n                    this.el.attr(\"id\", \"ds-recent-comments\")\n                },\n                prepare: function(e) {\n                    return {\n                        list: B.map(e.response,\n                        function(e) {\n                            return new F(e).toJSON()\n                        })\n                    }\n                }\n            }),\n            st.RecentVisitors = Q.extend({\n                tmpl: \"recentVisitors\",\n                uri: \"sites/listVisitors\",\n                params: \"show-time avatar-size num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-recent-visitors\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.TopThreads = Q.extend({\n                tmpl: \"topThreads\",\n                uri: \"sites/listTopThreads\",\n                params: \"range num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-top-threads\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.LoginWidget = Q.extend({\n                tmpl: \"loginWidget\",\n                render: function() {\n                    var e = this.el;\n                    e.attr(\"id\", \"ds-login\").html(et.loginWidget([\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"])),\n                    e.find(\"a\").click(l),\n                    e.find(\"a.ds-logout\").attr(\"href\", Z.logoutUrl())\n                }\n            }),\n            st.ThreadCount = Q.extend({\n                onload: function(e) {\n                    var t = this.el,\n                    s = t.data(\"count-type\") || \"comments\",\n                    a = e.data[s];\n                    t[t.data(\"replace\") ? \"replaceWith\": \"html\"](z[s + \"_\" + (a ? a > 1 ? \"multiple\": \"one\": \"zero\")].replace(\"{num}\", a))\n                }\n            }),\n            st.ShareWidget = Q.extend({\n                tmpl: \"shareWidget\",\n                render: function() {\n                    var e = {\n                        copyright: \"多说分享插件\",\n                        services: [\"weibo\", \"qzone\", \"sohu\", \"renren\", \"netease\", \"qqt\", \"kaixin\", \"douban\", \"qq\", \"meilishuo\", \"mogujie\", \"baidu\", \"taobao\", \"google\", \"wechat\", \"diandian\", \"huaban\", \"duitang\", \"youdao\", \"pengyou\", \"facebook\", \"twitter\", \"linkedin\", \"msn\"]\n                    };\n                    this.el.attr(\"id\", \"ds-share\"),\n                    this.el.children().attr(\"id\", \"ds-reset\"),\n                    this.el.find(\".ds-share-aside-inner\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").hide(),\n                    this.el.hasClass(\"flat\") && this.el.find(\"a\").each(function() {\n                        B(this).addClass(\"flat\")\n                    }),\n                    p(this.el),\n                    this.delegateEvents()\n                },\n                delegateEvents: function() {\n                    var s = this,\n                    i = s.el;\n                    if (i.children().hasClass(\"ds-share-inline\")) {\n                        var r = \".ds-share-icons-more\",\n                        n = i.find(r),\n                        d = \"[data-toggle=ds-share-icons-more]\";\n                        i.delegate(d, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(d, \"mouseout\",\n                        function() {\n                            n.hide()\n                        }),\n                        i.delegate(r, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(r, \"mouseout\",\n                        function() {\n                            n.hide()\n                        })\n                    } else {\n                        var l = i.children().hasClass(\"ds-share-aside-left\") ? \"slide-to-right\": \"slide-to-left\",\n                        c = i.children();\n                        if (!o.cssProperty(\"transition\")) {\n                            var u = i.children().hasClass(\"ds-share-aside-left\") ? \"left\": \"right\";\n                            i.delegate(\".ds-share-aside-toggle\", \"mouseover\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) - 195 : e[u] = 0,\n                                c.animate(e, 200)\n                            }),\n                            i.delegate(\".ds-share-aside-inner\", \"mouseleave\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) + 230 : e[u] = -229,\n                                c.animate(e, 200)\n                            })\n                        }\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseover\",\n                        function() {\n                            c.addClass(l)\n                        }),\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseleave\",\n                        function() {\n                            c.removeClass(l)\n                        })\n                    }\n                    i.delegate(\"a\", \"click\",\n                    function(t) {\n                        var s = B(this).data(\"service\");\n                        if (!i.data(\"url\")) return void alert(\"请设置data-url\");\n                        if (\"wechat\" === s) {\n                            var r = a() + \"/api/qrcode/getImage.png\",\n                            n = \"?size=240&text=\" + i.data(\"url\"),\n                            d = E(et[\"dialog-qrcode\"]({\n                                qrcode_url: r + n,\n                                url: i.data(\"url\")\n                            }));\n                            d.el.find(\".ds-dialog\").css(\"width\", \"320px\")\n                        } else {\n                            var l = a() + \"/share-proxy/?\" + o.param({\n                                service: B(this).data(\"service\"),\n                                thread_key: i.data(\"threadKey\"),\n                                title: i.data(\"title\"),\n                                images: i.data(\"images\"),\n                                content: i.data(\"content\"),\n                                url: i.data(\"url\")\n                            });\n                            e.open(l, \"_blank\")\n                        }\n                        t.preventDefault(),\n                        t.stopPropagation()\n                    })\n                }\n            });\n            var it = 0;\n            S.initSelector = function(e, t) {\n                function s(e) {\n                    W(e),\n                    o.extend(z, e.options),\n                    dt.set(e.response)\n                }\n                var a = []; ! q() || !B.isReady && j || B(e).each(function(e, s) {\n                    var i = B(s);\n                    if (!i.data(\"initialized\")) {\n                        i.data(\"initialized\", !0);\n                        var r = new st[t.type](i, t);\n                        if (at.push(r), \"ThreadCount\" === t.type) {\n                            var n = i.attr(\"data-thread-key\");\n                            i.attr(\"data-channel-key\") && (n = i.attr(\"data-channel-key\") + \":\" + n),\n                            a.push(n),\n                            dt[n] || (dt[n] = new G({})),\n                            dt[n].on(\"reset\",\n                            function() {\n                                r.onload(this)\n                            })\n                        } else if (r.uri) {\n                            var o = {};\n                            B.each(r.params.split(\" \"),\n                            function(e, t) {\n                                o[t.replace(/-/g, \"_\")] = i.attr(\"data-\" + t) || i.data(t)\n                            }),\n                            A.get(r.uri, H(o),\n                            function(e) {\n                                r.load(e)\n                            })\n                        }\n                    }\n                }),\n                a.length && A.get(\"threads/counts\", H({\n                    threads: a.join(\",\")\n                }), s)\n            },\n            (S.initView = function() {\n                B.each(O, S.initSelector)\n            })(),\n            B(function() {\n                if (!c) {\n                    if (!q()) return C.error(\"缺少 duoshuoQuery 的定义\");\n                    C.warn(\"请在加载多说 embed.js 之前定义 duoshuoQuery\")\n                }\n                setInterval(function() {\n                    B(\".ds-time\").each(function() {\n                        var e = B(this).attr(\"datetime\");\n                        e && (this.innerHTML = S.elapsedTime(e))\n                    })\n                },\n                2e4),\n                c.ondomready && c.ondomready(),\n                S.initView(),\n                !it && c.short_name && A.get(\"analytics/ping\", H({}), W)\n            })\n        })\n    }\n} (window, document);\n</=></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>","excerpt":"","more":"//管理员判断开始\nfunction sskadmin(e) {\n    var ssk = '';\n    if (e.user_id == 6260328050223743746) {\n        if (checkMobile()) {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span><br><br>';\n        } else {\n            ssk = '<span class=\"ua\"><span class=\"sskadmin\">博主</span></span>';\n        }\n    } else {\n        if (checkMobile()) {\n            ssk = '<br><br>';\n        }\n    }\n    return ssk;\n}\n//管理员判断结束\n//移动客户端判断开始\nfunction checkMobile() {\n    var isiPad = navigator.userAgent.match(/iPad/i) != null;\n    if (isiPad) {\n        return false;\n    }\n    var isMobile = navigator.userAgent.match(/iphone|android|phone|mobile|wap|netfront|x11|java|opera mobi|opera mini|ucweb|windows ce|symbian|symbianos|series|webos|sony|blackberry|dopod|nokia|samsung|palmsource|xda|pieplus|meizu|midp|cldc|motorola|foma|docomo|up.browser|up.link|blazer|helio|hosin|huawei|novarra|coolpad|webos|techfaith|palmsource|alcatel|amoi|ktouch|nexian|ericsson|philips|sagem|wellcom|bunjalloo|maui|smartphone|iemobile|spice|bird|zte-|longcos|pantech|gionee|portalmmm|jig browser|hiptop|benq|haier|^lct|320x320|240x320|176x220/i) != null;\n    if (isMobile) {\n        return true;\n    }\n    return false;\n}\n//移动客户端判断结束\n//显UA开始\nfunction ua(e) {\n    var r = new Array;\n    var outputer = '';\n    if (r = e.match(/FireFox\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_firefox\"><i class=\"fa fa-firefox\"></i> FireFox'\n    } else if (r = e.match(/Maxthon([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_maxthon\"><i class=\"fa fa-globe\"></i> Maxthon'\n    } else if (r = e.match(/BIDUBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> 百度浏览器'\n    } else if (r = e.match(/UBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/UCBrowser([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_ucweb\"><i class=\"fa fa-globe\"></i> UCBrowser'\n    } else if (r = e.match(/MetaSr/ig)) {\n        outputer = '<span class=\"ua_sogou\"><i class=\"fa fa-globe\"></i> 搜狗浏览器'\n    } else if (r = e.match(/2345Explorer/ig)) {\n        outputer = '<span class=\"ua_2345explorer\"><i class=\"fa fa-globe\"></i> 2345王牌浏览器'\n    } else if (r = e.match(/2345chrome/ig)) {\n        outputer = '<span class=\"ua_2345chrome\"><i class=\"fa fa-globe\"></i> 2345加速浏览器'\n    } else if (r = e.match(/LBBROWSER/ig)) {\n        outputer = '<span class=\"ua_lbbrowser\"><i class=\"fa fa-globe\"></i> 猎豹安全浏览器'\n    } else if (r = e.match(/MicroMessenger\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-weixin\"></i> 微信'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/QQ\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_qq\"><i class=\"fa fa-qq\"></i> QQ浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/MiuiBrowser\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_mi\"><i class=\"fa fa-globe\"></i> Miui浏览器'\n        /*.split('/')[0]*/\n    } else if (r = e.match(/Chrome([\\d]*)\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_chrome\"><i class=\"fa fa-chrome\"></i> Chrome'\n        /*.split('.')[0]*/\n    } else if (r = e.match(/safari\\/([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_apple\"><i class=\"fa fa-safari\"></i> Safari'\n    } else if (r = e.match(/Opera[\\s|\\/]([^\\s]+)/ig)) {\n        var r1 = r[0].split(\"/\");\n        outputer = '<span class=\"ua_opera\"><i class=\"fa fa-opera\"></i> Opera'\n    } else if (r = e.match(/Trident\\/7.0/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE 11'\n    } else if (r = e.match(/MSIE\\s([^\\s|;]+)/gi)) {\n        outputer = '<span class=\"ua_ie\"><i class=\"fa fa-internet-explorer\"></i> IE' + ' ' + r[0]\n        /*.replace('MSIE', '').split('.')[0]*/\n    } else {\n        outputer = '<span class=\"ua_other\"><i class=\"fa fa-globe\"></i> 其它浏览器'\n    }\n    if (checkMobile()) {\n        Mobile = '<br><br>';\n    } else {\n        Mobile = '';\n    }\n    return outputer + \"</span>\" + Mobile;\n}\nfunction os(e) {\n    var os = '';\n    if (e.match(/win/ig)) {\n        if (e.match(/nt 5.1/ig)) {\n            os = '<span class=\"os_xp\"><i class=\"fa fa-windows\"></i> Windows XP'\n        } else if (e.match(/nt 6.1/ig)) {\n            os = '<span class=\"os_7\"><i class=\"fa fa-windows\"></i> Windows 7'\n        } else if (e.match(/nt 6.2/ig)) {\n            os = '<span class=\"os_8\"><i class=\"fa fa-windows\"></i> Windows 8'\n        } else if (e.match(/nt 6.3/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 8.1'\n        } else if (e.match(/nt 10.0/ig)) {\n            os = '<span class=\"os_8_1\"><i class=\"fa fa-windows\"></i> Windows 10'\n        } else if (e.match(/nt 6.0/ig)) {\n            os = '<span class=\"os_vista\"><i class=\"fa fa-windows\"></i> Windows Vista'\n        } else if (e.match(/nt 5/ig)) {\n            os = '<span class=\"os_2000\"><i class=\"fa fa-windows\"></i> Windows 2000'\n        } else {\n            os = '<span class=\"os_windows\"><i class=\"fa fa-windows\"></i> Windows'\n        }\n    } else if (e.match(/android/ig)) {\n        os = '<span class=\"os_android\"><i class=\"fa fa-android\"></i> Android'\n    } else if (e.match(/ubuntu/ig)) {\n        os = '<span class=\"os_ubuntu\"><i class=\"fa fa-desktop\"></i> Ubuntu'\n    } else if (e.match(/linux/ig)) {\n        os = '<span class=\"os_linux\"><i class=\"fa fa-linux\"></i> Linux'\n    } else if (e.match(/mac/ig)) {\n        os = '<span class=\"os_mac\"><i class=\"fa fa-apple\"></i> Mac OS X'\n    } else if (e.match(/unix/ig)) {\n        os = '<span class=\"os_unix\"><i class=\"fa fa-desktop\"></i> Unix'\n    } else if (e.match(/symbian/ig)) {\n        os = '<span class=\"os_nokia\"><i class=\"fa fa-mobile\"></i> Nokia SymbianOS'\n    } else {\n        os = '<span class=\"os_other\"><i class=\"fa fa-desktop\"></i> 其它操作系统'\n    }\n    return os + \"</span>\";\n}\n//显UA结束\n!\nfunction(e, t, s) {\n    function a() {\n        return c.short_name ? g + \"//\" + c.short_name + \".\" + S.DOMAIN: S.REMOTE\n    }\n    function i() {\n        function t() {\n            for (var t; t = y.shift();) {\n                var a = t.url,\n                i = new s(t.title, {\n                    dir: \"auto\",\n                    icon: t.iconUrl,\n                    body: t.body\n                });\n                try {\n                    i.onclick = function() {\n                        e.focus(),\n                        h.href = a,\n                        i.close()\n                    }\n                } catch(r) {}\n                setTimeout(function() {\n                    i.close && i.close()\n                },\n                8e3)\n            }\n        }\n        var s = e.Notification;\n        \"Notification\" in e && \"denied\" !== s.permission && (\"granted\" === s.permission && t(), s.requestPermission(function(e) {\n            \"granted\" === e && t()\n        }))\n    }\n    function r() {\n        return 0 == nt.data.user_id\n    }\n    function n(e) {\n        S.theme = e,\n        \"none\" != e && o.injectStylesheet(S.STATIC_URL + \"/styles/embed\" + (e ? \".\" + e + \".css?\" + U[e] : \".\" + short_name) + \".css\")\n    }\n    var o = {},\n    d = t.getElementsByTagName(\"head\")[0] || t.getElementsByTagName(\"body\")[0];\n    if (o.extend = function(e, t) {\n        for (var s in t) e[s] = t[s];\n        return e\n    },\n    o.injectScript = function(a, i) {\n        var r = t.createElement(\"script\"),\n        n = t.head || t.getElementsByTagName(\"head\")[0] || t.documentElement;\n        r.type = \"text/javascript\",\n        r.src = a,\n        r.async = \"async\",\n        r.charset = \"utf-8\",\n        i && (r.onload = r.onreadystatechange = function(t, a) {\n            var o = a || !r.readyState || /loaded|complete/.test(r.readyState);\n            o && (r.onload = r.onreadystatechange = null, n && r.parentNode && n.removeChild(r), r = s, a || i.call(e))\n        }),\n        n.insertBefore(r, n.firstChild)\n    },\n    o.injectStylesheet = function(e) {\n        var s = t.createElement(\"link\");\n        s.type = \"text/css\",\n        s.rel = \"stylesheet\",\n        s.href = e,\n        d.appendChild(s)\n    },\n    o.injectStyle = function(e) {\n        var s = t.createElement(\"style\");\n        return s.type = \"text/css\",\n        d.appendChild(s),\n        e = e.replace(/\\}/g, \"}\\n\"),\n        s.styleSheet ? s.styleSheet.cssText = e: s.appendChild(t.createTextNode(e)),\n        s\n    },\n    o.getCookie = function(e) {\n        for (var a, i, r, n = \" \" + e + \"=\",\n        o = t.cookie.split(\";\"), d = 0; d < o.length; d++) if (a = \" \" + o[d], i = a.indexOf(n), i >= 0 && i + n.length == (r = a.indexOf(\"=\") + 1)) return decodeURIComponent(a.substring(r, a.length).replace(/\\+/g, \"\"));\n        return s\n    },\n    o.param = function(e) {\n        var t = [];\n        for (var a in e) e[a] != s && t.push(a + \"=\" + encodeURIComponent(e[a]));\n        return t.join(\"&\")\n    },\n    o.cssProperty = function(e, s) {\n        var a = (t.body || t.documentElement).style;\n        if (\"undefined\" == typeof a) return ! 1;\n        if (\"string\" == typeof a[e]) return s ? e: !0;\n        for (var i = [\"Moz\", \"Webkit\", \"ms\"], e = e.charAt(0).toUpperCase() + e.substr(1), r = 0; r < i.length; r++) if (\"string\" == typeof a[i[r] + e]) return s ? i[r] + e: !0\n    },\n    !e.DUOSHUO) {\n        for (var l in Object.prototype) return alert(\"Object.prototype 不为空，请不要给 Object.prototype 设置方法\");\n        var c, u, p = e.JSON,\n        h = e.location,\n        f = e.XMLHttpRequest,\n        m = p && p.stringify && e.localStorage,\n        v = e.navigator.userAgent,\n        g = \"https:\" == t.location.protocol ? \"https:\": \"http:\",\n        b = 0,\n        y = [],\n        _ = u = function() {\n            function e(e) {\n                return t[e] || \"&amp;\"\n            }\n            var t = {\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\",\n                '\"': \"&quot;\",\n                \"'\": \"&#x27;\",\n                \"`\": \"&#x60;\"\n            },\n            s = /&(?!\\w+;)|[<>\"'`]/g,\n            a = /[&<>\"'`]/;\n            return function(t) {\n                return null == t || t === !1 ? \"\": a.test(t) ? t.replace(s, e) : t\n            }\n        } (),\n        k = function(e) {\n            if (e.match(/^(http|https):/)) return e;\n            var s = t.createElement(\"a\");\n            return s.href = e,\n            P.hrefNormalized ? s.href: s.getAttribute(\"href\", 4)\n        },\n        w = function(e) {\n            return function() {\n                return e\n            }\n        },\n        x = function() {\n            for (var e = {},\n            t = 0; t < arguments.length; t++) arguments[t] && o.extend(e, arguments[t]);\n            var s = o.param(e);\n            return s ? \"?\" + s: \"\"\n        },\n        T = function() {\n            var e = o.getCookie(\"duoshuo_token\");\n            return e ? {\n                jwt: e\n            }: c.remote_auth ? {\n                short_name: c.short_name,\n                remote_auth: c.remote_auth\n            }: s\n        },\n        q = function() {\n            if (!c && (c = e.duoshuoQuery)) {\n                if (!c.short_name || \"your_duoshuo_short_name\" === c.short_name) return c = s,\n                void alert(\"你还没有设置多说域名(duoshuoQuery.short_name)，填入已有域名或创建新站点：http://duoshuo.com/create-site/\");\n                it.trigger(\"queryDefined\")\n            }\n            return c\n        },\n        C = function(e) {\n            return e && e.error && e.warn ? e: {\n                error: function() {},\n                log: function() {},\n                warn: function() {}\n            }\n        } (e.console),\n        S = e.DUOSHUO = {\n            sourceName: {\n                weibo: \"新浪微博\",\n                qq: \"QQ\",\n                qzone: \"QQ空间\",\n                qqt: \"腾讯微博\",\n                renren: \"人人网\",\n                douban: \"豆瓣网\",\n                kaixin: \"开心网\",\n                sohu: \"搜狐微博\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            serviceNames: {\n                weibo: \"微博\",\n                qq: \"QQ\",\n                douban: \"豆瓣\",\n                renren: \"人人\",\n                kaixin: \"开心\",\n                baidu: \"百度\",\n                google: \"谷歌\",\n                wechat: \"微信\",\n                weixin: \"微信\",\n                facebook: \"Facebook\",\n                twitter: \"Twitter\",\n                linkedin: \"Linkedin\"\n            },\n            parseDate: function(e) {\n                return e.parse(\"2011-10-28T00:00:00+08:00\") &&\n                function(t) {\n                    return new e(t)\n                } || e.parse(\"2011/10/28T00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\"))\n                } || e.parse(\"2011/10/28 00:00:00+0800\") &&\n                function(t) {\n                    return new e(t.replace(/-/g, \"/\").replace(/:(\\d\\d)$/, \"$1\").replace(\"T\", \" \"))\n                } ||\n                function(t) {\n                    return new e(t)\n                }\n            } (Date),\n            fullTime: function(e) {\n                var t = S.parseDate(e);\n                return t.getFullYear() + \"年\" + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日 \" + t.toLocaleTimeString()\n            },\n            elapsedTime: function(e) {\n                var t = S.parseDate(e),\n                s = new Date,\n                a = (s - b - t) / 1e3;\n                return 10 > a ? \"刚刚\": 60 > a ? Math.round(a) + \"秒前\": 3600 > a ? Math.round(a / 60) + \"分钟前\": 86400 > a ? Math.round(a / 3600) + \"小时前\": (s.getFullYear() == t.getFullYear() ? \"\": t.getFullYear() + \"年\") + (t.getMonth() + 1) + \"月\" + t.getDate() + \"日\"\n            },\n            compileStyle: function(e) {\n                var t = \"\",\n                s = {};\n                if (s.textbox = \"#ds-thread #ds-reset .ds-replybox .ds-textarea-wrapper\", !e) return t;\n                for (var a in e) t += s[a] + \"{\" + e[a] + \"}\\n\";\n                return t\n            },\n            init: function(e, t) {\n                e && !O[e] && (O[e] = t || {\n                    type: \"EmbedThread\"\n                }),\n                S.initView && S.initView()\n            }\n        },\n        j = t.all,\n        P = S.support = function() {\n            var s = t.createElement(\"div\");\n            s.innerHTML = '<a href=\"/a\" style=\"opacity:.55;\">a</a><input type=\"checkbox\"/>';\n            var a = s.getElementsByTagName(\"a\")[0],\n            i = s.getElementsByTagName(\"input\")[0],\n            r = {\n                placeholder: \"placeholder\" in i,\n                touch: \"ontouchstart\" in e || \"onmsgesturechange\" in e,\n                opacity: /^0.55$/.test(a.style.opacity),\n                hrefNormalized: \"/a\" === a.getAttribute(\"href\"),\n                iOS: v.match(/ \\((iPad|iPhone|iPod);( U;)? CPU( iPhone)? OS /),\n                android: v.match(/ \\(Linux; U; Android /)\n            };\n            return r.ie6 = !f && \"undefined\" == typeof s.style.maxHeight,\n            r.authInWin = e.postMessage && e.screen.width > 800 && !r.iOS && !r.android && h.origin,\n            r\n        } (),\n        O = S.selectors = {\n            \".ds-thread\": {\n                type: \"EmbedThread\"\n            },\n            \".ds-recent-comments\": {\n                type: \"RecentComments\"\n            },\n            \".ds-recent-visitors\": {\n                type: \"RecentVisitors\"\n            },\n            \".ds-top-users\": {\n                type: \"TopUsers\"\n            },\n            \".ds-top-threads\": {\n                type: \"TopThreads\"\n            },\n            \".ds-login\": {\n                type: \"LoginWidget\"\n            },\n            \".ds-thread-count\": {\n                type: \"ThreadCount\"\n            },\n            \".ds-share\": {\n                type: \"ShareWidget\"\n            }\n        },\n        E = S.openDialog = function(e) {\n            return S.dialog !== s && S.dialog.el.remove(),\n            S.dialog = new st.Dialog(et.dialog(e)).open()\n        },\n        L = S.smilies = {};\n        S.require = function() {\n            function t(e) {\n                var t = R[e] ? \"?\" + R[e] + \".js\": \"\";\n                return S.STATIC_URL + \"/libs/\" + e + \".js\" + t\n            }\n            var s = {\n                mzadxN: \"undefined\" != typeof mzadxN\n            };\n            return \"undefined\" != typeof jQuery && jQuery.fn.jquery >= \"1.5\" && (s[\"embed.compat\"] = !0, S.jQuery = e.jQuery),\n            function(e, a) {\n                if (\"string\" == typeof e) s[e] ? a() : o.injectScript(t(e),\n                function() {\n                    s[e] = !0,\n                    a()\n                });\n                else if (\"object\" == typeof e) {\n                    var i, r = !0;\n                    for (i = 0; i < e.length; i++)(function(n) {\n                        s[e[i]] || (r = !1, o.injectScript(t(n),\n                        function() {\n                            s[n] = !0;\n                            for (var t = 0; t < e.length; t++) if (!s[e[t]]) return;\n                            a()\n                        }))\n                    })(e[i]);\n                    r && a()\n                }\n            }\n        } ();\n        for (var N = 0,\n        I = [\"EmbedThread\", \"RecentComments\", \"RecentVisitors\", \"TopUsers\", \"TopThreads\", \"LoginWidget\", \"ThreadCount\"]; N < I.length; N++) S[I[N]] = function(e) {\n            return function(t, s) {\n                s = s || {},\n                s.type = e,\n                t && !O[t] && (O[t] = s),\n                S.initSelector && S.initSelector(t, s)\n            }\n        } (I[N]),\n        S[\"create\" + I[N]] = function(e) {\n            return function(s, a) {\n                var i = t.createElement(s);\n                for (var r in a) i.setAttribute(\"data-\" + r, a[r]);\n                return S[e](i),\n                i\n            }\n        } (I[N]);\n        S.RecentCommentsWidget = S.RecentComments;\n        var A = S.API = {\n            ajax: function(e, t, i, r, n) {\n                function d(e) {\n                    var t = e.getResponseHeader(\"Date\");\n                    t && (b = new Date - new Date(t))\n                }\n                function l(e, t, s) {\n                    var a, i, o, l = t;\n                    if (e >= 200 && 300 > e || 304 === e) if (304 === e) l = \"notmodified\",\n                    o = !0;\n                    else try {\n                        a = p.parse(s),\n                        l = \"success\",\n                        o = !0\n                    } catch(c) {\n                        l = \"parsererror\",\n                        i = c\n                    } else {\n                        i = l,\n                        (!l || e) && (l = \"error\", 0 > e && (e = 0));\n                        try {\n                            a = p.parse(s)\n                        } catch(c) {\n                            l = \"parsererror\",\n                            i = c\n                        }\n                    }\n                    o ? r && r(a) : \"parseerror\" === l ? C.error(\"解析错误: \" + s) : (C.error(\"出错啦(\" + a.code + \"): \" + a.errorMessage), n && n(a), a.errorTrace && C.error(a.errorTrace)),\n                    d(m)\n                }\n                var u = o.getCookie(\"duoshuo_token\");\n                i = i || {},\n                i.v = S.version,\n                u ? i.jwt = u: c.remote_auth && (i.remote_auth = c.remote_auth);\n                var h = f && p && p.parse;\n                if (h) {\n                    var m = new f,\n                    v = !!m && \"withCredentials\" in m;\n                    if (v) {\n                        var g;\n                        return m.open(e, a() + \"/api/\" + t + \".json\" + (\"GET\" == e ? \"?\" + o.param(i) : \"\"), !0),\n                        m.withCredentials = !0,\n                        m.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded; charset=UTF-8\"),\n                        m.send(\"GET\" == e ? null: o.param(i)),\n                        g = function(e, t) {\n                            var a, i, r, n;\n                            try {\n                                if (g && (t || 4 === m.readyState)) if (g = s, t) 4 !== m.readyState && m.abort();\n                                else {\n                                    a = m.status,\n                                    r = m.getAllResponseHeaders();\n                                    try {\n                                        n = m.responseText\n                                    } catch(e) {}\n                                    try {\n                                        i = m.statusText\n                                    } catch(o) {\n                                        i = \"\"\n                                    }\n                                }\n                            } catch(d) {\n                                t || l( - 1, d)\n                            }\n                            n && l(a, i, n, r)\n                        },\n                        void(4 === m.readyState ? g() : m.onreadystatechange = g)\n                    }\n                }\n                \"GET\" != e && (i._method = \"POST\");\n                var y = \"cb_\" + Math.round(1e6 * Math.random());\n                A[y] = function(e) {\n                    switch (e.code) {\n                    case 0:\n                        r && r(e);\n                        break;\n                    default:\n                        n && n(e),\n                        C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                        e.errorTrace && C.error(e.errorTrace)\n                    }\n                },\n                i.callback = \"DUOSHUO.API['\" + y + \"']\",\n                o.injectScript(a() + \"/api/\" + t + \".jsonp?\" + o.param(i))\n            },\n            get: function(e, t, s, a) {\n                return this.ajax(\"GET\", e, t, s, a)\n            },\n            post: function(e, t, s, a) {\n                return this.ajax(\"POST\", e, t, s, a)\n            }\n        },\n        M = S.ws = {\n            messages: [],\n            send: function(s) {\n                if (! (\"WebSocket\" in e && p)) return ! 1;\n                var a = this;\n                if (a.messages.push(p.stringify(s)), !a.webSocket) {\n                    var r = \"https:\" === t.location.protocol ? \"wss://ws.duoshuo.com:8202/\": \"ws://ws.duoshuo.com:8201/\",\n                    n = a.webSocket = new WebSocket(r);\n                    n.onopen = function() {\n                        var e, t = 1 === n.readyState;\n                        if (t) for (; e = a.messages.shift();) n.send(e)\n                    },\n                    n.onmessage = function(e) {\n                        try {\n                            var t = p.parse(e.data)\n                        } catch(s) {\n                            return\n                        }\n                        switch (t.type) {\n                        case \"post\":\n                            for (var a, r = 0; r < S.pagelets.length; r++) a = S.pagelets[r],\n                            a.threadId == t.thread_id && a.onMessage(t);\n                            break;\n                        case \"notification\":\n                            y.push(t),\n                            i()\n                        }\n                    },\n                    e.addEventListener(\"beforeunload\",\n                    function() {\n                        n.close()\n                    })\n                }\n                a.webSocket.onopen()\n            }\n        };\n        S.DOMAIN = \"duoshuo.com\",\n        S.STATIC_URL = g + \"//static.duoshuo.com\",\n        S.REMOTE = g + \"//duoshuo.com\",\n        S.version = \"15.11.15\";\n        var U = {\n            \"default\": \"79dc948b\",\n            dark: \"ddc346d8\",\n            bluebox: \"0f0f035c\",\n            newhua: \"dc453ca2\"\n        },\n        R = {\n            \"embed.compat\": \"24f8ca3f\",\n            smilies: \"921e8eda\"\n        },\n        z = {\n            post: \"发布\",\n            posting: \"正在发布\",\n            settings: \"设置\",\n            reply: \"回复\",\n            like: \"顶\",\n            repost: \"转发\",\n            report: \"举报\",\n            \"delete\": \"删除\",\n            reply_to: \"回复 \",\n            reposts: \"转发\",\n            comments: \"评论\",\n            floor: \"楼\",\n            latest: \"最新\",\n            earliest: \"最早\",\n            hottest: \"最热\",\n            share_to: \"分享到:\",\n            leave_a_message: \"说点什么吧…\",\n            no_comments_yet: \"还没有评论，沙发等你来抢\",\n            repost_reason: \"请输入转发理由\",\n            hot_posts_title: \"被顶起来的评论\",\n            comments_zero: \"暂无评论\",\n            comments_one: \"1条评论\",\n            comments_multiple: \"{num}条评论\",\n            reposts_zero: \"暂无转发\",\n            reposts_one: \"1条转发\",\n            reposts_multiple: \"{num}条转发\",\n            weibo_reposts_zero: \"暂无新浪微博\",\n            weibo_reposts_one: \"1条新浪微博\",\n            weibo_reposts_multiple: \"{num}条新浪微博\",\n            qqt_reposts_zero: \"暂无腾讯微博\",\n            qqt_reposts_one: \"1条腾讯微博\",\n            qqt_reposts_multiple: \"{num}条腾讯微博\"\n        },\n        D = {\n            get: function(e) {\n                return m ? m[e] : void 0\n            },\n            save: function(e, t) {\n                if (m) try {\n                    m.removeItem(e),\n                    m[e] = p.stringify(t),\n                    m.removeItem(e + \":timestamp\"),\n                    m[e + \":timestamp\"] = Math.floor((new Date - b) / 1e3)\n                } catch(s) {}\n            }\n        },\n        W = S.loadRequire = function(t) {\n            if (t.visitor && (!nt.data && t.visitor.user_id && e.Notification && M.send({\n                logged_user_id: t.visitor.user_id\n            }), nt.reset(t.visitor)), t.site && (rt.reset(t.site), D.save(\"ds_site_\" + c.short_name, t.site)), !S.theme && rt.data.theme && n(rt.data.theme), t.lang && (o.extend(z, t.lang), D.save(\"ds_lang_\" + c.short_name, t.lang)), t.stylesheets) for (var s = 0; s < t.stylesheets.length; s++) o.injectStylesheet(t.stylesheets[s]);\n            if (t.nonce && (S.nonce = t.nonce), t.style && o.injectStyle((t.style || \"\") + S.compileStyle(c.component_style)), t.unread && ot.reset(t.unread), t.warnings) for (var s = 0; s < t.warnings.length; s++) C.warn(t.warnings[s])\n        },\n        H = 0,\n        B = S.Class = function() {};\n        B.extend = function(e) {\n            function t() { ! H && this.init && this.init.apply(this, arguments)\n            }\n            H = 1;\n            var s = new this;\n            H = 0;\n            for (var a in e) s[a] = e[a];\n            return t.prototype = s,\n            t.prototype.constructor = t,\n            t.extend = arguments.callee,\n            t\n        };\n        var J = S.Event = B.extend({\n            on: function(e, t) {\n                var a = this.handlers || (this.handlers = {});\n                return a[e] === s && (a[e] = []),\n                a[e].push(t),\n                this\n            },\n            trigger: function(e, t) {\n                var s = (this.handlers || (this.handlers = {}))[e];\n                if (s) for (var a = 0; a < s.length && s[a].call(this, t) !== !1; a++);\n                return this\n            }\n        }),\n        Q = S.Widget = J.extend({\n            init: function(e, t) {\n                this.el = e,\n                this.options = t || {},\n                this.render()\n            },\n            render: function() {},\n            reset: function() {},\n            load: function(e) {\n                switch (e.code) {\n                case 0:\n                    W(e);\n                    var t = this.prepare(e);\n                    t.options = o.extend(this.options, e.options),\n                    this.onload(t);\n                    break;\n                default:\n                    this.onError(e)\n                }\n            },\n            onload: function(e) {\n                this.el.html(et[this.tmpl](e))\n            },\n            prepare: function(e) {\n                return e\n            },\n            onMessage: function() {},\n            onError: function(e) {\n                C.error(\"出错啦(\" + e.code + \"): \" + e.errorMessage),\n                e.errorTrace && C.error(e.errorTrace)\n            }\n        }),\n        V = S.Model = J.extend({\n            init: function(e) {\n                this.data = e\n            },\n            reset: function(e) {\n                this.data = e,\n                this.trigger(\"reset\")\n            },\n            remove: function(e) {\n                this.data.splice(e, 1),\n                this.trigger(\"reset\")\n            },\n            set: function(e, t) {\n                if (t === s) for (var a in e) this.data[a] = e[a];\n                else this.data[e] = t;\n                return this.trigger(\"reset\"),\n                this\n            },\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        $ = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        F = V.extend({\n            toJSON: function() {\n                var e = o.extend({},\n                this.data);\n                return e.theAuthor = ct[this.data.author_id] && ct[this.data.author_id].data || this.data.author,\n                e.parents = this.data.parents || [],\n                e\n            }\n        }),\n        G = V.extend({\n            toJSON: function() {\n                return o.extend({},\n                this.data)\n            }\n        }),\n        Y = function(e) {\n            this.model = e\n        };\n        Y.prototype.set = function(e) {\n            for (var t in e) e[t] && (this[t] ? this[t].set(e[t]) : this[t] = new this.model(e[t]))\n        },\n        Y.prototype.get = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) s[t] = this[e[t]];\n            return s\n        },\n        Y.prototype.getJSON = function(e) {\n            for (var t = 0,\n            s = []; t < e.length; t++) this[e[t]] && s.push(this[e[t]].toJSON());\n            return s\n        };\n        var Z = {\n            userUrl: function(e) {\n                return e.url\n            },\n            avatarUrl: function(e) {\n                return e.avatar_url || rt.data.default_avatar_url\n            },\n            loginUrl: function(e, t) {\n                return t || (t = {}),\n                c.sso && c.sso.login && (t.sso = 1, t.redirect_uri = c.sso.login),\n                a() + \"/login/\" + e + \"/\" + x(t)\n            },\n            bindUrl: function(e) {\n                return a() + \"/bind/\" + e + \"/\" + x(c.sso && c.sso.login ? {\n                    sso: 1,\n                    redirect_uri: c.sso.login\n                }: null, T())\n            },\n            logoutUrl: function() {\n                return a() + \"/logout/\" + x(c.sso && c.sso.logout ? {\n                    sso: 1,\n                    redirect_uri: c.sso.logout\n                }: null)\n            }\n        },\n        X = [\"weixin\", \"weibo\", \"qq\", \"renren\"],\n        K = [\"douban\", \"kaixin\", \"baidu\", \"google\"],\n        et = S.templates = {\n            userAnchor: function(e) {\n                return e.url ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(e.url) + '\">' + _(e.name) + \"</a>\": _(e.name)\n            },\n            avatarImg: function(e, t) {\n                return '<img src=\"' + _(Z.avatarUrl(e, t)) + '\" alt=\"' + _(e.name) + '\"' + (t ? ' style=\"width:' + t + \"px;height:\" + t + 'px\"': \"\") + \"/>\"\n            },\n            avatar: function(e, t) {\n                var s = et.avatarImg(e, t),\n                i = Z.userUrl(e);\n                return i ? '<a rel=\"nofollow author\" target=\"_blank\" href=\"' + _(i) + '\" ' + (e.user_id ? \" onclick=\\\"this.href='\" + a() + \"/user-url/?user_id=\" + e.user_id + \"';\\\"\": \"\") + ' title=\"' + _(e.name) + '\">' + s + \"</a>\": s\n            },\n            timeText: function(e) {\n                return e ? '<span class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</span>\": \"\"\n            },\n            timeAnchor: function(e, t) {\n                return e ? '<a href=\"' + t + '\" target=\"_blank\" rel=\"nofollow\" class=\"ds-time\" datetime=\"' + e + '\" title=\"' + S.fullTime(e) + '\">' + S.elapsedTime(e) + \"</a>\": \"\"\n            },\n            serviceIcon: function(e, t) {\n                return '<a href=\"javascript:void(0)\" class=\"ds-service-icon' + (t ? \"-grey\": \"\") + \" ds-\" + e + '\" data-service=\"' + e + '\" title=\"' + S.sourceName[e] + '\"></a>'\n            },\n            poweredBy: function(e) {\n                return '<p class=\"ds-powered-by\"><a href=\"http://duoshuo.com\" target=\"_blank\" rel=\"nofollow\">' + _(e) + \"</a></p>\"\n            },\n            indicator: w('<div id=\"ds-indicator\"></div>'),\n            waitingImg: w('<div id=\"ds-waiting\"></div>'),\n            loginItem: function(e, t) {\n                var s = Z[t ? \"bindUrl\": \"loginUrl\"](e);\n                return '<li>    <a href=\"' + s + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + e + '\">' + S.serviceNames[e] + (nt.data.social_uid[e] ? ' <span class=\"ds-icon ds-icon-ok\"></span>': \"\") + \"</a></li>\"\n            }\n        },\n        tt = function(e) {\n            var t = [];\n            for (var s in e) t.push('<input type=\"hidden\" name=\"' + s + '\" value=\"' + _(e[s]) + '\" />');\n            return t.join(\"\\n\")\n        };\n        et.commentList = function(e) {\n            var t = \"\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li class=\"ds-comment',\n            e.options.show_avatars && (t += \" ds-show-avatars\"),\n            t += '\" data-post-id=\"' + a.post_id + '\">',\n            e.options.show_avatars && (t += '<div class=\"ds-avatar\">' + et.avatar(a.theAuthor, e.options.avatar_size) + \"</div>\"),\n            t += '<div class=\"ds-meta\">' + et.userAnchor(a.theAuthor),\n            e.options.show_time && (t += et.timeText(a.created_at)),\n            t += \"</div>\",\n            t += e.options.show_title ? '<div class=\"ds-thread-title\">在 <a href=\"' + u(a.thread.url) + '#comments\">' + u(a.thread.title) + '</a> 中评论</div><div class=\"ds-excerpt\">' + a.message + \"</div>\": '<a class=\"ds-excerpt\" title=\"' + a.thread.title + ' 中的评论\" href=\"' + u(a.thread.url) + '#comments\">' + a.message + \"</a>\",\n            t += \"</li>\";\n            return t\n        },\n        et.ctxPost = function(e) {\n            var t = \"\";\n            return e.post && (t += '<li class=\"ds-ctx-entry\"', e.hidden && (t += ' style=\"display:none\"'), t += ' data-post-id=\"' + e.post.post_id + '\"><div class=\"ds-avatar\">' + et.avatar(e.post.theAuthor || e.post.author) + '</div><div class=\"ds-ctx-body\"><div class=\"ds-ctx-head\">' + et.userAnchor(e.post.theAuthor || e.post.author) + et.timeAnchor(e.post.created_at, e.post.url), e.index >= 0 && (t += '<div class=\"ds-ctx-nth\" title=\"' + S.fullTime(e.post.created_at) + '\">' + (e.index + 1) + z.floor + \"</div>\"), t += '</div><div class=\"ds-ctx-content\">' + e.post.message, e.index >= 0 && (t += '　　　　　　　<div class=\"ds-comment-actions', e.post.vote > 0 && (t += \" ds-post-liked\"), t += '\">' + et.likePost(e.post) + '<a class=\"ds-post-repost\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '</a><a class=\"ds-post-reply\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-reply\"></span>' + z.reply + \"</a></div>\"), t += \"</div></div></li>\"),\n            t\n        },\n        et[\"dialog-anonymous\"] = function(e) {\n            var t = '<h2>社交帐号登录</h2><div class=\"ds-icons-32\">',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\",\n            e.options.deny_anonymous || (t += '<h2>作为游客留言</h2><form><div class=\"ds-control-group\"><input type=\"text\" name=\"author_name\" id=\"ds-dialog-name\" value=\"' + u(nt.data.name) + '\" required /><label for=\"ds-dialog-name\">名字(必填)</label></div>', e.options.require_guest_email && (t += '<div class=\"ds-control-group\"><input type=\"email\" name=\"author_email\" id=\"ds-dialog-email\" value=\"' + u(nt.data.email) + '\" required /><label for=\"ds-dialog-email\">邮箱(必填)</label></div>'), e.options.require_guest_url && (t += '<div class=\"ds-control-group\"><input type=\"url\" name=\"author_url\" id=\"ds-dialog-url\" placeholder=\"http://\" value=\"' + u(nt.data.url) + '\" /><label for=\"ds-dialog-url\">网址(可选)</label></div>'), t += '<button type=\"submit\">发布</button></form>'),\n            t\n        },\n        et[\"dialog-ask-for-auth\"] = function() {\n            var e = '<h2>社交帐号登录</h2><ul class=\"ds-service-list\">' + et.serviceList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul>\";\n            return e\n        },\n        et[\"dialog-bind-more\"] = function() {\n            var e = '<h2>绑定更多帐号</h2><ul class=\"ds-service-list\">' + et.serviceBindList(X) + '</ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceBindList(K) + '</ul><div style=\"clear:both\"></div>';\n            return e\n        },\n        et[\"dialog-qrcode\"] = function(e) {\n            var t = '<h2>微信扫一扫，分享到朋友圈</h2><div class=\"ds-share-qrcode\" style=\"text-align:center;\"><img src=\"' + e.qrcode_url + '\" alt=\"' + e.url + '\"></div>';\n            return t\n        },\n        et[\"dialog-reposts\"] = function(e) {\n            var t = '<h2>转发到微博</h2><div class=\"ds-quote\"><strong>@' + u(e.post.theAuthor.name) + \"</strong>: \" + e.post.message + \"</div><form>\" + tt({\n                post_id: e.post.post_id\n            }) + '<div class=\"ds-textarea-wrapper\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.repost_reason) + '\">' + u(e.repostMessage) + '</textarea><pre class=\"ds-hidden-text\"></pre>';\n            return t += '</div><div class=\"ds-actions\">',\n            e.service ? t += tt({\n                \"service[]\": e.service\n            }) : (t += '<label><input type=\"checkbox\" name=\"service[]\" value=\"weibo\"', nt.data.social_uid.weibo && (t += ' checked=\"checked\"'), t += ' /><span class=\"ds-service-icon ds-weibo\"></span>新浪微博</label><label><input type=\"checkbox\" name=\"service[]\" value=\"qqt\"', nt.data.social_uid.qq && (t += ' checked=\"checked\"'), t += ' /><span class=\"ds-service-icon ds-qqt\"></span>腾讯微博</label>'),\n            t += '<button type=\"submit\">' + z.repost + \"</button></div></form>\"\n        },\n        et.dialog = function(e) {\n            var t = '<div class=\"ds-dialog\"><div class=\"ds-dialog-inner ds-rounded\"><div class=\"ds-dialog-body\">' + e + '</div><div class=\"ds-dialog-footer\"><a href=\"http://duoshuo.com/\" target=\"_blank\" class=\"ds-logo\"></a><span>社会化评论框</span></div><a class=\"ds-dialog-close\" href=\"javascript:void(0)\" title=\"关闭\"></a></div></div>';\n            return t\n        },\n        et.hotPosts = function(e) {\n            var t = '<div class=\"ds-header ds-gradient-bg\">' + u(z.hot_posts_title) + \"</div><ul>\",\n            s = e.list;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += et.post({\n                post: a,\n                options: e.options\n            });\n            return t += \"</ul>\"\n        },\n        et.likePost = function(e) {\n            var t = '<a class=\"ds-post-likes\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-like\"></span>' + z.like;\n            return e.likes > 0 && (t += \"(\" + e.likes + \")\"),\n            t += \"</a>\"\n        },\n        et.likeTooltip = function(e) {\n            var t = '<div class=\"ds-like-tooltip ds-rounded\"><p>很高兴你能喜欢，分享一下吧：</p><ul>';\n            for (var s in e.services) t += '<li><a class=\"ds-share-to-' + s + \" ds-service-link ds-\" + s + '\" href=\"' + a() + \"/share-proxy/?\" + o.param({\n                service: s,\n                thread_id: e.thread_id\n            }) + '\">' + e.services[s] + \"</a></li>\";\n            return t += '</ul><p class=\"ds-like-tooltip-footer\"><a class=\"ds-like-tooltip-close\">算了</a></p></div>'\n        },\n        et.loginButtons = function() {\n            var e = '<div class=\"ds-login-buttons\"><p>社交帐号登录:</p><div class=\"ds-social-links\"><ul class=\"ds-service-list\">' + et.serviceList(X) + '<li><a class=\"ds-more-services\" href=\"javascript:void(0)\">更多»</a></li></ul><ul class=\"ds-service-list ds-additional-services\">' + et.serviceList(K) + \"</ul></div></div>\";\n            return e\n        },\n        et.loginWidget = function(e) {\n            var t = '<div class=\"ds-icons-32\">',\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<a class=\"ds-' + a + '\" href=\"' + Z.loginUrl(a) + '\">' + S.sourceName[a] + \"</a>\";\n            return t += \"</div>\"\n        },\n        et.meta = function(e) {\n            var t = '<div class=\"ds-meta\"><a href=\"javascript:void(0)\" class=\"ds-like-thread-button ds-rounded';\n            return e.user_vote > 0 && (t += \" ds-thread-liked\"),\n            t += '\"><span class=\"ds-icon ds-icon-heart\"></span> <span class=\"ds-thread-like-text\">',\n            t += e.user_vote > 0 ? \"已喜欢\": \"喜欢\",\n            t += '</span><span class=\"ds-thread-cancel-like\">取消喜欢</span></a><span class=\"ds-like-panel\"></span></div>'\n        },\n        et.notify = function(e) {\n            var t = '<div id=\"ds-reset\"><a class=\"ds-logo\" href=\"http://duoshuo.com/\" target=\"_blank\" title=\"多说\"></a><ul class=\"ds-notify-unread\"><li';\n            return e.comments || (t += ' style=\"display:none;\"'),\n            t += '><a data-type=\"unread-comments\" href=\"javascript:void(0);\">你有' + e.comments + \"条新回复</a></li><li\",\n            e.notifications || (t += ' style=\"display:none;\"'),\n            t += '><a data-type=\"unread-notifications\" href=\"javascript:void(0);\">你有' + e.notifications + \"条系统消息</a></li></ul></div>\"\n        },\n        et.post = function(e) {\n            var t = \"\",\n            s = e.post,\n            i = e.options,\n            r = s.author;\n            if (t += '<li class=\"ds-post\" data-post-id=\"' + s.post_id + '\"><div class=\"ds-post-self\" data-post-id=\"' + s.post_id + '\" data-thread-id=\"' + s.thread_id + '\" data-root-id=\"' + s.root_id + '\" data-source=\"' + s.source + '\"><div class=\"ds-avatar\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += \">\" + et.avatar(r), S.sourceName[s.source] && (t += et.serviceIcon(s.source)), t += '</div><div class=\"ds-comment-body\"><div class=\"ds-comment-header\">', r.url ? (t += '<a class=\"ds-user-name ds-highlight\" data-qqt-account=\"' + (r.qqt_account || \"\") + '\" href=\"' + u(r.url) + '\" ', r.user_id && (t += \" onclick=\\\"this.href='\" + a() + \"/user-url/?user_id=\" + r.user_id + \"';\\\"\"), t += ' rel=\"nofollow\" target=\"_blank\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += \">\" + u(r.name) + \"</a>\") : (t += '<span class=\"ds-user-name\"', r.user_id && (t += ' data-user-id=\"' + r.user_id + '\"'), t += ' data-qqt-account=\"' + (r.qqt_account || \"\") + '\">' + u(r.name) + \"</span>\"), t += sskadmin(s.author) + \"<span class=\\\"ua\\\">\" + ua(s.agent) + \"</span><span class=\\\"ua\\\">\" + os(s.agent) + \"</span>\", t += \"</div>\", 1 == i.max_depth && i.show_context && s.parents.length) {\n                t += '<ol id=\"ds-ctx\">';\n                var n = lt.getJSON(s.parents);\n                if (n) for (var o, d = -1,\n                l = n.length - 1; l > d;) o = n[d += 1],\n                1 == d && s.parents.length > 2 && (t += '<li class=\"ds-ctx-entry\"><a href=\"javascript:void(0);\" class=\"ds-expand\">还有' + (s.parents.length - 2) + \"条评论</a></li>\"),\n                t += et.ctxPost({\n                    post: o,\n                    index: d,\n                    hidden: d && d < s.parents.length - 1\n                });\n                t += \"</ol>\"\n            }\n            if (t += \"<p>\", s.parents.length >= i.max_depth && (!i.show_context || i.max_depth > 1) && s.parent_id && lt[s.parent_id] && (t += '<a class=\"ds-comment-context\" data-post-id=\"' + s.post_id + '\" data-parent-id=\"' + s.parent_id + '\">' + z.reply_to + u(lt[s.parent_id].toJSON().author.name) + \": </a>\"), t += s.message + '</p><div class=\"ds-comment-footer ds-comment-actions', s.vote > 0 && (t += \" ds-post-liked\"), t += '\">', t += s.url ? et.timeAnchor(s.created_at, s.url) : et.timeText(s.created_at), \"duoshuo\" == s.source ? (t += '<a class=\"ds-post-reply\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-reply\"></span>' + z.reply + \"</a>\" + et.likePost(s) + '<a class=\"ds-post-repost\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-share\"></span>' + z.repost + '</a><a class=\"ds-post-report\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-report\"></span>' + z.report + \"</a>\", s.privileges[\"delete\"] && (t += '<a class=\"ds-post-delete\" href=\"javascript:void(0);\"><span class=\"ds-icon ds-icon-delete\"></span>' + z[\"delete\"] + \"</a>\")) : (\"qqt\" == s.source || \"weibo\" == s.source) && (t += '<a class=\"ds-weibo-comments\" href=\"javascript:void(0);\">' + z.comments, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.comments + \"</span>)\"), t += '</a><a class=\"ds-weibo-reposts\" href=\"javascript:void(0);\">' + z.reposts, s.type.match(/\\-comment$/) || (t += '(<span class=\"ds-count\">' + s.reposts + \"</span>)\"), t += \"</a>\"), t += \"</div></div></div>\", i.max_depth > 1 && (s.childrenArray || s.children) && \"weibo\" != s.source && \"qqt\" != s.source) {\n                t += '<ul class=\"ds-children\">';\n                var c = lt.getJSON(s.childrenArray || s.children);\n                if (c) for (var s, d = -1,\n                p = c.length - 1; p > d;) s = c[d += 1],\n                t += et.post({\n                    post: s,\n                    options: i\n                });\n                t += \"</ul>\"\n            }\n            return t += \"</li>\"\n        },\n        et.postListHead = function(e) {\n            var t = '<div class=\"ds-comments-info\"><div class=\"ds-sort\"><a class=\"ds-order-desc\">' + z.latest + '</a><a class=\"ds-order-asc\">' + z.earliest + '</a><a class=\"ds-order-hot\">' + z.hottest + '</a></div><ul class=\"ds-comments-tabs\"><li class=\"ds-tab\"><a class=\"ds-comments-tab-duoshuo ds-current\" href=\"javascript:void(0);\"></a></li>';\n            return e.options.show_reposts && e.thread.reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-repost\" href=\"javascript:void(0);\"></a></li>'),\n            t += \" \",\n            e.options.show_weibo && e.thread.weibo_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-weibo\" href=\"javascript:void(0);\"></a></li>'),\n            t += \" \",\n            e.options.show_qqt && e.thread.qqt_reposts && (t += '<li class=\"ds-tab\"><a class=\"ds-comments-tab-qqt\" href=\"javascript:void(0);\"></a></li>'),\n            t += \"</ul></div>\"\n        },\n        et.recentVisitors = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"</div>\";\n            return t\n        },\n        et.replybox = function(e) {\n            var t = '<div class=\"ds-replybox\"><a class=\"ds-avatar\"';\n            if (t += r() ? ' href=\"javascript:void(0);\" onclick=\"return false\"': ' href=\"' + S.REMOTE + \"/settings/avatar/\" + x(T()) + '\" target=\"_blank\" title=\"设置头像\"', t += \">\" + et.avatarImg(nt.data) + '</a><form method=\"post\">' + tt(e.params) + '<div class=\"ds-textarea-wrapper ds-rounded-top\"><textarea name=\"message\" title=\"Ctrl+Enter快捷提交\" placeholder=\"' + u(z.leave_a_message) + '\"></textarea><pre class=\"ds-hidden-text\"></pre>', t += \"</div>\", t += '<div class=\"ds-post-toolbar\"><div class=\"ds-post-options ds-gradient-bg\"><span class=\"ds-sync\">', !r() && nt.data.repostOptions) {\n                t += '<input id=\"ds-sync-checkbox',\n                e.inline && (t += \"-inline\"),\n                t += '\" type=\"checkbox\" name=\"repost\" ',\n                e.checked && (t += 'checked=\"checked\" '),\n                t += 'value=\"' + e.repostArray.join(\",\") + '\"> <label for=\"ds-sync-checkbox',\n                e.inline && (t += \"-inline\"),\n                t += '\">' + z.share_to + \"</label>\";\n                for (var s in nt.data.repostOptions) t += et.serviceIcon(s, !nt.data.repostOptions[s])\n            }\n            return t += \"</span>\",\n            t += \"</div>\",\n            t += '<button class=\"ds-post-button\" type=\"submit\">' + u(z.post) + '</button><div class=\"ds-toolbar-buttons\">',\n            e.options.use_smilies && (t += '<a class=\"ds-toolbar-button ds-add-emote\" title=\"插入表情\"></a>'),\n            e.options.use_images && e.options.parse_html_enabled && (t += '<a class=\"ds-toolbar-button ds-add-image\" title=\"插入图片\"></a>'),\n            t += \"</div></div>\",\n            t += \"</form></div>\"\n        },\n        et.serviceBindList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.bindUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a],\n            nt.data.social_uid[a] && (t += ' <span class=\"ds-icon ds-icon-ok\"></span>'),\n            t += \"</a></li>\";\n            return t\n        },\n        et.serviceList = function(e) {\n            var t = \"\",\n            s = e;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a href=\"' + Z.loginUrl(a) + '\" rel=\"nofollow\" class=\"ds-service-link ds-' + a + '\">' + S.serviceNames[a] + \"</a></li>\";\n            return t\n        },\n        et.shareWidget = function(e) {\n            var t = '<div class=\"ds-share-icons\"> <div class=\"ds-share-icons-inner\"> <ul class=\"ds-share-icons-16\"> ',\n            s = e.services;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += ' <li> <a class=\"ds-' + a + '\" href=\"javascript:void(0);\" data-service=\"' + a + '\">' + S.sourceName[a] + \"</a> </li> \";\n            return t += ' </ul> </div> <div class=\"ds-share-icons-footer\">' + e.copyright + \"</div></div>\"\n        },\n        et.smiliesTooltip = function(e) {\n            var t = '<div id=\"ds-smilies-tooltip\"><ul class=\"ds-smilies-tabs\">';\n            for (var s in e) t += \"<li><a>\" + s + \"</a></li>\";\n            return t += '</ul><div class=\"ds-smilies-container\"></div></div>'\n        },\n        et.toolbar = function() {\n            var e = '<div class=\"ds-toolbar\"><div class=\"ds-account-control\"><span class=\"ds-icon ds-icon-settings\"></span> <span>帐号管理</span><ul><li><a class=\"ds-bind-more\" href=\"javascript:void(0);\" style=\"border-top: none\">绑定更多</a></li><li><a target=\"_blank\" href=\"' + S.REMOTE + \"/settings/\" + x(T()) + '\">' + u(z.settings) + '</a></li><li><a rel=\"nofollow\" href=\"' + Z.logoutUrl() + '\" style=\"border-bottom: none\">登出</a></li></ul></div><div class=\"ds-visitor\">';\n            return e += nt.data.url ? '<a class=\"ds-visitor-name\" href=\"' + u(nt.data.url) + '\" target=\"_blank\">' + u(nt.data.name) + \"</a>\": '<span class=\"ds-visitor-name\">' + u(nt.data.name) + \"</span>\",\n            e += '<a class=\"ds-unread-comments-count\" href=\"javascript:void(0);\" title=\"新回复\"></a></div></div>'\n        },\n        et.topThreads = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<li><a target=\"_blank\" href=\"' + u(a.url) + '\" title=\"' + u(a.title) + '\">' + u(a.title) + \"</a></li>\";\n            return t\n        },\n        et.topUsers = function(e) {\n            var t = \"\",\n            s = e.response;\n            if (s) for (var a, i = -1,\n            r = s.length - 1; r > i;) a = s[i += 1],\n            t += '<div class=\"ds-avatar\">' + et.avatar(a, e.options.avatar_size) + \"<h4>\" + u(a.name) + \"</h4></div>\";\n            return t\n        },\n        et.userInfo = function(e) {\n            var t = '<a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \"/user-url/?user_id=\" + e.user_id + '\\';\" class=\"ds-avatar\" target=\"_blank\">' + et.avatarImg(e) + '</a><a href=\"' + u(e.url) + '\" onclick=\"this.href=\\'' + a() + \"/user-url/?user_id=\" + e.user_id + '\\';\" class=\"ds-user-name ds-highlight\" target=\"_blank\">' + u(e.name) + \"</a>\";\n            for (var s in e.social_uid) t += '<a href=\"' + S.REMOTE + \"/user-proxy/\" + s + \"/\" + e.social_uid[s] + '/\" target=\"_blank\" class=\"ds-service-icon ds-' + s + '\" title=\"' + S.sourceName[s] + '\"></a>';\n            return t += '<p class=\"ds-user-card-meta\"><a href=\"' + S.REMOTE + \"/profile/\" + e.user_id + '/\" target=\"_blank\"><span class=\"ds-highlight\">' + e.comments + \"</span>条评论</a></p>\",\n            e.description && (t += '<p class=\"ds-user-description\">' + u(e.description) + \"</p>\"),\n            t\n        };\n        var st = S.Views = {},\n        at = (S.Callbacks = {},\n        S.pagelets = []),\n        it = S.events = new J,\n        rt = S.site = new V,\n        nt = S.visitor = new $,\n        ot = S.unread = new V,\n        dt = S.threadPool = new Y(G),\n        lt = S.postPool = new Y(F),\n        ct = S.userPool = new Y($);\n        it.on(\"queryDefined\",\n        function() {\n            var e = c.short_name;\n            if (c.theme && n(c.theme), m) {\n                var t = m[\"ds_site_\" + e],\n                s = m[\"ds_lang_\" + e];\n                t && rt.reset(p.parse(t)),\n                s && o.extend(z, p.parse(s))\n            }\n        }),\n        q(),\n        S.require(\"embed.compat\",\n        function() {\n            function i(e) {\n                e.stopPropagation()\n            }\n            function n(e) { (e.ctrlKey && 13 == e.which || 10 == e.which) && B(this.form).trigger(\"submit\")\n            }\n            function d() {\n                var e = B(this);\n                e.height(Math.max(54, e.next(\".ds-hidden-text\").text(this.value).height() + 27))\n            }\n            function l() {\n                if (P.authInWin) {\n                    var e = this.href.match(/\\/(login|bind)\\/(\\w+)\\//i);\n                    if (e && S.serviceNames[e[2]]) return ! b(e[2], this.href)\n                }\n            }\n            function u() {\n                var e, s, a, i, r, n = this,\n                o = 0,\n                d = 0;\n                t.selection && (s = t.selection.createRange(), s && s.parentElement() == n && (i = n.value.length, e = n.value.replace(/\\r\\n/g, \"\\n\"), a = n.createTextRange(), a.moveToBookmark(s.getBookmark()), r = n.createTextRange(), r.collapse(!1), a.compareEndPoints(\"StartToEnd\", r) > -1 ? o = d = i: (o = -a.moveStart(\"character\", -i), o += e.slice(0, o).split(\"\\n\").length - 1, a.compareEndPoints(\"EndToEnd\", r) > -1 ? d = i: (d = -a.moveEnd(\"character\", -i), d += e.slice(0, d).split(\"\\n\").length - 1)))),\n                B(n).data(\"ds-range-start\", o).data(\"ds-range-end\", d)\n            }\n            function p(e) {\n                return P.touch && e.addClass(\"ds-touch\"),\n                o.cssProperty(\"transition\") || e.addClass(\"ds-no-transition\"),\n                P.ie6 && e.addClass(\"ds-ie6\"),\n                P.opacity || e.addClass(\"ds-no-opacity\"),\n                e\n            }\n            function f(e) {\n                if (!P.placeholder) {\n                    var t = e.attr(\"placeholder\");\n                    e.val(t).focus(function() {\n                        this.value === t && (this.value = \"\")\n                    }).blur(function() {\n                        \"\" === this.value && (this.value = t)\n                    })\n                }\n                return e\n            }\n            function g(e) {\n                if (\"http://duoshuo.com\" === e.origin) switch (e.data.type) {\n                case \"login\":\n                    h.href = e.data.redirectUrl\n                }\n            }\n            function b(t, s) {\n                var a = {\n                    weibo: [760, 600],\n                    renren: [420, 322],\n                    qq: [504, 445],\n                    weixin: [450, 550],\n                    google: [600, 440]\n                } [t] || [550, 400];\n                return e.open(s + ( - 1 == s.indexOf(\"?\") ? \"?\": \"&\") + o.param({\n                    origin: h.origin || \"http://\" + h.host\n                }), \"_blank\", \"width=\" + a[0] + \",height=\" + a[1] + \",toolbar=no,menubar=no,location=yes\")\n            }\n            function y(e) {\n                var t = Z[r() ? \"loginUrl\": \"bindUrl\"](e);\n                P.authInWin && b(e, t) || (h.href = t)\n            }\n            function w() {\n                var e = E(et[\"dialog-ask-for-auth\"]({})).el.find(\".ds-dialog\").css(\"width\", \"300px\");\n                e.find(\"a.ds-service-link\").click(l)\n            }\n            function x(e, t, s, a) {\n                function i() {\n                    function e(e) {\n                        if (s && a) {\n                            var t = s.options,\n                            i = U(s.postList.el, e.response[a], t);\n                            \"asc\" == t.order == (\"top\" == t.formPosition) && S.scrollTo(i);\n                            var r = s.el.find(\".ds-comments-tab-\" + a + \" span.ds-highlight\");\n                            r.html(parseInt(r.html()) + 1)\n                        }\n                    }\n                    return a || l.find(\"[type=checkbox]:checked\")[0] ? (A.post(\"posts/repost\", S.toJSON(l), e), o.close(), !1) : (alert(\"还没有选发布到哪儿呢\"), !1)\n                }\n                function r() {\n                    var e = this.value;\n                    return this.checked && !nt.data.social_uid[\"qqt\" == e ? \"qq\": e] ? void y(e) : void 0\n                }\n                var o = E(et[\"dialog-reposts\"]({\n                    post: e.toJSON(),\n                    repostMessage: t,\n                    service: a\n                })),\n                l = o.el.find(\"form\");\n                return l.submit(i),\n                l.find(\".ds-actions [type=checkbox]\").change(r),\n                f(l.find(\"textarea\")).keyup(n).keyup(d).focus(),\n                !1\n            }\n            function T(e) {\n                var t = {\n                    \"unread-comments\": {\n                        title: \"新留言及回复\",\n                        apiUrl: \"users/unreadComments\",\n                        tmpl: function(e) {\n                            return e.thread ? '<li data-thread-id=\"' + e.thread.thread_id + '\">' + B.map(e.authors, et.userAnchor).join(\"、\") + ' 在 <a class=\"ds-read\" href=\"' + e.thread.url + '#comments\" target=\"_blank\">' + _(e.thread.title || \"无标题\") + '</a> 中回复了你 <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\">知道了</a></li>': \"\"\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-thread-id\");\n                            A.post(\"threads/read\", {\n                                thread_id: t\n                            }),\n                            ot.data.comments--\n                        }\n                    },\n                    \"unread-notifications\": {\n                        title: \"系统消息\",\n                        apiUrl: \"users/unreadNotifications\",\n                        tmpl: function(e) {\n                            return '<li data-notification-id=\"' + e.notification_id + '\" data-notification-type=\"' + e.type + '\">' + e.content + ' <a class=\"ds-delete ds-read\" title=\"知道了\" href=\"javascript:void(0)\">知道了</a></li>'\n                        },\n                        read: function(e) {\n                            var t = e.attr(\"data-notification-id\");\n                            A.post(\"notifications/read\", {\n                                notification_id: t\n                            }),\n                            ot.data.notifications--\n                        }\n                    }\n                } [e],\n                s = E(\"<h2>\" + t.title + '</h2><ul class=\"ds-unread-list\"></ul>');\n                s.on(\"close\", S.resetNotify);\n                var a = s.el.find(\".ds-unread-list\").delegate(\".ds-delete\", \"click\",\n                function() {\n                    return B(this).parent().remove(),\n                    0 === a.children().length && s.close(),\n                    !1\n                }).delegate(\".ds-read\", \"click\",\n                function() {\n                    t.read(B(this).parent())\n                });\n                B(\"#ds-notify\").hide(),\n                A.get(t.apiUrl, {},\n                function(e) {\n                    s.el.find(\".ds-unread-list\").html(B.map(e.response, t.tmpl).join(\"\\n\"))\n                })\n            }\n            function N() {\n                bubbleOutTimer && (clearTimeout(bubbleOutTimer), bubbleOutTimer = 0)\n            }\n            function I() {\n                bubbleOutTimer = setTimeout(function() {\n                    bubbleOutTimer = 0,\n                    X.detach()\n                },\n                400)\n            }\n            function U(e, t, s) {\n                return e.find(\".ds-post[data-post-id=\" + t.data.post_id + \"]\")[0] ? void 0 : (e.find(\".ds-post-placeholder\").remove(), B(et.post({\n                    post: t.toJSON(),\n                    options: s\n                })).hide()[\"asc\" == s.order ? \"appendTo\": \"prependTo\"](e).slideDown(function() {}))\n            }\n            function R(e, t) {\n                function s() {\n                    if (r()) return w(),\n                    !1;\n                    var e = B(this).parent(),\n                    t = e.hasClass(\"ds-post-liked\"),\n                    s = B(this).html().match(/\\((\\d+)\\)/),\n                    a = (s ? parseInt(s[1]) : 0) + (t ? -1 : 1);\n                    return A.post(\"posts/vote\", {\n                        post_id: e.closest(\".ds-ctx-entry, .ds-post-self\").attr(\"data-post-id\"),\n                        vote: t ? 0 : 1\n                    }),\n                    B(this).html(B(this).html().replace(/\\(\\d+\\)/, \"\") + (a ? \"(\" + a + \")\": \"\")),\n                    e[t ? \"removeClass\": \"addClass\"](\"ds-post-liked\"),\n                    !1\n                }\n                function a() {\n                    var e = B(this).closest(\".ds-post-self\"),\n                    t = lt[e.attr(\"data-post-id\")];\n                    return x(t, \"\"),\n                    !1\n                }\n                function i() {\n                    if (!confirm(\"确定要删除这条评论吗？\")) return ! 1;\n                    var t = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/remove\", {\n                        post_id: t.attr(\"data-post-id\")\n                    }),\n                    t.parent().fadeOut(200,\n                    function() {\n                        e.data.comments--,\n                        e.updateCounter(\"duoshuo\"),\n                        B(this).remove()\n                    }),\n                    !1\n                }\n                function n() {\n                    if (!confirm(\"确定要举报这条评论吗？\")) return ! 1;\n                    var e = B(this).closest(\".ds-post-self\");\n                    return A.post(\"posts/report\", {\n                        post_id: e.attr(\"data-post-id\")\n                    }),\n                    alert(\"感谢您的反馈！\"),\n                    !1\n                }\n                function o() {\n                    var s = B(this),\n                    a = s.closest(\".ds-comment-actions\");\n                    if (a.hasClass(\"ds-reply-active\")) h.el.fadeOut(200,\n                    function() {\n                        B(this).detach()\n                    }),\n                    a.removeClass(\"ds-reply-active\");\n                    else {\n                        var i = s.closest(\".ds-ctx-entry, .ds-post-self\");\n                        h ? h.actionsBar.removeClass(\"ds-reply-active\") : (h = new st.Replybox(e), h.render(!0).el.addClass(\"ds-inline-replybox\").detach()),\n                        h.el.find(\"[name=parent_id]\").val(i.attr(\"data-post-id\")),\n                        h.el.show().appendTo(s.closest(\".ds-ctx-body, .ds-comment-body\")).find(\"textarea\").focus(),\n                        h.actionsBar = a.addClass(\"ds-reply-active\"),\n                        t.max_depth <= 1 ? h.postList = e.postList.el: (h.postList = i.siblings(\".ds-children\"), h.postList[0] || (h.postList = B('<ul class=\"ds-children\"></ul>').insertAfter(i)))\n                    }\n                    return ! 1\n                }\n                function d() {\n                    function e(e) {\n                        W(e),\n                        i.append(B.map(e.response,\n                        function(e) {\n                            return et.post({\n                                post: e,\n                                options: t\n                            })\n                        }).join(\"\"))\n                    } {\n                        var s = B(this).closest(\".ds-post-self\"),\n                        a = s.attr(\"data-post-id\");\n                        s.data(\"source\")\n                    }\n                    if (0 != s.attr(\"data-root-id\")) return ! 1;\n                    var i = s.siblings(\".ds-children\");\n                    return i[0] ? (i.remove(), !1) : (i = B('<ul class=\"ds-children\"></ul>').insertAfter(s), A.get(\"posts/listComments\", H({\n                        post_id: a\n                    }), e), !1)\n                }\n                function l() {\n                    var t = B(this).closest(\".ds-post-self\"),\n                    s = lt[t.attr(\"data-post-id\")],\n                    a = s.data.source;\n                    if (!nt.data.social_uid[\"qqt\" == a ? \"qq\": a]) return void y(a);\n                    var i = s.data.root_id,\n                    r = \"0\" != i ? lt[i] : s,\n                    n = \"\";\n                    if (\"0\" != i) {\n                        var o = prepatePost(s.data).theAuthor;\n                        n = (\"weibo\" == a ? \"//@\" + o.name: \"|| @\" + o.qqt_account) + \":\" + s.data.message\n                    }\n                    return x(r, n, e, a),\n                    !1\n                }\n                function c() {\n                    var e = B(this).parent();\n                    return e.siblings().show(),\n                    e.remove(),\n                    !1\n                }\n                function u() {\n                    function t() {\n                        function t(e) {\n                            var t = e.response;\n                            ct[c] ? ct[c].set(t) : ct[c] = new $(t),\n                            X.owner == s && K.html(et.userInfo(t))\n                        }\n                        tt = 0,\n                        X.owner = s,\n                        N();\n                        var i = a.offset(),\n                        r = e.el.offset(),\n                        n = a.innerWidth() / 2,\n                        o = e.el.innerHeight() - (i.top - r.top) + 6,\n                        d = i.left - r.left - 35 + (n > 35 ? 35 : n);\n                        try {\n                            if (a.hasClass(\"ds-comment-context\")) K.attr(\"id\", \"ds-ctx-bubble\").attr(\"data-post-id\", a.attr(\"data-post-id\")).html('<ul id=\"ds-ctx\">' + et.ctxPost({\n                                post: lt[a.attr(\"data-parent-id\")].toJSON()\n                            }) + '</ul><div class=\"ds-bubble-footer\"><a class=\"ds-ctx-open\" href=\"javascript:void(0);\">查看对话</a></div>');\n                            else if (a.hasClass(\"ds-avatar\") || a.hasClass(\"ds-user-name\")) {\n                                var l = {},\n                                c = l.user_id = a.attr(\"data-user-id\");\n                                if (!c) throw \"no info\";\n                                K.attr(\"id\", \"ds-user-card\").attr(\"data-user-id\", c).empty(),\n                                ct[c] ? K.html(et.userInfo(ct[c].data)) : A.get(\"users/profile\", H(l), t)\n                            }\n                            X.css({\n                                bottom: o,\n                                left: d\n                            }).appendTo(e.innerEl)\n                        } catch(u) {\n                            X.detach()\n                        }\n                    }\n                    var s = this;\n                    if (bubbleOutTimer && X.owner == s) return clearTimeout(bubbleOutTimer),\n                    void(bubbleOutTimer = 0);\n                    var a = B(s);\n                    tt = setTimeout(t, 200)\n                }\n                function p() {\n                    tt ? (clearTimeout(tt), tt = 0) : bubbleOutTimer || I()\n                }\n                var h;\n                this.delegate(\"a.ds-post-likes\", \"click\", s).delegate(\"a.ds-post-repost\", \"click\", a).delegate(\"a.ds-post-delete\", \"click\", i).delegate(\"a.ds-post-report\", \"click\", n).delegate(\"a.ds-post-reply\", \"click\", o).delegate(\"a.ds-weibo-comments\", \"click\", d).delegate(\"a.ds-weibo-reposts\", \"click\", l).delegate(\"a.ds-expand\", \"click\", c),\n                P.touch || this.delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseenter\", u).delegate(\"a.ds-comment-context, .ds-avatar, .ds-user-name\", \"mouseleave\", p)\n            }\n            function H(e) {\n                var s = {\n                    require: \"site,visitor,nonce,lang\" + (it++?\"\": \",unread,log,extraCss\"),\n                    site_ims: D.get(\"ds_site_\" + c.short_name + \":timestamp\"),\n                    lang_ims: D.get(\"ds_lang_\" + c.short_name + \":timestamp\"),\n                    referer: t.referrer\n                };\n                c.stylePatch && (s.style_patch = c.stylePatch);\n                for (var a in s) s[a] && (!P.ie6 || encodeURIComponent(s[a]).length < 200) && (e[a] = s[a]);\n                return e\n            }\n            var B = S.jQuery,\n            V = B(e),\n            Y = B(t);\n            e.postMessage && (e.addEventListener ? e.addEventListener(\"message\", g, !1) : e.attachEvent && e.attachEvent(\"onmessage\", g)),\n            S.scrollTo = function(e) {\n                var t = e.offset().top; (t < V.scrollTop() || t > V.scrollTop() + V.height()) && B(\"html, body\").animate({\n                    scrollTop: t - 40\n                },\n                200, \"swing\")\n            },\n            S.toJSON = function(e) {\n                var t = /\\r?\\n/g,\n                s = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,\n                a = /^(?:select|textarea)/i,\n                i = e.map(function() {\n                    return this.elements ? B.makeArray(this.elements) : this\n                }).filter(function() {\n                    return this.name && !this.disabled && (this.checked || a.test(this.nodeName) || s.test(this.type))\n                }).map(function(e, s) {\n                    var a = B(this).val();\n                    return null == a ? null: B.isArray(a) ? B.map(a,\n                    function(e) {\n                        return {\n                            name: s.name,\n                            value: e.replace(t, \"\\r\\n\")\n                        }\n                    }) : {\n                        name: s.name,\n                        value: a.replace(t, \"\\r\\n\")\n                    }\n                }).toArray(),\n                r = {};\n                return B.each(i,\n                function() {\n                    r[this.name] = this.value\n                }),\n                r\n            },\n            S.resetNotify = function() {\n                var e = B(\"#ds-notify\"),\n                s = ot.data;\n                e[0] || (e = B('<div id=\"ds-notify\"></div>').css({\n                    hidden: {\n                        display: \"none\"\n                    },\n                    \"top-right\": {\n                        top: \"24px\",\n                        right: \"24px\"\n                    },\n                    \"bottom-right\": {\n                        bottom: \"24px\",\n                        right: \"24px\"\n                    }\n                } [rt.data.notify_position]).delegate(\".ds-notify-unread a\", \"click\",\n                function() {\n                    return T(B(this).data(\"type\")),\n                    !1\n                }).appendTo(t.body)),\n                e.html(et.notify(s))[!s.comments && !s.notifications || \"hidden\" === rt.data.notify_position || B(\".ds-dialog\")[0] ? \"hide\": \"show\"]()\n            },\n            ot.on(\"reset\", S.resetNotify),\n            st.Replybox = function(e) {\n                this.embedThread = e\n            },\n            st.Replybox.prototype = {\n                render: function(e) {\n                    function s(e) {\n                        e.data(\"submitting\", !0),\n                        e.find(\".ds-post-button\").addClass(\"ds-waiting\").html(z.posting)[0].disabled = !0\n                    }\n                    function a(e) {\n                        e.data(\"submitting\", !1),\n                        e.find(\".ds-post-button\").removeClass(\"ds-waiting\").html(z.post)[0].disabled = !1\n                    }\n                    var i = this,\n                    o = i.embedThread,\n                    c = o.options,\n                    p = function() {\n                        S.require(\"smilies\",\n                        function() {})\n                    },\n                    h = {\n                        thread: o,\n                        options: c,\n                        inline: e,\n                        params: {\n                            thread_id: o.threadId,\n                            parent_id: \"\",\n                            nonce: S.nonce\n                        },\n                        repostArray: [],\n                        checked: 0\n                    };\n                    for (var v in nt.data.repostOptions) nt.data.repostOptions[v] && (h.repostArray.push(v), h.checked = 1);\n                    var g = i.el = B(et.replybox(h)).click(p),\n                    b = g.find(\"form\"),\n                    y = b.find(\"input[type=checkbox]\")[0],\n                    _ = b.find(\"a.ds-service-icon, a.ds-service-icon-grey\"),\n                    k = f(b.find(\"textarea\")).focus(p).keyup(n).keyup(d).bind(\"focus mousedown mouseup keyup\", u),\n                    w = g.find(\".ds-add-emote\").click(function(e) {\n                        var s = S.smiliesTooltip;\n                        return w.toggleClass(\"ds-expanded\").hasClass(\"ds-expanded\") ? (s || (s = S.smiliesTooltip = new st.SmiliesTooltip, s.render(), S.require(\"smilies\",\n                        function() {\n                            s.reset(\"微博-默认\")\n                        })), s.replybox = i, s.el.appendTo(t.body).css({\n                            top: i.el.offset().top + i.el.outerHeight() + 4 + \"px\",\n                            left: i.el.find(\".ds-textarea-wrapper\").offset().left + \"px\"\n                        }), B(t.body).click(x)) : x(e),\n                        !1\n                    }),\n                    x = (g.find(\".ds-add-image\").click(function(e) {\n                        var s = k[0],\n                        a = s.value,\n                        i = \"请输入图片地址\",\n                        r = '<img src=\"' + i + '\" />';\n                        if (t.selection) {\n                            s.value = a.substring(0, k.data(\"ds-range-start\")) + r + a.substring(k.data(\"ds-range-end\"), a.length),\n                            s.value = s.value.replace(\"说点什么吧 ...\", \"\"),\n                            s.focus();\n                            var n = t.selection.createRange();\n                            n.collapse(),\n                            n.findText(i),\n                            n.select()\n                        } else {\n                            s.value = a.substring(0, s.selectionStart) + r + a.substring(s.selectionEnd);\n                            var o = s.value.search(i);\n                            s.setSelectionRange(o, o + i.length),\n                            s.focus()\n                        }\n                        e.preventDefault()\n                    }), i.hideSmilies = function() {\n                        w.removeClass(\"ds-expanded\"),\n                        S.smiliesTooltip.el.detach(),\n                        B(t.body).unbind(\"click\", x)\n                    }),\n                    T = function(e, t) {\n                        var s = E(et[\"dialog-anonymous\"]({\n                            services: [\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"],\n                            options: c\n                        })),\n                        a = s.el.find(\".ds-dialog\").css(\"width\", \"320px\");\n                        if (a.find(\".ds-icons-32 a\").click(l), !c.deny_anonymous) {\n                            var i = s.el.find(\"form\");\n                            i.submit(function() {\n                                var e = i.find(\"input[name=author_email]\").val();\n                                return ! e && !c.require_guest_email || e.match(/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) ? (t(S.toJSON(i)), s.close(), !1) : (alert(\"请输入一个有效的email地址.\"), !1)\n                            }),\n                            i.find(\"input[name=author_name]\")[0].focus()\n                        }\n                    };\n                    c.deny_anonymous && k.focus(function() {\n                        if (r()) {\n                            T(b, q);\n                            var e = function(t) {\n                                t.stopPropagation(),\n                                k.unbind(\"click\", e)\n                            };\n                            k.click(e)\n                        }\n                        return ! 1\n                    });\n                    var q = function(e) {\n                        s(b),\n                        A.post(\"posts/create\", B.extend(S.toJSON(b), e),\n                        function(e) {\n                            var t = lt[e.response.post_id] = new F(e.response),\n                            s = U(i.postList, t, c);\n                            if (\"asc\" == c.order == (\"top\" == c.formPosition) && S.scrollTo(s), o.data.comments++, o.updateCounter(\"duoshuo\"), k.val(\"\").trigger(\"keyup\"), a(b), g.hasClass(\"ds-inline-replybox\") && (g.detach(), i.actionsBar.removeClass(\"ds-reply-active\")), m) try {\n                                m.removeItem(\"ds_draft_\" + o.threadId)\n                            } catch(r) {}\n                        },\n                        function(e) {\n                            a(b),\n                            alert(e.errorMessage)\n                        })\n                    };\n                    b.submit(function() {\n                        if (b.data(\"submitting\")) return ! 1;\n                        var e = B.trim(b[0].message.value);\n                        return \"\" == e || !P.placeholder && e == k.attr(\"placeholder\") ? (alert(\"您还没写内容呢\"), !1) : (r() ? T(b, q) : q(), !1)\n                    });\n                    var C = function(e) {\n                        return B(e).hasClass(\"ds-service-icon-grey\") ? null: B(e).attr(\"data-service\")\n                    };\n                    if (_.click(function() {\n                        return B(this).toggleClass(\"ds-service-icon-grey\").toggleClass(\"ds-service-icon\"),\n                        y.value = B.map(_, C).join(\",\"),\n                        y.checked = \"\" != y.value,\n                        !1\n                    }), B(y).change(function() {\n                        var e = this.checked;\n                        _[e ? \"removeClass\": \"addClass\"](\"ds-service-icon-grey\")[e ? \"addClass\": \"removeClass\"](\"ds-service-icon\"),\n                        this.value = B.map(_, C).join(\",\")\n                    }), !e && m) {\n                        var j = \"ds_draft_\" + o.threadId;\n                        k.bind(\"focus blur keyup\",\n                        function(e) {\n                            var t = B(e.currentTarget).val();\n                            try {\n                                m[j] = t\n                            } catch(e) {}\n                        }),\n                        m[j] && k.val(m[j])\n                    }\n                    return this\n                }\n            },\n            st.Dialog = J.extend({\n                init: function(e, t) { (this.el = B(\"#ds-wrapper\"))[0] || (this.el = p(B('<div id=\"ds-wrapper\"></div>'))),\n                    this.options = B.extend({\n                        width: 600\n                    },\n                    t),\n                    e !== s && B(e).attr(\"id\", \"ds-reset\").appendTo(this.el)\n                },\n                open: function() {\n                    function e(e) {\n                        return 27 == e.which ? (a.close(), !1) : void 0\n                    }\n                    function s() {\n                        return a.close(),\n                        !1\n                    }\n                    var a = this;\n                    return a.el.hide().appendTo(t.body).fadeIn(200),\n                    P.ie6 && a.el.css(\"top\", V.scrollTop() + 100),\n                    a.el.show().find(\".ds-dialog\").delegate(\"a.ds-dialog-close\", \"click\",\n                    function() {\n                        return a.close(),\n                        !1\n                    }).click(i),\n                    Y.keydown(e),\n                    B(t.body).click(s),\n                    a.close = function() {\n                        Y.unbind(\"keydown\", e),\n                        B(t.body).unbind(\"click\", s),\n                        a.el.fadeOut(200,\n                        function() {\n                            B(this).remove()\n                        }),\n                        a.trigger(\"close\")\n                    },\n                    a\n                }\n            }),\n            et.likePanel = function(e) {\n                return e.likes ? '<span class=\"ds-highlight\">' + e.likes + \"</span> 人喜欢\": \"\"\n            },\n            st.Meta = function(e) {\n                this.embedThread = e\n            },\n            st.Meta.prototype = {\n                render: function() {\n                    function a(a) {\n                        function r(e) {\n                            o.set(e),\n                            n.resetLikePanel()\n                        }\n                        function c() {\n                            n.tooltip.detach(),\n                            B(t.body).unbind(\"click\", c)\n                        }\n                        function u(t) {\n                            switch (this.className) {\n                            case \"ds-like-tooltip-close\":\n                                c(t);\n                                break;\n                            default:\n                                if (!e.open(this.href, \"_blank\", \"height=500,width=600,top=0,left=0,toolbar=no,menubar=no,resizable=yes,location=yes,status=no\")) return\n                            }\n                            return ! 1\n                        }\n                        var p = l.hasClass(\"ds-thread-liked\");\n                        if (A.post(\"threads/vote\", {\n                            thread_id: n.embedThread.threadId,\n                            vote: p ? 0 : 1\n                        },\n                        r), l.toggleClass(\"ds-thread-liked\"), l.find(\".ds-thread-like-text\").text(p ? \"喜欢\": \"已喜欢\"), p) return n.tooltip && c(a),\n                        !1;\n                        if (n.tooltip === s) {\n                            var h = et.likeTooltip({\n                                services: {\n                                    qzone: \"QQ空间\",\n                                    weibo: \"新浪微博\",\n                                    qqt: \"腾讯微博\",\n                                    renren: \"人人网\",\n                                    kaixin: \"开心网\",\n                                    douban: \"豆瓣网\",\n                                    baidu: \"百度搜藏\"\n                                },\n                                thread_id: o.data.thread_id\n                            });\n                            n.tooltip = B(h).click(i).delegate(\"a\", \"click\", u)\n                        }\n                        var f = {};\n                        return f.left = 0,\n                        f.top = d.position().top + d.outerHeight() - 4 + \"px\",\n                        n.tooltip.appendTo(n.embedThread.innerEl).css(f),\n                        B(t.body).click(c),\n                        !1\n                    }\n                    var n = this,\n                    o = n.embedThread.model,\n                    d = n.el = B(et.meta(o.toJSON())),\n                    l = d.find(\".ds-like-thread-button\");\n                    return l.click(a),\n                    n.resetLikePanel(),\n                    r() && d.hide(),\n                    n\n                },\n                resetLikePanel: function() {\n                    this.el.find(\".ds-like-panel\").html(et.likePanel(this.embedThread.model.toJSON()))\n                }\n            },\n            st.PostListHead = function(e) {\n                this.embedThread = e\n            },\n            st.PostListHead.prototype = {\n                render: function() {\n                    function e(e) {\n                        r.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.page = 1;\n                        var t = e.currentTarget;\n                        switch (t.className) {\n                        case \"ds-comments-tab-duoshuo\":\n                            a.params.source = \"duoshuo\",\n                            s.replybox.el.show();\n                            break;\n                        case \"ds-comments-tab-repost\":\n                            a.params.source = \"repost\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-weibo\":\n                            a.params.source = \"weibo\",\n                            s.replybox.el.hide();\n                            break;\n                        case \"ds-comments-tab-qqt\":\n                            a.params.source = \"qqt\",\n                            s.replybox.el.hide()\n                        }\n                        return B(t).addClass(\"ds-current\"),\n                        a.refetch(),\n                        !1\n                    }\n                    function t() {\n                        return n.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                        a.params.order = s.options.order = this.className.replace(\"ds-order-\", \"\"),\n                        a.params.page = 1,\n                        a.refetch(),\n                        B(this).addClass(\"ds-current\"),\n                        !1\n                    }\n                    var s = this.embedThread,\n                    a = s.postList,\n                    i = this.el = B(et.postListHead({\n                        thread: s.model.toJSON(),\n                        options: s.options\n                    })),\n                    r = i.find(\"ul.ds-comments-tabs\");\n                    r.delegate(\".ds-tab a\", \"click\", e);\n                    var n = i.find(\".ds-sort\");\n                    return n.delegate(\"a\", \"click\", t),\n                    n.find(\".ds-order-\" + a.params.order).addClass(\"ds-current\"),\n                    this\n                }\n            },\n            st.Paginator = function(e) {\n                function t() {\n                    return i.params.page = parseInt(this.innerHTML),\n                    i.refetch(),\n                    a.find(\".ds-current\").removeClass(\"ds-current\"),\n                    B(this).addClass(\"ds-current\"),\n                    !1\n                }\n                e = e || {};\n                var s = this,\n                a = s.el = e.el || B('<div class=\"ds-paginator\"></div>'),\n                i = s.collection = e.collection;\n                a.delegate(\"a\", \"click\", t)\n            },\n            st.Paginator.prototype = {\n                reset: function(e) {\n                    function t(e) {\n                        i.push('<a data-page=\"' + e + '\" href=\"javascript:void(0);\">' + e + \"</a>\")\n                    }\n                    var s, a = this.collection.params.page || 1,\n                    i = [];\n                    if (a > 1) for (t(1), s = a > 4 ? a - 2 : 2, s > 2 && i.push('<span class=\"page-break\">...</span>'); a > s; s++) t(s);\n                    if (i.push('<a data-page=\"' + a + '\" href=\"javascript:void(0);\" class=\"ds-current\">' + a + \"</a>\"), a < e.pages) {\n                        for (s = a + 1; a + 4 >= s && s < e.pages; s++) t(s);\n                        s < e.pages && i.push('<span class=\"page-break\">...</span>'),\n                        t(e.pages)\n                    }\n                    this.el.html('<div class=\"ds-border\"></div>' + i.join(\" \"))[e.pages > 1 ? \"show\": \"hide\"]()\n                }\n            },\n            S.addSmilies = function(e, t) {\n                var s = S.smiliesTooltip;\n                s && s.el.find(\"ul.ds-smilies-tabs\").append(\"<li><a>\" + e + \"</a></li>\"),\n                S.smilies[e] = t\n            },\n            st.SmiliesTooltip = function() {},\n            st.SmiliesTooltip.prototype = {\n                render: function() {\n                    function e() {\n                        var e = s.replybox,\n                        a = e.el.find(\"textarea\"),\n                        i = a[0],\n                        r = i.value;\n                        if (t.selection) {\n                            i.value = r.substring(0, a.data(\"ds-range-start\")) + this.title + r.substring(a.data(\"ds-range-end\"), r.length),\n                            i.value = i.value.replace(z.leave_a_message, \"\"),\n                            i.focus();\n                            var n = t.selection.createRange();\n                            n.moveStart(\"character\", a.data(\"ds-range-start\") + this.title.length),\n                            n.collapse(),\n                            n.select()\n                        } else {\n                            var o = i.selectionStart + this.title.length;\n                            i.value = r.substring(0, i.selectionStart) + this.title + r.substring(i.selectionEnd),\n                            i.setSelectionRange(o, o)\n                        }\n                        e.hideSmilies(),\n                        i.focus()\n                    }\n                    var s = this,\n                    a = s.el = B(et.smiliesTooltip(L));\n                    return a.click(i).find(\"ul.ds-smilies-tabs\").delegate(\"a\", \"click\",\n                    function() {\n                        s.reset(this.innerHTML)\n                    }),\n                    a.find(\".ds-smilies-container\").delegate(\"img\", \"click\", e),\n                    this\n                },\n                reset: function(e) {\n                    function t(t, s) {\n                        var i = 0 === e.indexOf(\"微博\") ? \"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/\" + s.replace(\"_org\", \"_thumb\") : S.STATIC_URL + \"/images/smilies/\" + s;\n                        \"WordPress\" === e && (t = \" \" + t + \" \"),\n                        a += '<li><img src=\"' + i + '\" title=\"' + _(t) + '\" /></li>'\n                    }\n                    var s = this.el.find(\"ul.ds-smilies-tabs\");\n                    s.find(\"a.ds-current\").removeClass(\"ds-current\"),\n                    s.find(\"a\").filter(function() {\n                        return this.innerHTML == e\n                    }).addClass(\"ds-current\");\n                    var a = \"<ul>\";\n                    return B.each(L[e], t),\n                    a += \"</ul>\",\n                    this.el.find(\".ds-smilies-container\").html(a),\n                    this\n                }\n            },\n            et.postPlaceholder = function() {\n                return ['<li class=\"ds-post ds-post-placeholder\">', z.no_comments_yet, \"</li>\"].join(\"\")\n            };\n            var X = B('<div id=\"ds-bubble\"><div class=\"ds-bubble-content\"></div><div class=\"ds-arrow ds-arrow-down ds-arrow-border\"></div><div class=\"ds-arrow ds-arrow-down\"></div></div>'),\n            K = X.find(\".ds-bubble-content\").delegate(\"a.ds-ctx-open\", \"click\",\n            function() {\n                function e(e) {\n                    function t(e, t) {\n                        return et.ctxPost({\n                            post: e,\n                            index: t\n                        })\n                    }\n                    C.log(B.map(e.response, t).join(\"\\n\"));\n                    s.el.find(\"ol\");\n                    s.el.find(\"ol\").html(B.map(e.response, t).join(\"\\n\"))\n                }\n                var t = {};\n                t.post_id = K.attr(\"data-post-id\"),\n                A.get(\"posts/conversation\", t, e);\n                var s = E('<h2>查看对话</h2><ol id=\"ds-ctx\"></ol>');\n                return s.el.find(\".ds-dialog\").css(\"width\", \"600px\"),\n                s.el.find(\".ds-dialog-body\").css({\n                    \"max-height\": \"350px\",\n                    _height: \"350px\",\n                    \"overflow-y\": \"auto\",\n                    \"padding-top\": \"10px\"\n                }),\n                !1\n            }),\n            tt = bubbleOutTimer = 0;\n            X.mouseenter(N).mouseleave(I),\n            st.PostList = function(e) {\n                e && (e.params && (this.params = e.params), e.embedThread && (this.embedThread = e.embedThread)),\n                this.el = B('<ul class=\"ds-comments\"></ul>')\n            },\n            st.PostList.prototype = {\n                url: \"threads/listPosts\",\n                render: function() {\n                    return R.call(this.el, this.embedThread, this.embedThread.options),\n                    this\n                },\n                reset: function(e) {\n                    var t = this.embedThread.options;\n                    this.el.html(e[0] ? B.map(lt.getJSON(e),\n                    function(e) {\n                        return et.post({\n                            post: e,\n                            options: t\n                        })\n                    }).join(\"\") : et.postPlaceholder())\n                },\n                refetch: function() {\n                    function e(e) {\n                        lt.set(e.parentPosts || e.relatedPosts),\n                        ct.set(e.users),\n                        s.reset(e.response),\n                        s.embedThread.paginator.reset(e.cursor),\n                        s.el.fadeTo(200, 1),\n                        S.scrollTo(s.el),\n                        a.remove()\n                    }\n                    var s = this,\n                    a = B(et.indicator()).appendTo(t.body).fadeIn(200);\n                    s.el.fadeTo(200, .5),\n                    A.get(s.url, s.params, e)\n                }\n            },\n            st.EmbedThread = Q.extend({\n                uri: \"threads/listPosts\",\n                params: \"thread-id local-thread-id source-thread-id thread-key category channel-key author-key author-id url limit order max-depth form-position container-url\" + (v.match(/MSIE 6\\.0/) ? \"\": \" title image thumbnail\"),\n                render: function() {\n                    var e = this.el;\n                    if (\"请将此处替换成文章在你的站点中的ID\" === e.data(\"thread-key\")) return alert(\"请设置正确的 data-thread-key 属性\"),\n                    !1;\n                    e.attr(\"id\", \"ds-thread\").append(et.waitingImg());\n                    var t = e.width(),\n                    s = e.data(\"url\") || !e.attr(\"data-thread-id\") && B(\"link[rel=canonical]\").attr(\"href\");\n                    s ? e.data(\"url\", k(s)) : e.data(\"container-url\", h.href),\n                    t && 400 >= t && e.addClass(\"ds-narrow\").data(\"max-depth\", 1)\n                },\n                updateCounter: function(e) {\n                    function t(e) {\n                        return e.substr(e.indexOf(\"}\") + 1)\n                    }\n                    var s = {\n                        duoshuo: [\"comments\", t(z.comments_multiple) || \"评论\"],\n                        repost: [\"reposts\", t(z.reposts_multiple) || \"转载\"],\n                        weibo: [\"weibo_reposts\", t(z.weibo_reposts_multiple) || \"新浪微博\"],\n                        qqt: [\"qqt_reposts\", t(z.qqt_reposts_multiple) || \"腾讯微博\"]\n                    };\n                    for (var a in s) if (!e || e == a) {\n                        var i = this.data[s[a][0]];\n                        this.el.find(\".ds-comments-tab-\" + a).html(this.el.hasClass(\"ds-narrow\") ? '<span class=\"ds-service-icon ds-' + a + '\"></span>' + i: (i ? '<span class=\"ds-highlight\">' + i + \"</span>\": \"0\") + s[a][1])\n                    }\n                },\n                onError: function(e) {\n                    this.el.html(\"评论框出错啦(\" + e.code + \"): \" + e.errorMessage)\n                },\n                onload: function(t) {\n                    var a = this,\n                    i = a.threadId = t.thread.thread_id,\n                    n = t.cursor,\n                    o = a.options = t.options,\n                    d = a.innerEl = p(B('<div id=\"ds-reset\"></div>').appendTo(a.el));\n                    a.model = new G(a.data = t.thread),\n                    lt.set(t.parentPosts || t.relatedPosts),\n                    ct.set(t.users),\n                    a.el.find(\"#ds-waiting\").remove(),\n                    o.like_thread_enabled && (a.meta = new st.Meta(a), d.append(a.meta.render().el)),\n                    o.hot_posts && t.hotPosts && t.hotPosts.length && (a.hotPosts = new st.HotPosts(B('<div class=\"ds-rounded\"></div>'), {\n                        max_depth: 1,\n                        show_context: o.show_context\n                    }), a.hotPosts.thread = a, d.append(a.hotPosts.el), a.hotPosts.onload({\n                        list: lt.getJSON(t.hotPosts)\n                    })),\n                    a.postListHead = new st.PostListHead(a),\n                    a.postList = new st.PostList({\n                        embedThread: a,\n                        params: {\n                            source: \"duoshuo\",\n                            thread_id: i,\n                            max_depth: o.max_depth,\n                            order: o.order,\n                            limit: o.limit\n                        }\n                    }),\n                    a.postList.render().reset(t.response),\n                    a.paginator = new st.Paginator({\n                        collection: a.postList\n                    }),\n                    a.paginator.reset(n);\n                    var c = a.replybox = new st.Replybox(a);\n                    c.postList = a.postList.el,\n                    r() ? a.loginButtons = B(et.loginButtons()).delegate(\"a.ds-more-services\", \"click\",\n                    function() {\n                        return a.loginButtons.find(\".ds-additional-services\").toggle(),\n                        !1\n                    }).delegate(\"a.ds-service-link\", \"click\", l) : a.toolbar = B(et.toolbar()).delegate(\".ds-account-control\", \"mouseenter\",\n                    function() {\n                        B(this).addClass(\"ds-active\")\n                    }).delegate(\".ds-account-control\", \"mouseleave\",\n                    function() {\n                        B(this).removeClass(\"ds-active\")\n                    }).delegate(\"a.ds-bind-more\", \"click\",\n                    function() {\n                        var e = E(et[\"dialog-bind-more\"]()).el.find(\".ds-dialog\").addClass(\"ds-dialog-bind-more\").css(\"width\", \"300px\");\n                        return e.find(\"a.ds-service-link\").click(l),\n                        !1\n                    }).delegate(\"a.ds-unread-comments-count\", \"click\",\n                    function() {\n                        return T(\"unread-comments\"),\n                        !1\n                    });\n                    var u = ['<a name=\"respond\"></a>', a.toolbar || a.loginButtons, c.render().el];\n                    \"top\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(a.postListHead.render().el, a.postList.el, a.paginator.el),\n                    \"bottom\" == o.formPosition && B.fn.append.apply(d, u),\n                    d.append(et.poweredBy(o.poweredby_text)),\n                    a.updateCounter(),\n                    t.alerts && B.each(t.alerts,\n                    function(e, t) {\n                        B('<div class=\"ds-alert\">' + t + \"</div>\").insertBefore(a.toolbar || loginButtons)\n                    }),\n                    o.message && c.el.find(\"textarea\").val(o.message).focus(),\n                    ot.on(\"reset\",\n                    function() {\n                        var e = ot.data.comments || 0;\n                        d.find(\"a.ds-unread-comments-count\").html(e).attr(\"title\", e ? \"你有\" + e + \"条新回复\": \"你没有新回复\").css(\"display\", e ? \"inline\": \"none\")\n                    }),\n                    o.mzadx_id && (S.require(\"mzadxN\",\n                    function() {}), B('<div id=\"MZADX_' + o.mzadx_id + '\" style=\"margin:0 auto;\"></div>').appendTo(d), __mz_rpq = e.__mz_rpq || [], __mz_rpq.push({\n                        l: [o.mzadx_id],\n                        r: \"1\",\n                        _srv: \"MZADX\",\n                        _callback: function() {}\n                    })),\n                    S.thread = a,\n                    ot.data !== s && ot.trigger(\"reset\"),\n                    r() || M.send({\n                        visit_thread_id: a.threadId\n                    })\n                },\n                onMessage: function(e) {\n                    U(this.postList.el, new F(e), this.options)\n                }\n            }),\n            st.HotPosts = Q.extend({\n                tmpl: \"hotPosts\",\n                params: \"show-quote\",\n                render: function() {\n                    return this.el.attr(\"id\", \"ds-hot-posts\"),\n                    this\n                },\n                onload: function(e) {\n                    e.options = B.extend(this.options, e.options),\n                    Q.prototype.onload.call(this, e),\n                    R.call(this.el.find(\"ul\"), this.thread, this.options)\n                }\n            }),\n            st.RecentComments = Q.extend({\n                tmpl: \"commentList\",\n                uri: \"sites/listRecentPosts\",\n                params: \"show-avatars show-time show-title avatar-size show-admin excerpt-length num-items channel-key\",\n                render: function() {\n                    this.el.attr(\"id\", \"ds-recent-comments\")\n                },\n                prepare: function(e) {\n                    return {\n                        list: B.map(e.response,\n                        function(e) {\n                            return new F(e).toJSON()\n                        })\n                    }\n                }\n            }),\n            st.RecentVisitors = Q.extend({\n                tmpl: \"recentVisitors\",\n                uri: \"sites/listVisitors\",\n                params: \"show-time avatar-size num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-recent-visitors\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.TopThreads = Q.extend({\n                tmpl: \"topThreads\",\n                uri: \"sites/listTopThreads\",\n                params: \"range num-items channel-key\",\n                render: function() {\n                    this.el.children().detach(),\n                    this.el.attr(\"id\", \"ds-top-threads\").append(this.waitingEl = B(et.waitingImg()))\n                }\n            }),\n            st.LoginWidget = Q.extend({\n                tmpl: \"loginWidget\",\n                render: function() {\n                    var e = this.el;\n                    e.attr(\"id\", \"ds-login\").html(et.loginWidget([\"weixin\", \"weibo\", \"qq\", \"renren\", \"kaixin\", \"douban\"])),\n                    e.find(\"a\").click(l),\n                    e.find(\"a.ds-logout\").attr(\"href\", Z.logoutUrl())\n                }\n            }),\n            st.ThreadCount = Q.extend({\n                onload: function(e) {\n                    var t = this.el,\n                    s = t.data(\"count-type\") || \"comments\",\n                    a = e.data[s];\n                    t[t.data(\"replace\") ? \"replaceWith\": \"html\"](z[s + \"_\" + (a ? a > 1 ? \"multiple\": \"one\": \"zero\")].replace(\"{num}\", a))\n                }\n            }),\n            st.ShareWidget = Q.extend({\n                tmpl: \"shareWidget\",\n                render: function() {\n                    var e = {\n                        copyright: \"多说分享插件\",\n                        services: [\"weibo\", \"qzone\", \"sohu\", \"renren\", \"netease\", \"qqt\", \"kaixin\", \"douban\", \"qq\", \"meilishuo\", \"mogujie\", \"baidu\", \"taobao\", \"google\", \"wechat\", \"diandian\", \"huaban\", \"duitang\", \"youdao\", \"pengyou\", \"facebook\", \"twitter\", \"linkedin\", \"msn\"]\n                    };\n                    this.el.attr(\"id\", \"ds-share\"),\n                    this.el.children().attr(\"id\", \"ds-reset\"),\n                    this.el.find(\".ds-share-aside-inner\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").html(et.shareWidget(e)),\n                    this.el.find(\".ds-share-icons-more\").hide(),\n                    this.el.hasClass(\"flat\") && this.el.find(\"a\").each(function() {\n                        B(this).addClass(\"flat\")\n                    }),\n                    p(this.el),\n                    this.delegateEvents()\n                },\n                delegateEvents: function() {\n                    var s = this,\n                    i = s.el;\n                    if (i.children().hasClass(\"ds-share-inline\")) {\n                        var r = \".ds-share-icons-more\",\n                        n = i.find(r),\n                        d = \"[data-toggle=ds-share-icons-more]\";\n                        i.delegate(d, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(d, \"mouseout\",\n                        function() {\n                            n.hide()\n                        }),\n                        i.delegate(r, \"mouseover\",\n                        function() {\n                            n.show()\n                        }),\n                        i.delegate(r, \"mouseout\",\n                        function() {\n                            n.hide()\n                        })\n                    } else {\n                        var l = i.children().hasClass(\"ds-share-aside-left\") ? \"slide-to-right\": \"slide-to-left\",\n                        c = i.children();\n                        if (!o.cssProperty(\"transition\")) {\n                            var u = i.children().hasClass(\"ds-share-aside-left\") ? \"left\": \"right\";\n                            i.delegate(\".ds-share-aside-toggle\", \"mouseover\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) - 195 : e[u] = 0,\n                                c.animate(e, 200)\n                            }),\n                            i.delegate(\".ds-share-aside-inner\", \"mouseleave\",\n                            function() {\n                                var e = {},\n                                s = P.ie6 && \"right\" === u;\n                                s ? e.left = (t.documentElement.scrollLeft + t.documentElement.clientWidth - this.offsetWidth - (parseInt(this.currentStyle.marginLeft, 10) || 0) - parseInt(this.currentStyle.marginRight, 10) || 0) + 230 : e[u] = -229,\n                                c.animate(e, 200)\n                            })\n                        }\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseover\",\n                        function() {\n                            c.addClass(l)\n                        }),\n                        i.delegate(\".ds-share-aside-toggle,.ds-share-aside-inner\", \"mouseleave\",\n                        function() {\n                            c.removeClass(l)\n                        })\n                    }\n                    i.delegate(\"a\", \"click\",\n                    function(t) {\n                        var s = B(this).data(\"service\");\n                        if (!i.data(\"url\")) return void alert(\"请设置data-url\");\n                        if (\"wechat\" === s) {\n                            var r = a() + \"/api/qrcode/getImage.png\",\n                            n = \"?size=240&text=\" + i.data(\"url\"),\n                            d = E(et[\"dialog-qrcode\"]({\n                                qrcode_url: r + n,\n                                url: i.data(\"url\")\n                            }));\n                            d.el.find(\".ds-dialog\").css(\"width\", \"320px\")\n                        } else {\n                            var l = a() + \"/share-proxy/?\" + o.param({\n                                service: B(this).data(\"service\"),\n                                thread_key: i.data(\"threadKey\"),\n                                title: i.data(\"title\"),\n                                images: i.data(\"images\"),\n                                content: i.data(\"content\"),\n                                url: i.data(\"url\")\n                            });\n                            e.open(l, \"_blank\")\n                        }\n                        t.preventDefault(),\n                        t.stopPropagation()\n                    })\n                }\n            });\n            var it = 0;\n            S.initSelector = function(e, t) {\n                function s(e) {\n                    W(e),\n                    o.extend(z, e.options),\n                    dt.set(e.response)\n                }\n                var a = []; ! q() || !B.isReady && j || B(e).each(function(e, s) {\n                    var i = B(s);\n                    if (!i.data(\"initialized\")) {\n                        i.data(\"initialized\", !0);\n                        var r = new st[t.type](i, t);\n                        if (at.push(r), \"ThreadCount\" === t.type) {\n                            var n = i.attr(\"data-thread-key\");\n                            i.attr(\"data-channel-key\") && (n = i.attr(\"data-channel-key\") + \":\" + n),\n                            a.push(n),\n                            dt[n] || (dt[n] = new G({})),\n                            dt[n].on(\"reset\",\n                            function() {\n                                r.onload(this)\n                            })\n                        } else if (r.uri) {\n                            var o = {};\n                            B.each(r.params.split(\" \"),\n                            function(e, t) {\n                                o[t.replace(/-/g, \"_\")] = i.attr(\"data-\" + t) || i.data(t)\n                            }),\n                            A.get(r.uri, H(o),\n                            function(e) {\n                                r.load(e)\n                            })\n                        }\n                    }\n                }),\n                a.length && A.get(\"threads/counts\", H({\n                    threads: a.join(\",\")\n                }), s)\n            },\n            (S.initView = function() {\n                B.each(O, S.initSelector)\n            })(),\n            B(function() {\n                if (!c) {\n                    if (!q()) return C.error(\"缺少 duoshuoQuery 的定义\");\n                    C.warn(\"请在加载多说 embed.js 之前定义 duoshuoQuery\")\n                }\n                setInterval(function() {\n                    B(\".ds-time\").each(function() {\n                        var e = B(this).attr(\"datetime\");\n                        e && (this.innerHTML = S.elapsedTime(e))\n                    })\n                },\n                2e4),\n                c.ondomready && c.ondomready(),\n                S.initView(),\n                !it && c.short_name && A.get(\"analytics/ping\", H({}), W)\n            })\n        })\n    }\n} (window, document);\n"}],"Post":[{"title":"GitHub Pages + Hexo 搭建博客记录","date":"2016-03-09T08:12:01.000Z","_content":"\n曾经想用阿里云ecs自己搭一个博客，平常可以写点东西放上去，结果过于麻烦并且不必要。Github Pages + Hexo是在windows上很友好的一个组合。\n<!--more-->\n好多教程里用的是 jekyll 来生成静态网页，但是在windows上使用并不是官方推荐的，所以我使用了hexo作为生成工具。\n\n# 需要安装的软件\n- [node.js][4]\n- [git][6]\n- [hexo][3]\n\n# 关于Git及GitHub\n## Git & GitHub\n关于Git的教程网上很多，我推荐我看过的一个\n[廖雪峰的Git教程][1]\n里面说的很详细，不再赘述\n## GitHub Pages\nGitHub是一个在线托管仓库，GitHub Pages就是把你的仓库变成一个可以访问的静态网站的功能。\n\n相关介绍(同时也是官方教程):\n[GitHub Pages][2]\n\n通过Github Pages你可以为你的Github账户建立一个自己的主页，每一个托管在github上的项目都可以作为一个二级目录来展示你网站的相应的部分或者实现相应的功能。\n\n由于只支持静态网页的访问（毕竟免费），所以如果想要搭建博客，那么就需要一套自动生成静态网页的工具，还要整合一些网络上的服务，以便于让自己的博客功能更加丰富。\n\n## 开启Github Pages\n网上各种教程，比如这个:\n[Hexo3.3.1搭建博客指南][5]\n\n\n# 关于Hexo\n官网链接：\n[Hexo - 快速、简洁且高效的博客框架][3]\n需要注意的是安装之前需要先安装node.js，下载请到这里:\n[nodejs.org][4]\nhexo安装完成之后，参考hexo官网的文档，或者上面那篇[博客][5]内的说明，就可以使用hexo进行博客的更新的管理了。\n如果需要美化的话，hexo中提供的有主题，也可以自己根据需要制作。\n\n# 遇到的问题\n## git filename/filepath too long\n因为想要保存hexo源文件到github，便于换电脑时候也能写博客（参考[这里][7]），使用`git add .` 命令时提示node_modules中的文件有一部分因为名字太长而无法访问，找到一个说法是可以在git内设置变量如下\n```git\ngit config --global core.longpaths true\n```\n可以让git接收过长的路径名，结果还是不行\ngoogle了一下发现是windows api的锅，所以只好把 node_modules文件夹放入 .gitignore文件，解决\n## git permission denied\n因为 git bash（安装git之后的终端窗口）连接github仓库时需要rsa密钥，我之前用的是github的bash，所以有密钥，就不要生成新的秘钥，再添加到github的白名单里了。\n添加秘钥的方法参考:\n[Generate a SSH key][8]\n[Adding your SSH key to the ssh-agent][9]\n## 自动替换crlf为lf\nlf是linux系统中使用的换行符，crlf是windows中使用的换行符。\n因为windows和linux在换行符上的差异。因为跨平台的特性，git默认会检查换行符，并给出警告。\n一下引用自git官方文档:\n\n> `core.autocrlf`\n> 假如你正在Windows上写程序，又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。这是因为Windows使用回车和换行两个字符来结束一行，而Mac和Linux只使用换行一个字符。虽然这是小问题，但它会极大地扰乱跨平台协作。\n> \n> Git可以在你提交时自动地把行结束符CRLF转换成LF，而在签出代码时把LF转换成CRLF。用core.autocrlf来打开此项功能，如果是在Windows系统上，把它设置成true，这样当签出代码时，LF会被转换成CRLF：\n> \n> `$git config --global core.autocrlf true` \n> Linux或Mac系统使用LF作为行结束符，因此你不想\n> Git\n> 在签出文件时进行自动的转换；当一个以CRLF为行结束符的文件不小心被引入时你肯定想进行修正，把core.autocrlf设置成input来告诉\n> Git 在提交时把CRLF转换成LF，签出时不转换：\n> \n> `$ git config --global core.autocrlf input`\n\n> 这样会在Windows系统上的签出文件中保留CRLF，会在Mac和Linux系统上，包括仓库中保留LF。\n> \n> 如果你是Windows程序员，且正在开发仅运行在Windows上的项目，可以设置false取消此功能，把回车符记录在库中：\n> \n> `$ git config --global core.autocrlf false`\n\n  [1]: http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000 \"廖雪峰的Git教程\"\n  [2]: https://pages.github.com/ \"GitHub Pages 官方网站\"\n  [3]: https://hexo.io/zh-cn/%20hexo-%E5%BF%AB%E9%80%9F%E3%80%81%E7%AE%80%E6%B4%81%E4%B8%94%E9%AB%98%E6%95%88%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6\n  [4]: https://nodejs.org/en/ \"node.js\"\n  [5]: http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/ \"loveNight hexo3.3.1搭建博客指南\"\n  [6]: https://git-scm.com/downloads \"Git Download Page\"\n  [7]: http://zhihu.com/question/21193762/answer/79109280?utm_campaign=webshare&amp;utm_source=weibo&amp;utm_medium=zhihu \"CrazyMilk的回答\"\n  [8]: https://help.github.com/articles/generating-an-ssh-key/ \"Generating an SSH key\"\n  [9]: https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent \"Add your SSH key to your ssh-agent\"","source":"_posts/GitHub-Pages-Hexo-搭建博客记录.md","raw":"---\ntitle: GitHub Pages + Hexo 搭建博客记录\ndate: 2016-03-09 16:12:01\ntags: \n- Hexo\n- GitHub Pages\ncategory: \n- 随笔\n---\n\n曾经想用阿里云ecs自己搭一个博客，平常可以写点东西放上去，结果过于麻烦并且不必要。Github Pages + Hexo是在windows上很友好的一个组合。\n<!--more-->\n好多教程里用的是 jekyll 来生成静态网页，但是在windows上使用并不是官方推荐的，所以我使用了hexo作为生成工具。\n\n# 需要安装的软件\n- [node.js][4]\n- [git][6]\n- [hexo][3]\n\n# 关于Git及GitHub\n## Git & GitHub\n关于Git的教程网上很多，我推荐我看过的一个\n[廖雪峰的Git教程][1]\n里面说的很详细，不再赘述\n## GitHub Pages\nGitHub是一个在线托管仓库，GitHub Pages就是把你的仓库变成一个可以访问的静态网站的功能。\n\n相关介绍(同时也是官方教程):\n[GitHub Pages][2]\n\n通过Github Pages你可以为你的Github账户建立一个自己的主页，每一个托管在github上的项目都可以作为一个二级目录来展示你网站的相应的部分或者实现相应的功能。\n\n由于只支持静态网页的访问（毕竟免费），所以如果想要搭建博客，那么就需要一套自动生成静态网页的工具，还要整合一些网络上的服务，以便于让自己的博客功能更加丰富。\n\n## 开启Github Pages\n网上各种教程，比如这个:\n[Hexo3.3.1搭建博客指南][5]\n\n\n# 关于Hexo\n官网链接：\n[Hexo - 快速、简洁且高效的博客框架][3]\n需要注意的是安装之前需要先安装node.js，下载请到这里:\n[nodejs.org][4]\nhexo安装完成之后，参考hexo官网的文档，或者上面那篇[博客][5]内的说明，就可以使用hexo进行博客的更新的管理了。\n如果需要美化的话，hexo中提供的有主题，也可以自己根据需要制作。\n\n# 遇到的问题\n## git filename/filepath too long\n因为想要保存hexo源文件到github，便于换电脑时候也能写博客（参考[这里][7]），使用`git add .` 命令时提示node_modules中的文件有一部分因为名字太长而无法访问，找到一个说法是可以在git内设置变量如下\n```git\ngit config --global core.longpaths true\n```\n可以让git接收过长的路径名，结果还是不行\ngoogle了一下发现是windows api的锅，所以只好把 node_modules文件夹放入 .gitignore文件，解决\n## git permission denied\n因为 git bash（安装git之后的终端窗口）连接github仓库时需要rsa密钥，我之前用的是github的bash，所以有密钥，就不要生成新的秘钥，再添加到github的白名单里了。\n添加秘钥的方法参考:\n[Generate a SSH key][8]\n[Adding your SSH key to the ssh-agent][9]\n## 自动替换crlf为lf\nlf是linux系统中使用的换行符，crlf是windows中使用的换行符。\n因为windows和linux在换行符上的差异。因为跨平台的特性，git默认会检查换行符，并给出警告。\n一下引用自git官方文档:\n\n> `core.autocrlf`\n> 假如你正在Windows上写程序，又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。这是因为Windows使用回车和换行两个字符来结束一行，而Mac和Linux只使用换行一个字符。虽然这是小问题，但它会极大地扰乱跨平台协作。\n> \n> Git可以在你提交时自动地把行结束符CRLF转换成LF，而在签出代码时把LF转换成CRLF。用core.autocrlf来打开此项功能，如果是在Windows系统上，把它设置成true，这样当签出代码时，LF会被转换成CRLF：\n> \n> `$git config --global core.autocrlf true` \n> Linux或Mac系统使用LF作为行结束符，因此你不想\n> Git\n> 在签出文件时进行自动的转换；当一个以CRLF为行结束符的文件不小心被引入时你肯定想进行修正，把core.autocrlf设置成input来告诉\n> Git 在提交时把CRLF转换成LF，签出时不转换：\n> \n> `$ git config --global core.autocrlf input`\n\n> 这样会在Windows系统上的签出文件中保留CRLF，会在Mac和Linux系统上，包括仓库中保留LF。\n> \n> 如果你是Windows程序员，且正在开发仅运行在Windows上的项目，可以设置false取消此功能，把回车符记录在库中：\n> \n> `$ git config --global core.autocrlf false`\n\n  [1]: http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000 \"廖雪峰的Git教程\"\n  [2]: https://pages.github.com/ \"GitHub Pages 官方网站\"\n  [3]: https://hexo.io/zh-cn/%20hexo-%E5%BF%AB%E9%80%9F%E3%80%81%E7%AE%80%E6%B4%81%E4%B8%94%E9%AB%98%E6%95%88%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6\n  [4]: https://nodejs.org/en/ \"node.js\"\n  [5]: http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/ \"loveNight hexo3.3.1搭建博客指南\"\n  [6]: https://git-scm.com/downloads \"Git Download Page\"\n  [7]: http://zhihu.com/question/21193762/answer/79109280?utm_campaign=webshare&amp;utm_source=weibo&amp;utm_medium=zhihu \"CrazyMilk的回答\"\n  [8]: https://help.github.com/articles/generating-an-ssh-key/ \"Generating an SSH key\"\n  [9]: https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent \"Add your SSH key to your ssh-agent\"","slug":"GitHub-Pages-Hexo-搭建博客记录","published":1,"updated":"2016-03-09T08:46:28.910Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cill1jrvk0001gsschj3gsefn","content":"<p>曾经想用阿里云ecs自己搭一个博客，平常可以写点东西放上去，结果过于麻烦并且不必要。Github Pages + Hexo是在windows上很友好的一个组合。<br><a id=\"more\"></a><br>好多教程里用的是 jekyll 来生成静态网页，但是在windows上使用并不是官方推荐的，所以我使用了hexo作为生成工具。</p>\n<h1 id=\"需要安装的软件\"><a href=\"#需要安装的软件\" class=\"headerlink\" title=\"需要安装的软件\"></a>需要安装的软件</h1><ul>\n<li><a href=\"https://nodejs.org/en/\" title=\"node.js\" target=\"_blank\" rel=\"external\">node.js</a></li>\n<li><a href=\"https://git-scm.com/downloads\" title=\"Git Download Page\" target=\"_blank\" rel=\"external\">git</a></li>\n<li><a href=\"https://hexo.io/zh-cn/%20hexo-%E5%BF%AB%E9%80%9F%E3%80%81%E7%AE%80%E6%B4%81%E4%B8%94%E9%AB%98%E6%95%88%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6\" target=\"_blank\" rel=\"external\">hexo</a></li>\n</ul>\n<h1 id=\"关于Git及GitHub\"><a href=\"#关于Git及GitHub\" class=\"headerlink\" title=\"关于Git及GitHub\"></a>关于Git及GitHub</h1><h2 id=\"Git-amp-GitHub\"><a href=\"#Git-amp-GitHub\" class=\"headerlink\" title=\"Git &amp; GitHub\"></a>Git &amp; GitHub</h2><p>关于Git的教程网上很多，我推荐我看过的一个<br><a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000\" title=\"廖雪峰的Git教程\" target=\"_blank\" rel=\"external\">廖雪峰的Git教程</a><br>里面说的很详细，不再赘述</p>\n<h2 id=\"GitHub-Pages\"><a href=\"#GitHub-Pages\" class=\"headerlink\" title=\"GitHub Pages\"></a>GitHub Pages</h2><p>GitHub是一个在线托管仓库，GitHub Pages就是把你的仓库变成一个可以访问的静态网站的功能。</p>\n<p>相关介绍(同时也是官方教程):<br><a href=\"https://pages.github.com/\" title=\"GitHub Pages 官方网站\" target=\"_blank\" rel=\"external\">GitHub Pages</a></p>\n<p>通过Github Pages你可以为你的Github账户建立一个自己的主页，每一个托管在github上的项目都可以作为一个二级目录来展示你网站的相应的部分或者实现相应的功能。</p>\n<p>由于只支持静态网页的访问（毕竟免费），所以如果想要搭建博客，那么就需要一套自动生成静态网页的工具，还要整合一些网络上的服务，以便于让自己的博客功能更加丰富。</p>\n<h2 id=\"开启Github-Pages\"><a href=\"#开启Github-Pages\" class=\"headerlink\" title=\"开启Github Pages\"></a>开启Github Pages</h2><p>网上各种教程，比如这个:<br><a href=\"http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/\" title=\"loveNight hexo3.3.1搭建博客指南\" target=\"_blank\" rel=\"external\">Hexo3.3.1搭建博客指南</a></p>\n<h1 id=\"关于Hexo\"><a href=\"#关于Hexo\" class=\"headerlink\" title=\"关于Hexo\"></a>关于Hexo</h1><p>官网链接：<br><a href=\"https://hexo.io/zh-cn/%20hexo-%E5%BF%AB%E9%80%9F%E3%80%81%E7%AE%80%E6%B4%81%E4%B8%94%E9%AB%98%E6%95%88%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6\" target=\"_blank\" rel=\"external\">Hexo - 快速、简洁且高效的博客框架</a><br>需要注意的是安装之前需要先安装node.js，下载请到这里:<br><a href=\"https://nodejs.org/en/\" title=\"node.js\" target=\"_blank\" rel=\"external\">nodejs.org</a><br>hexo安装完成之后，参考hexo官网的文档，或者上面那篇<a href=\"http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/\" title=\"loveNight hexo3.3.1搭建博客指南\" target=\"_blank\" rel=\"external\">博客</a>内的说明，就可以使用hexo进行博客的更新的管理了。<br>如果需要美化的话，hexo中提供的有主题，也可以自己根据需要制作。</p>\n<h1 id=\"遇到的问题\"><a href=\"#遇到的问题\" class=\"headerlink\" title=\"遇到的问题\"></a>遇到的问题</h1><h2 id=\"git-filename-filepath-too-long\"><a href=\"#git-filename-filepath-too-long\" class=\"headerlink\" title=\"git filename/filepath too long\"></a>git filename/filepath too long</h2><p>因为想要保存hexo源文件到github，便于换电脑时候也能写博客（参考<a href=\"http://zhihu.com/question/21193762/answer/79109280?utm_campaign=webshare&amp;utm_source=weibo&amp;utm_medium=zhihu\" title=\"CrazyMilk的回答\" target=\"_blank\" rel=\"external\">这里</a>），使用<code>git add .</code> 命令时提示node_modules中的文件有一部分因为名字太长而无法访问，找到一个说法是可以在git内设置变量如下<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global core.longpaths true</span><br></pre></td></tr></table></figure></p>\n<p>可以让git接收过长的路径名，结果还是不行<br>google了一下发现是windows api的锅，所以只好把 node_modules文件夹放入 .gitignore文件，解决</p>\n<h2 id=\"git-permission-denied\"><a href=\"#git-permission-denied\" class=\"headerlink\" title=\"git permission denied\"></a>git permission denied</h2><p>因为 git bash（安装git之后的终端窗口）连接github仓库时需要rsa密钥，我之前用的是github的bash，所以有密钥，就不要生成新的秘钥，再添加到github的白名单里了。<br>添加秘钥的方法参考:<br><a href=\"https://help.github.com/articles/generating-an-ssh-key/\" title=\"Generating an SSH key\" target=\"_blank\" rel=\"external\">Generate a SSH key</a><br><a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent\" title=\"Add your SSH key to your ssh-agent\" target=\"_blank\" rel=\"external\">Adding your SSH key to the ssh-agent</a></p>\n<h2 id=\"自动替换crlf为lf\"><a href=\"#自动替换crlf为lf\" class=\"headerlink\" title=\"自动替换crlf为lf\"></a>自动替换crlf为lf</h2><p>lf是linux系统中使用的换行符，crlf是windows中使用的换行符。<br>因为windows和linux在换行符上的差异。因为跨平台的特性，git默认会检查换行符，并给出警告。<br>一下引用自git官方文档:</p>\n<blockquote>\n<p><code>core.autocrlf</code><br>假如你正在Windows上写程序，又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。这是因为Windows使用回车和换行两个字符来结束一行，而Mac和Linux只使用换行一个字符。虽然这是小问题，但它会极大地扰乱跨平台协作。</p>\n<p>Git可以在你提交时自动地把行结束符CRLF转换成LF，而在签出代码时把LF转换成CRLF。用core.autocrlf来打开此项功能，如果是在Windows系统上，把它设置成true，这样当签出代码时，LF会被转换成CRLF：</p>\n<p><code>$git config --global core.autocrlf true</code><br>Linux或Mac系统使用LF作为行结束符，因此你不想<br>Git<br>在签出文件时进行自动的转换；当一个以CRLF为行结束符的文件不小心被引入时你肯定想进行修正，把core.autocrlf设置成input来告诉<br>Git 在提交时把CRLF转换成LF，签出时不转换：</p>\n<p><code>$ git config --global core.autocrlf input</code></p>\n<p>这样会在Windows系统上的签出文件中保留CRLF，会在Mac和Linux系统上，包括仓库中保留LF。</p>\n<p>如果你是Windows程序员，且正在开发仅运行在Windows上的项目，可以设置false取消此功能，把回车符记录在库中：</p>\n<p><code>$ git config --global core.autocrlf false</code></p>\n</blockquote>\n","excerpt":"<p>曾经想用阿里云ecs自己搭一个博客，平常可以写点东西放上去，结果过于麻烦并且不必要。Github Pages + Hexo是在windows上很友好的一个组合。<br>","more":"<br>好多教程里用的是 jekyll 来生成静态网页，但是在windows上使用并不是官方推荐的，所以我使用了hexo作为生成工具。</p>\n<h1 id=\"需要安装的软件\"><a href=\"#需要安装的软件\" class=\"headerlink\" title=\"需要安装的软件\"></a>需要安装的软件</h1><ul>\n<li><a href=\"https://nodejs.org/en/\" title=\"node.js\">node.js</a></li>\n<li><a href=\"https://git-scm.com/downloads\" title=\"Git Download Page\">git</a></li>\n<li><a href=\"https://hexo.io/zh-cn/%20hexo-%E5%BF%AB%E9%80%9F%E3%80%81%E7%AE%80%E6%B4%81%E4%B8%94%E9%AB%98%E6%95%88%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6\">hexo</a></li>\n</ul>\n<h1 id=\"关于Git及GitHub\"><a href=\"#关于Git及GitHub\" class=\"headerlink\" title=\"关于Git及GitHub\"></a>关于Git及GitHub</h1><h2 id=\"Git-amp-GitHub\"><a href=\"#Git-amp-GitHub\" class=\"headerlink\" title=\"Git &amp; GitHub\"></a>Git &amp; GitHub</h2><p>关于Git的教程网上很多，我推荐我看过的一个<br><a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000\" title=\"廖雪峰的Git教程\">廖雪峰的Git教程</a><br>里面说的很详细，不再赘述</p>\n<h2 id=\"GitHub-Pages\"><a href=\"#GitHub-Pages\" class=\"headerlink\" title=\"GitHub Pages\"></a>GitHub Pages</h2><p>GitHub是一个在线托管仓库，GitHub Pages就是把你的仓库变成一个可以访问的静态网站的功能。</p>\n<p>相关介绍(同时也是官方教程):<br><a href=\"https://pages.github.com/\" title=\"GitHub Pages 官方网站\">GitHub Pages</a></p>\n<p>通过Github Pages你可以为你的Github账户建立一个自己的主页，每一个托管在github上的项目都可以作为一个二级目录来展示你网站的相应的部分或者实现相应的功能。</p>\n<p>由于只支持静态网页的访问（毕竟免费），所以如果想要搭建博客，那么就需要一套自动生成静态网页的工具，还要整合一些网络上的服务，以便于让自己的博客功能更加丰富。</p>\n<h2 id=\"开启Github-Pages\"><a href=\"#开启Github-Pages\" class=\"headerlink\" title=\"开启Github Pages\"></a>开启Github Pages</h2><p>网上各种教程，比如这个:<br><a href=\"http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/\" title=\"loveNight hexo3.3.1搭建博客指南\">Hexo3.3.1搭建博客指南</a></p>\n<h1 id=\"关于Hexo\"><a href=\"#关于Hexo\" class=\"headerlink\" title=\"关于Hexo\"></a>关于Hexo</h1><p>官网链接：<br><a href=\"https://hexo.io/zh-cn/%20hexo-%E5%BF%AB%E9%80%9F%E3%80%81%E7%AE%80%E6%B4%81%E4%B8%94%E9%AB%98%E6%95%88%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6\">Hexo - 快速、简洁且高效的博客框架</a><br>需要注意的是安装之前需要先安装node.js，下载请到这里:<br><a href=\"https://nodejs.org/en/\" title=\"node.js\">nodejs.org</a><br>hexo安装完成之后，参考hexo官网的文档，或者上面那篇<a href=\"http://lovenight.github.io/2015/11/10/Hexo-3-1-1-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/\" title=\"loveNight hexo3.3.1搭建博客指南\">博客</a>内的说明，就可以使用hexo进行博客的更新的管理了。<br>如果需要美化的话，hexo中提供的有主题，也可以自己根据需要制作。</p>\n<h1 id=\"遇到的问题\"><a href=\"#遇到的问题\" class=\"headerlink\" title=\"遇到的问题\"></a>遇到的问题</h1><h2 id=\"git-filename-filepath-too-long\"><a href=\"#git-filename-filepath-too-long\" class=\"headerlink\" title=\"git filename/filepath too long\"></a>git filename/filepath too long</h2><p>因为想要保存hexo源文件到github，便于换电脑时候也能写博客（参考<a href=\"http://zhihu.com/question/21193762/answer/79109280?utm_campaign=webshare&amp;utm_source=weibo&amp;utm_medium=zhihu\" title=\"CrazyMilk的回答\">这里</a>），使用<code>git add .</code> 命令时提示node_modules中的文件有一部分因为名字太长而无法访问，找到一个说法是可以在git内设置变量如下<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global core.longpaths true</span><br></pre></td></tr></table></figure></p>\n<p>可以让git接收过长的路径名，结果还是不行<br>google了一下发现是windows api的锅，所以只好把 node_modules文件夹放入 .gitignore文件，解决</p>\n<h2 id=\"git-permission-denied\"><a href=\"#git-permission-denied\" class=\"headerlink\" title=\"git permission denied\"></a>git permission denied</h2><p>因为 git bash（安装git之后的终端窗口）连接github仓库时需要rsa密钥，我之前用的是github的bash，所以有密钥，就不要生成新的秘钥，再添加到github的白名单里了。<br>添加秘钥的方法参考:<br><a href=\"https://help.github.com/articles/generating-an-ssh-key/\" title=\"Generating an SSH key\">Generate a SSH key</a><br><a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent\" title=\"Add your SSH key to your ssh-agent\">Adding your SSH key to the ssh-agent</a></p>\n<h2 id=\"自动替换crlf为lf\"><a href=\"#自动替换crlf为lf\" class=\"headerlink\" title=\"自动替换crlf为lf\"></a>自动替换crlf为lf</h2><p>lf是linux系统中使用的换行符，crlf是windows中使用的换行符。<br>因为windows和linux在换行符上的差异。因为跨平台的特性，git默认会检查换行符，并给出警告。<br>一下引用自git官方文档:</p>\n<blockquote>\n<p><code>core.autocrlf</code><br>假如你正在Windows上写程序，又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。这是因为Windows使用回车和换行两个字符来结束一行，而Mac和Linux只使用换行一个字符。虽然这是小问题，但它会极大地扰乱跨平台协作。</p>\n<p>Git可以在你提交时自动地把行结束符CRLF转换成LF，而在签出代码时把LF转换成CRLF。用core.autocrlf来打开此项功能，如果是在Windows系统上，把它设置成true，这样当签出代码时，LF会被转换成CRLF：</p>\n<p><code>$git config --global core.autocrlf true</code><br>Linux或Mac系统使用LF作为行结束符，因此你不想<br>Git<br>在签出文件时进行自动的转换；当一个以CRLF为行结束符的文件不小心被引入时你肯定想进行修正，把core.autocrlf设置成input来告诉<br>Git 在提交时把CRLF转换成LF，签出时不转换：</p>\n<p><code>$ git config --global core.autocrlf input</code></p>\n<p>这样会在Windows系统上的签出文件中保留CRLF，会在Mac和Linux系统上，包括仓库中保留LF。</p>\n<p>如果你是Windows程序员，且正在开发仅运行在Windows上的项目，可以设置false取消此功能，把回车符记录在库中：</p>\n<p><code>$ git config --global core.autocrlf false</code></p>\n</blockquote>"}],"PostAsset":[],"PostCategory":[{"post_id":"cill1jrvk0001gsschj3gsefn","category_id":"cill1jrw00005gssc8x6yll1m","_id":"cill1jrw60008gssc9e6fkglt"}],"PostTag":[{"post_id":"cill1jrvk0001gsschj3gsefn","tag_id":"cill1jrvy0004gsschtrwlq52","_id":"cill1jrw80009gssclacgg7lp"},{"post_id":"cill1jrvk0001gsschj3gsefn","tag_id":"cill1jrw30007gsscx7ivb5ym","_id":"cill1jrw8000agssc3yjbvuiq"}],"Tag":[{"name":"Hexo","_id":"cill1jrvy0004gsschtrwlq52"},{"name":"GitHub Pages","_id":"cill1jrw30007gsscx7ivb5ym"}]}}